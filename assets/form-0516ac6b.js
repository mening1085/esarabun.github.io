import{E as ns,M as ds,a as rs,S as cs,_ as _s}from"./garudaLogo1-a5ed496a.js";import{C as us}from"./index-cb5a08aa.js";import{V as vs,C as ms}from"./VueSelect-403231fd.js";import{M as ps}from"./index-b704274e.js";import{R as bs}from"./index-e163c14d.js";import{B as fs}from"./index-c2d6eb9c.js";import{I as gs}from"./index-8d30ace7.js";import{I as xs}from"./index-2198f2cf.js";import{T as hs}from"./index-78f015fc.js";import{T as ys}from"./index-3e8503e7.js";import{S as ks}from"./index-fcbb1db2.js";import{T as Ms}from"./TextValid-d1c607fc.js";import{M as ws}from"./index-11a388f0.js";import{M as Vs}from"./index-73eccad8.js";import{u as Ss,a as p}from"./vee-validate.esm-bf91438b.js";import{aA as r,ay as Fs,k as z,al as Cs,be as Ue,o as b,x as s,bj as V,m as fe,n as B,aF as k,as as c,p as e,bo as vl,ac as ge,F as T,aD as Y,w,aT as v}from"./preload-helper-f37a9bec.js";import{c as Re,a as u}from"./array-6ac4c54d.js";import{_ as zs,a as xe,u as js,g as $e,c as Os}from"./index-f91482a0.js";import{d as U}from"./dayjs.min-472eb357.js";import{M as Ds}from"./index-3891a0e1.js";import{o as Is,f as Ls,s as Ts,a as Ys,i as Us,j as Rs,k as qs,r as Es,c as ml}from"./select-option-b2a02578.js";import{p as Bs}from"./pdfkit-cbb5e47f.js";import{C as Ns}from"./index-8ecfca6d.js";import{N as As}from"./index-f32159fc.js";import{T as Ps}from"./index-b52aeb81.js";import"./tabs-cf3e0d3b.js";import"./dom-b10fc197.js";import"./focus-management-94a631f4.js";import"./use-resolve-button-type-d7bee841.js";import"./hidden-800255f5.js";import"./micro-task-89dcd6af.js";import"./index-325a54cb.js";import"./ck-white-3501111f.js";import"./index-5ddbaceb.js";import"./index-a56f86b1.js";import"./transition-be7c09bc.js";import"./open-closed-75edfb8a.js";import"./use-outside-click-156e41c1.js";import"./iconify-2baafea4.js";import"./vue-cleave.min-df5c8cc9.js";const Hs={components:{ModalError:Ds,CFlatPickr:Ns,Button:fs,Icon:gs,Textinput:ys,InputGroup:xs,Textarea:hs,Card:us,VueSelect:vs,vSelect:ms,Modal:ps,Radio:bs,Editor:ns,Stepper:ks,TextValid:Ms,ModalOrganizeUser:ds,ModalOrganizeOut:ws,ModalBookRef:rs,ModalOrganizeIn:Vs,pdfkit:Bs,ScannerModal:cs,NavigationPath:As,Tooltip:Ps},data(){return{plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code help wordcount"],toolbar:"undo redo | styleselect | fontsizeselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image | print preview media fullscreen | forecolor backcolor emoticons | help",pdfTest:"",scannerActive:!1}},setup(){const j=r(""),o=r(!1),he=r(!1),t=r(!1),G=r(!1),et=r(!1),R=js(),C=r([{id:1,title:"ข้อมูลเบื้องต้น"},{id:2,title:"ออกเลขรับ"},{id:3,title:"รูปแบบหนังสือ/เสนอ"}]),N=r([{id:1,title:"ข้อมูลเบื้องต้น"},{id:2,title:"ออกเลขรับ"},{id:3,title:"รูปแบบหนังสือ/เสนอ"}]),y=r([]),I=r([]),F=r(""),O=r([]),H=r([]),M=r(ml),D=r(ml),K=r([]),se=r([]),Q=r([]),W=r(""),ae=r(null),ye=r(null),ke=r(null),L=r([]),A=r([]),m=r([]),q=r([]),l=r([]),f=r([]),g=r([]),X=r([]),qe=r(""),Me=r(""),we=r(""),Ve=r(""),Se=r(""),pl=r([{value:!0,label:"ออกเลขรับหนังสือ"},{value:!1,label:"ลงชื่อรับ แต่ไม่ออกเลขรับหนังสือ"}]),Z=r(0),P=Fs({isReceiveMail:!1,isModalFromOut:!1,isModalFromIn:!1,isModalTo:!1,isModalBookRef:!1,isShowDialogPdf:!1,isSuccess:!1,isDuplicateCase:!1}),tt=z(()=>$e().accept_document),bl=z(()=>$e()),Fe=z(()=>{var i;return(i=$e().acceptList[1])==null?void 0:i.file_size_limit});let ot=tt.value.split(", ");const fl=z(()=>{switch(Z.value){case 0:return lt;case 1:return Ve.value==="หนังสือรับจากอีเมล"&&(console.log("documentStatus.value",Ve.value),st=Re().shape({detail_receive:u().nullable().required("กรุณากรอกรายละเอียด"),subject_receive:u().nullable().required("กรุณากรอกเรื่อง")})),st;case 2:return gl;default:return lt}});let lt=Re().shape({document_flow_id:u().required("กรุณาเลือกเส้นทางหนังสือ").nullable(),book_type:u().required("กรุณาเลือกประเภทหนังสือ").nullable(),document_type:u().required("กรุณาเลือกประเภทเอกสาร").nullable(),year:u().nullable(),document_number:u().nullable().required("กรุณากรอกเลขที่หนังสือ"),document_date:u().nullable().required("กรุณาเลือกวันที่ลงหนังสือ"),from_type:u().nullable().required("กรุณาระบุว่ามาจากหน่วยงานไหน"),from_id:u().nullable().required("กรุณาระบุว่ามาจากหน่วยงานไหน"),to_type:u().nullable().required("กรุณาระบุว่าจะส่งหนังสือไปหน่วยงานไหน"),to_id:u().nullable().required("กรุณาระบุว่าจะส่งหนังสือไปหน่วยงานไหน"),subject:u().required("กรุณากรอกเรื่อง").nullable(),attn:u().required("กรุณากรอกเรียน").nullable(),detail:u().required("กรุณากรอกรายละเอียด").nullable(),document_objective_id:u().required("กรุณากรอกวัตถุประสงค์").nullable(),document_format:u().required("กรุณากรอกรูปแบบหนังสือ").nullable(),urgency_level:u().required("กรุณากรอกชั้นความเร่งด่วน").nullable(),secrecy_level:u().required("กรุณากรอกชั้นความลับ").nullable(),have_generate_document:u().nullable(),create_qr_code:u().nullable(),follow_up_document:u().nullable(),follow_up_document_date:u().nullable()}),st=Re().shape({receiving_format:u().required("กรุณาเลือกรูปแบบการรับ").nullable(),action_detail:u().required("กรุณากรอกรายละเอียดการปฏิบัติ").nullable(),have_initial_number:u().required("การลงทะเบียนรับ").nullable(),detail_receive:u().nullable(),subject_receive:u().nullable()}),gl=Re().shape({book_pdf_government:u().nullable().required("กรุณากรอกส่วนราชการ"),book_pdf_number:u().nullable().required("กรุณากรอกเลขที่"),book_pdf_date:u().nullable().required("กรุณากรอกวันที่"),book_pdf_detail:u().nullable().required("กรุณากรอกรายละเอียด")});const{handleSubmit:xl,resetForm:tr}=Ss({validationSchema:fl}),{value:$,errorMessage:hl}=p("document_flow_id"),{value:ee,errorMessage:yl}=p("book_type"),{value:te,errorMessage:kl}=p("document_type"),{value:Ce,errorMessage:Ml}=p("year"),{value:Ee,errorMessage:wl}=p("document_number"),{value:Be,errorMessage:Vl}=p("document_date"),{value:ze,errorMessage:Sl}=p("from_type"),{value:ie,errorMessage:Fl}=p("from_id"),{value:je,errorMessage:Cl}=p("to_type"),{value:Oe,errorMessage:zl}=p("to_id"),{value:ne,errorMessage:jl}=p("subject"),{value:de,errorMessage:Ol}=p("attn"),{value:De,errorMessage:Dl}=p("detail"),{value:Ne,errorMessage:Il}=p("document_objective_id"),{value:Ae,errorMessage:Ll}=p("document_format"),{value:Pe,errorMessage:Tl}=p("urgency_level"),{value:He,errorMessage:Yl}=p("secrecy_level"),{value:re,errorMessage:Ul}=p("have_generate_document"),{value:Je,errorMessage:Rl}=p("create_qr_code"),{value:oe,errorMessage:ql}=p("follow_up_document"),{value:Ie,errorMessage:or}=p("follow_up_document_date"),{value:Ge,errorMessage:El}=p("receiving_format"),{value:ce,errorMessage:Bl}=p("action_detail"),{value:Ke,errorMessage:Nl}=p("have_initial_number"),{value:Qe,errorMessage:Al}=p("detail_receive"),{value:We,errorMessage:Pl}=p("subject_receive"),{value:_e,errorMessage:Hl}=p("book_pdf_number"),{value:Le,errorMessage:Jl}=p("book_pdf_government"),{value:Te,errorMessage:Gl}=p("book_pdf_date"),{value:ue,errorMessage:Kl}=p("book_pdf_detail");Cs(async()=>{var i,d,h,x,me,pe,be,n,S,J,E,Ye,le,at,it,nt,dt,rt,ct,_t,ut,vt,mt,pt,bt,ft,gt,xt,ht,yt,kt,Mt,wt,Vt,St,Ft,Ct,zt,jt,Ot,Dt,It,Lt,Tt,Yt,Ut,Rt,qt,Et,Bt,Nt,At,Pt,Ht,Jt,Gt,Kt,Qt,Wt,Xt,Zt,$t,eo,to,oo,lo,so,ao,io,no,ro,co,_o,uo,vo,mo,po,bo,fo,go,xo,ho,yo,ko,Mo,wo,Vo,So,Fo,Co,zo,jo,Oo,Do,Io,Lo,To,Yo,Uo,Ro,qo,Eo,Bo,No,Ao,Po,Ho,Jo,Go,Ko,Qo,Wo,Xo,Zo,$o,el,tl,ol,ll,sl,al,il,nl,dl,rl,cl,_l,ul;if(console.log("router.currentRoute.value.params.id",R.currentRoute.value.params.id),R.currentRoute.value.params.id){const{data:a,status:Ze}=await xe("documentStore","edit",{payload:R.currentRoute.value.params.id});Ze===200&&(console.log("data",a),console.log("data.result?.sarabun_role_list",(i=a.result)==null?void 0:i.sarabun_role_list),O.value=(d=a.result)==null?void 0:d.document_flow_receive_list.map(_=>({..._,label:_.flow_name,value:_.id})),he.value=(x=(h=a.result.permission)==null?void 0:h.sarabun_role)==null?void 0:x.can_attach_file,t.value=(pe=(me=a.result.permission)==null?void 0:me.sarabun_role)==null?void 0:pe.can_scan_file,Ve.value=(n=(be=a.result)==null?void 0:be.data)==null?void 0:n.document_type,K.value=(S=a.result)==null?void 0:S.document_list,H.value=(J=a.result)==null?void 0:J.user_list,se.value=(E=a.result)==null?void 0:E.outside_organization,Q.value=(Ye=a.result)==null?void 0:Ye.inside_organization,X.value=(le=a.result)==null?void 0:le.document_objective_list.map(_=>({label:_.name,value:_.id})),F.value=(it=(at=a.result)==null?void 0:at.data)==null?void 0:it.receive_organization_id,$.value=(dt=(nt=a.result)==null?void 0:nt.data)==null?void 0:dt.document_flow_id,ee.value=(ct=(rt=a.result)==null?void 0:rt.data)==null?void 0:ct.book_type,te.value=(ut=(_t=a.result)==null?void 0:_t.data)==null?void 0:ut.document_type,Ce.value=(mt=(vt=a.result)==null?void 0:vt.data)!=null&&mt.year?(bt=(pt=a.result)==null?void 0:pt.data)==null?void 0:bt.year:U().locale("th").add(543,"year").format("YYYY"),Ee.value=(gt=(ft=a.result)==null?void 0:ft.data)==null?void 0:gt.document_number,Be.value=(ht=(xt=a.result)==null?void 0:xt.data)==null?void 0:ht.document_date,ze.value=(kt=(yt=a.result)==null?void 0:yt.data)==null?void 0:kt.from_type,ie.value=(wt=(Mt=a.result)==null?void 0:Mt.data)==null?void 0:wt.from_id,W.value=((St=(Vt=a.result)==null?void 0:Vt.data)==null?void 0:St.book_type)=="outside"?(zt=(Ct=(Ft=a.result)==null?void 0:Ft.data)==null?void 0:Ct.from_data)==null?void 0:zt.name:(Dt=(Ot=(jt=a.result)==null?void 0:jt.data)==null?void 0:Ot.from_data)==null?void 0:Dt.organization_name,je.value=(Lt=(It=a.result)==null?void 0:It.data)==null?void 0:Lt.to_type,Oe.value=(Yt=(Tt=a.result)==null?void 0:Tt.data)==null?void 0:Yt.to_id,ae.value={full_name:(qt=(Rt=(Ut=a.result)==null?void 0:Ut.data)==null?void 0:Rt.to_data)==null?void 0:qt.full_name,organization_name:(At=(Nt=(Bt=(Et=a.result)==null?void 0:Et.data)==null?void 0:Bt.to_data)==null?void 0:Nt.organization)==null?void 0:At.organization_name},ne.value=(Ht=(Pt=a.result)==null?void 0:Pt.data)==null?void 0:Ht.subject,de.value=(Gt=(Jt=a.result)==null?void 0:Jt.data)==null?void 0:Gt.attn,De.value=(Qt=(Kt=a.result)==null?void 0:Kt.data)==null?void 0:Qt.detail,Ne.value=(Xt=(Wt=a.result)==null?void 0:Wt.data)==null?void 0:Xt.document_objective_id,Ae.value=($t=(Zt=a.result)==null?void 0:Zt.data)==null?void 0:$t.document_format,Pe.value=(to=(eo=a.result)==null?void 0:eo.data)==null?void 0:to.urgency_level,He.value=(lo=(oo=a.result)==null?void 0:oo.data)==null?void 0:lo.secrecy_level,l.value=(ao=(so=a.result)==null?void 0:so.data)==null?void 0:ao.ref_document,re.value=(no=(io=a.result)==null?void 0:io.data)==null?void 0:no.have_generate_document,Je.value=(co=(ro=a.result)==null?void 0:ro.data)==null?void 0:co.create_qr_code,oe.value=(uo=(_o=a.result)==null?void 0:_o.data)==null?void 0:uo.follow_up_document,Ie.value=(mo=(vo=a.result)==null?void 0:vo.data)==null?void 0:mo.follow_up_date,we.value=(bo=(po=a.result)==null?void 0:po.data)==null?void 0:bo.email_receive,Me.value=(go=(fo=a.result)==null?void 0:fo.data)==null?void 0:go.organization_receive,Qe.value=(ho=(xo=a.result)==null?void 0:xo.data)==null?void 0:ho.detail_receive,We.value=(ko=(yo=a.result)==null?void 0:yo.data)==null?void 0:ko.subject_receive,f.value=(wo=(Mo=a.result)==null?void 0:Mo.data)==null?void 0:wo.document_attachments.map(_=>({name:_.file_name,size:_.file_size,date_input:U(_.created_at).locale("th").add(543,"year").format("DD MMM YYYY HH:mm")})),m.value=(So=(Vo=a.result)==null?void 0:Vo.data)==null?void 0:So.document_attachments.map(_=>({id:_.id,name:_.file_name,size:_.file_size,date_input:U(_.created_at).locale("th").add(543,"year").format("DD MMM YYYY HH:mm")})),(Co=(Fo=a.result)==null?void 0:Fo.data)!=null&&Co.document_stamps&&((jo=(zo=a.result)==null?void 0:zo.data)==null?void 0:jo.document_stamps.length)>0&&(console.log("data.result?.data?.document_stamps.length ",(Do=(Oo=a.result)==null?void 0:Oo.data)==null?void 0:Do.document_stamps),g.value=(Lo=(Io=a.result)==null?void 0:Io.data)==null?void 0:Lo.document_stamps.map(_=>({id:_.id,name:_.file_name,size:_.file_size,date_input:U(_.created_at).locale("th").add(543,"year").format("DD MMM YYYY HH:mm")})),q.value=(Yo=(To=a.result)==null?void 0:To.data)==null?void 0:Yo.document_stamps.map(_=>({id:_.id,name:_.file_name,size:_.file_size,date_input:U(_.created_at).locale("th").add(543,"year").format("DD MMM YYYY HH:mm")}))),Ge.value=(Ro=(Uo=a.result)==null?void 0:Uo.data)==null?void 0:Ro.receiving_format,ce.value=(Eo=(qo=a.result)==null?void 0:qo.data)==null?void 0:Eo.action_detail,Ke.value=(No=(Bo=a.result)==null?void 0:Bo.data)==null?void 0:No.have_initial_number,Le.value=(Po=(Ao=a.result)==null?void 0:Ao.data)==null?void 0:Po.book_pdf_government,_e.value=(Jo=(Ho=a.result)==null?void 0:Ho.data)!=null&&Jo.book_pdf_number?(Ko=(Go=a.result)==null?void 0:Go.data)==null?void 0:Ko.book_pdf_number:(Wo=(Qo=Xe.value)==null?void 0:Qo.organization)==null?void 0:Wo.organization_code,Te.value=(Zo=(Xo=a.result)==null?void 0:Xo.data)==null?void 0:Zo.book_pdf_date,ue.value=(el=($o=a.result)==null?void 0:$o.data)==null?void 0:el.book_pdf_detail)}else{const{data:a,status:Ze}=await xe("documentStore","create");Ze===200&&(Ce.value=U().locale("th").add(543,"year").format("YYYY"),console.log("data",a),O.value=(tl=a.result)==null?void 0:tl.document_flow_receive_list.map(_=>({..._,label:_.flow_name,value:_.id})),he.value=(ll=(ol=a.result.permission)==null?void 0:ol.sarabun_role)==null?void 0:ll.can_attach_file,t.value=(al=(sl=a.result.permission)==null?void 0:sl.sarabun_role)==null?void 0:al.can_scan_file,_e.value=((nl=(il=Xe.value)==null?void 0:il.organization)==null?void 0:nl.organization_code)??"",K.value=(dl=a.result)==null?void 0:dl.document_list,H.value=(rl=a.result)==null?void 0:rl.user_list,se.value=(cl=a.result)==null?void 0:cl.outside_organization,Q.value=(_l=a.result)==null?void 0:_l.inside_organization,X.value=(ul=a.result)==null?void 0:ul.document_objective_list.map(_=>({label:_.name,value:_.id})))}});const Ql=z(()=>Is),Wl=z(()=>Ls),Xl=z(()=>Ts),Zl=z(()=>Ys),$l=z(()=>Us),es=z(()=>Rs),ts=z(()=>qs),os=z(()=>Es),Xe=z(()=>Os().userInfo);Ue($,(i,d)=>{if(D.value=M.value,i){W.value="",ie.value="",console.log("document_flow_id",$.value);const h=O.value.find(x=>x.id===$.value);h&&(console.log("document_flow.doc_type",h),ee.value=h.doc_type,h.secret_level!=="ปกติ"?(console.log("secret_level",h.secret_level),D.value=D.value.filter(x=>x.label!=="ปกติ")):D.value=D.value.filter(x=>x.label=="ปกติ"))}else if(ee.value="",F.value&&te.value=="หนังสือรับจากอีเมล")return te.value}),Ue(oe,(i,d)=>{console.log("follow_up_document",oe.value),oe.value||(Ie.value="")}),Ue(De,(i,d)=>{ue.value=i}),Ue(re,(i,d)=>{C.value=N.value,re.value===!1&&(C.value=C.value.filter(h=>h.id!=3),console.log("steps",C))});const ls=i=>i?U(i).locale("th").add(543,"year").format("DD/MM/YYYY hh:m"):"-",ss=i=>i?U(i).locale("th").add(543,"year").format("DD/MM/YYYY"):"-",as=xl(async()=>{var h,x,me,pe,be;let i=C.value.length;console.log("totalSteps",i);const d=Z.value===i-1;if(console.log("isLastStep",d),d){Z.value=i-1;let n=new FormData;if(n.append("document_flow_id",$.value),n.append("book_type",ee.value),n.append("document_type",te.value),n.append("year",Ce.value),n.append("document_number",Ee.value),n.append("document_date",Be.value),n.append("from_type",ze.value),n.append("from_id",ie.value),n.append("to_type",je.value),n.append("to_id",Oe.value),n.append("subject",ne.value),n.append("attn",de.value),n.append("detail",De.value),n.append("document_objective_id",Ne.value),n.append("document_format",Ae.value),n.append("urgency_level",Pe.value),n.append("secrecy_level",He.value),n.append("ref_document",JSON.stringify(l.value.map(S=>({ref_document_id:S.id})))),n.append("have_generate_document",re.value),n.append("create_qr_code",Je.value),n.append("follow_up_document",oe.value),n.append("follow_up_document_date",Ie.value),L.value.forEach(S=>{n.append("file",S.file)}),A.value.forEach(S=>{n.append("document_stamps",S.file)}),n.append("receiving_format",Ge.value),n.append("action_detail",ce.value),n.append("have_initial_number",Ke.value),n.append("organization_receive",Me.value),n.append("email_receive",we.value),n.append("subject_receive",We.value),n.append("detail_receive",Qe.value),n.append("book_pdf_government",Le.value),n.append("book_pdf_number",_e.value),n.append("book_pdf_date",Te.value),n.append("book_pdf_subject",ne.value),n.append("book_pdf_attn",de.value),n.append("book_pdf_detail",ue.value),R.currentRoute.value.params.id){const S=m.value.length>0?m.value.map(le=>le.id):[];console.log("doc_att_ids",S),n.append("document_attachments",JSON.stringify(S));const J=q.value.length>0?q.value.map(le=>le.id):[];console.log("doc_stamp_att_ids",J),n.append("document_stamps_ids",JSON.stringify(J));const{data:E,status:Ye}=await xe("documentStore","update",{payload:{id:R.currentRoute.value.params.id,data:n}});Ye===200?(console.log("success",E),((h=E.result)==null?void 0:h.is_duplicate_case)==!1?te.value=="หนังสือรับจากอีเมล"?(P.isReceiveMail=!0,I.value=E.result,Se.value=(x=E.result)==null?void 0:x.id):(P.isSuccess=!0,Se.value=(me=E.result)==null?void 0:me.id):(y.value=E.result,P.isDuplicateCase=!0)):console.log("error")}else{const{data:S,status:J}=await xe("documentStore","store",{payload:n});J===200?((pe=S.result)==null?void 0:pe.is_duplicate_case)==!1?(console.log("success",S),P.isSuccess=!0,Se.value=(be=S.result)==null?void 0:be.id):(y.value=S.result,P.isDuplicateCase=!0):console.log("error")}}else Z.value++}),is=()=>{Z.value--},ve=(i,d)=>{P[i]=d,console.log(":c")};return{fileErrorMessage:j,isFileSizeError:o,afterScanStampComplete:i=>{let d=new Date;G.value=!1,console.log(i),ot.includes(i.type)&&Fe.value*1024*1024>=i.size?(A.value.push({file:i,date_input:d}),g.value.push({name:i.name,size:i.size,date_input:d})):(o.value=!0,j.value="ชนิดของไฟล์ไม่อนู่ในรายการที่อนุญาต")},afterScanComplete:i=>{let d=new Date;G.value=!1,ot.includes(i.type)&&Fe.value*1024*1024>=i.size?(L.value.push({file:i,date_input:d}),f.value.push({name:i.name,size:i.size,date_input:d})):(o.value=!0,j.value="ชนิดของไฟล์ไม่อนู่ในรายการที่อนุญาต")},pdfModal:G,pdfModalStamp:et,duplicateList:y,acceptList:tt,GeneralStore:bl,actionList:I,checkReceiveOrgId:F,document_flow_id:$,document_flow_id_error:hl,book_type:ee,book_type_error:yl,document_type:te,document_type_error:kl,year:Ce,year_error:Ml,document_number:Ee,document_number_error:wl,document_date:Be,document_date_error:Vl,from_type:ze,from_type_error:Sl,from_id:ie,from_id_error:Fl,to_type:je,to_type_error:Cl,to_id:Oe,to_id_error:zl,subject:ne,subject_error:jl,attn:de,attn_error:Ol,detail:De,detail_error:Dl,document_objective_id:Ne,document_objective_id_error:Il,document_format:Ae,document_format_error:Ll,urgency_level:Pe,urgency_level_error:Tl,secrecy_level:He,secrecy_level_error:Yl,files:L,ref_document:l,have_generate_document:re,have_generate_document_error:Ul,create_qr_code:Je,create_qr_code_error:Rl,follow_up_document:oe,follow_up_document_error:ql,follow_up_document_date:Ie,receiving_format:Ge,receiving_format_error:El,action_detail:ce,action_detail_error:Bl,have_initial_number:Ke,have_initial_number_error:Nl,detail_receive:Qe,detail_receive_error:Al,subject_receive:We,subject_receive_error:Pl,organization_receive:Me,email_receive:we,book_pdf_government:Le,book_pdf_government_error:Jl,book_pdf_number:_e,book_pdf_number_error:Hl,book_pdf_date:Te,book_pdf_date_error:Gl,book_pdf_detail:ue,book_pdf_detail_error:Kl,steps:C,stepNumber:Z,isModal:P,outside_organization:se,inside_organization:Q,organization_name_from:W,user_item:ae,user_list:H,fileInput:ye,stampFileInput:ke,previewFile:f,previewStampFiles:g,stampFiles:A,document_attachments:m,document_stamps:q,book_ref_list:K,document_objective_list:X,have_initial_number_list:pl,pdfPath:qe,documentStatus:Ve,modalId:Se,checkUploadFile:he,checkScanFile:t,document_flow_list:O,objectiveOptions:Ql,bookTypeOptions:Wl,speedLevelOptions:Xl,secretLevelOptionDefault:M,secretLevelOptions:D,bookFormatOptions:Zl,documentTypeOptions:$l,createOptions:es,followOptions:ts,receiveTypeOptions:os,userInfo:Xe,formatDateTime:ls,formatDate:ss,submit:as,prev:is,openModalAction:ve,setFromTo:(i,d)=>{var h;if(console.log("type",i),console.log("data",d),i=="from_type")ze.value=ee.value=="inside"?"organizations":"outside_organization",ie.value=d.id,W.value=d.lv1_name==null?d.name:d.name+" ("+d.lv1_name+")",we.value=d.email,Me.value=d.name,ve("isModalFromOut",!1),ve("isModalFromIn",!1);else{je.value="users",Oe.value=d.id;const x={full_name:d.full_name,organization_name:(h=d.organization)==null?void 0:h.organization_name};ae.value=x,ve("isModalTo",!1)}},setBookRef:i=>{console.log("data setBookRef",i),l.value=i.map(d=>({id:d.id,subject:d.subject})),ve("isModalBookRef",!1)},removeDocRef:i=>{l.value.splice(i,1)},uploadFile:async i=>{let d=new Date,h=U(d).locale("th").add(543,"year").format("DD MMM YYYY HH:mm"),x=i.target.files[0];x&&Fe.value*1024*1024>=x.size?(L.value.push({file:x,date_input:h}),f.value.push({name:x.name,size:x.size,date_input:h}),i.target.value=""):(o.value=!0,j.value="ขนาดของไฟล์ไม่อนู่ในรายการที่อนุญาต",i.target.value="")},removeFile:i=>{f.value.splice(i,1),L.value.splice(i,1),R.currentRoute.value.params.id&&m.value.splice(i,1)},handleUploadFile:()=>{ye.value.click()},uploadStampFile:async i=>{let d=new Date,h=U(d).locale("th").add(543,"year").format("DD MMM YYYY HH:mm"),x=i.target.files[0];x&&Fe.value*1024*1024>=x.size?(A.value.push({file:x,date_input:h}),g.value.push({name:x.name,size:x.size,date_input:h}),i.target.value=""):(o.value=!0,j.value="ขนาดของไฟล์ไม่อนู่ในรายการที่อนุญาต",i.target.value="")},removeStampFile:i=>{console.log("index",i),g.value.splice(i,1),A.value.splice(i,1),R.currentRoute.value.params.id&&q.value.splice(i,1),console.log("previewStampFiles",g.value),console.log("stampFiles",A.value),console.log("document_stamps",q.value)},handleUploadStampFile:()=>{ke.value.click()},setActionDetail:i=>{ce.value=(ce.value??"")+i.label},previewPDF:async()=>{const i={book_pdf_government:Le.value,book_pdf_number:_e.value,book_pdf_date:Te.value,book_pdf_subject:ne.value,book_pdf_attn:de.value,book_pdf_detail:ue.value},{data:d,status:h}=await xe("documentStore","previewPDF",{payload:i});h===200?(console.log("data",d),qe.value=d.result,P.isShowDialogPdf=!0):console.log("error")}}},mounted(){},methods:{}},Js=e("div",{class:"mb-6"},"แบบฟอร์มบันทึกหนังสือรับ",-1),Gs={class:"conten-box mt-14 border-t border-slate-100 dark:border-slate-700 -mx-6 px-6 pt-6"},Ks={key:0},Qs={class:"list list-odd space-y-1 px-12"},Ws={class:"py-4 flex p-3 gap-4"},Xs=e("div",{class:"pt-3 text-end basis-1/4"},[w(" เส้นทางหนังสือ "),e("span",{class:"text-red-600"},"*")],-1),Zs={class:"basis-2/4"},$s={class:"py-4 flex p-3 gap-4"},ea=e("div",{class:"text-end basis-1/4"},[w(" ประเภทหนังสือ "),e("span",{class:"text-red-600"},"*")],-1),ta={class:"basis-2/4"},oa={class:"flex gap-5"},la={key:0,class:"py-4 flex p-3 gap-4"},sa=e("div",{class:"text-end basis-1/4"},[w(" ประเภทเอกสาร "),e("span",{class:"text-red-600"},"*")],-1),aa={class:"basis-2/4"},ia={class:"flex gap-5"},na={key:1},da={key:0,class:"py-4 flex p-3 gap-4"},ra=e("div",{class:"text-end basis-1/4"},[w(" ประเภทเอกสาร "),e("span",{class:"text-red-600"},"*")],-1),ca={class:"basis-2/4 flex gap-3"},_a={key:1,class:"py-4 flex p-3 gap-4"},ua=e("div",{class:"text-end basis-1/4"},[w(" ประเภทเอกสาร "),e("span",{class:"text-red-600"},"*")],-1),va={class:"basis-2/4 flex gap-3"},ma={class:"py-4 flex p-3 gap-4"},pa=e("div",{class:"text-end basis-1/4 pt-2"},"ปี",-1),ba={class:"basis-2/4 flex gap-5"},fa={class:"py-4 flex p-3 gap-4"},ga=e("div",{class:"text-end basis-1/4 pt-2"},[w(" เลขที่หนังสือ "),e("span",{class:"text-red-600"},"*")],-1),xa={class:"basis-2/4 flex gap-5"},ha={class:"py-4 flex p-3 gap-4"},ya=e("div",{class:"text-end basis-1/4 pt-2"},[w(" หนังสือลงวันที่ "),e("span",{class:"text-red-600"},"*")],-1),ka={class:"basis-2/4"},Ma={class:"py-4 flex p-3 gap-4"},wa=e("div",{class:"text-end basis-1/4 pt-2"},[w(" จาก "),e("span",{class:"text-red-600"},"*")],-1),Va={class:"basis-2/4"},Sa={class:"mt-2"},Fa={class:"py-4 flex p-3 gap-4"},Ca=e("div",{class:"text-end basis-1/4 pt-2"},[w(" ถึง "),e("span",{class:"text-red-600"},"*")],-1),za={class:"basis-2/4"},ja={class:"mt-2"},Oa={class:"text-md ell-1"},Da={class:"text-sm ell-1 text-gray-500"},Ia={class:"py-4 flex p-3 gap-4"},La=e("div",{class:"text-end basis-1/4 pt-2"},[w(" เรื่อง "),e("span",{class:"text-red-600"},"*")],-1),Ta={class:"basis-2/4"},Ya={class:"py-4 flex p-3 gap-4"},Ua=e("div",{class:"text-end basis-1/4 pt-2"},[w(" เรียน "),e("span",{class:"text-red-600"},"*")],-1),Ra={class:"basis-2/4"},qa={class:"py-4 flex p-3 gap-4"},Ea=e("div",{class:"text-end basis-1/4 pt-2"},[w(" รายละเอียด/เนื้อหาสำคัญ "),e("span",{class:"text-red-600"},"*")],-1),Ba={class:"basis-2/4"},Na={class:"py-4 flex p-3 gap-4"},Aa=e("div",{class:"text-end basis-1/4 pt-2"},[w(" วัตถุประสงค์ "),e("span",{class:"text-red-600"},"*")],-1),Pa={class:"basis-2/4"},Ha={class:"py-4 flex p-3 gap-4"},Ja=e("div",{class:"text-end basis-1/4 pt-2"},[w(" รูปแบบหนังสือ "),e("span",{class:"text-red-600"},"*")],-1),Ga={class:"basis-2/4"},Ka={class:"py-4 flex p-3 gap-4"},Qa=e("div",{class:"text-end basis-1/4 pt-2"},[w(" ชั้นความเร็ว "),e("span",{class:"text-red-600"},"*")],-1),Wa={class:"basis-2/4"},Xa={class:"py-4 flex p-3 gap-4"},Za=e("div",{class:"text-end basis-1/4 pt-2"},[w(" ชั้นความลับ "),e("span",{class:"text-red-600"},"*")],-1),$a={class:"basis-2/4"},ei={class:"py-4 flex p-3 gap-4"},ti=e("div",{class:"text-end basis-1/4 pt-2"}," เอกสารเเนบประทับเลขรับ ",-1),oi={class:"basis-2/4"},li={class:"gap-3 flex"},si={class:"flex items-center justify-between"},ai={class:"shrink w-[20px]"},ii={class:"basis-full pl-4"},ni={class:"text-md ell-1"},di={class:"text-sm text-gray-500 flex items-center"},ri={class:"basis-1/2"},ci={class:"basis-1/2"},_i={class:"shrink w-[20px]"},ui={class:"py-4 flex p-3 gap-4"},vi=e("div",{class:"text-end basis-1/4 pt-2"},"เอกสารแนบ",-1),mi={class:"basis-2/4"},pi={class:"gap-3 flex"},bi=["accept"],fi={class:"flex items-center justify-between"},gi={class:"shrink w-[20px]"},xi={class:"basis-full pl-4"},hi={class:"text-md ell-1"},yi={class:"text-sm text-gray-500 flex items-center"},ki={class:"basis-1/2"},Mi={class:"basis-1/2"},wi={class:"shrink w-[20px]"},Vi={class:"py-4 flex p-3 gap-4"},Si=e("div",{class:"text-end basis-1/4 pt-2"},"หนังสืออ้างอิง",-1),Fi={class:"basis-2/4"},Ci={class:"flex items-center justify-between"},zi={class:"shrink w-[20px]"},ji={class:"basis-full pl-4"},Oi={class:"text-md ell-1"},Di={class:"shrink w-[20px]"},Ii={class:"py-4 flex p-3 gap-4"},Li=e("div",{class:"text-end basis-1/4"},"ใบต่อบันทึก",-1),Ti={class:"basis-2/4 flex gap-5"},Yi={class:"py-4 flex p-3 gap-4"},Ui=e("div",{class:"text-end basis-1/4"},"QR Code เอกสารแนบ/อ้างอิง",-1),Ri={class:"basis-2/4 flex gap-5"},qi={class:"flex py-4 p-3 gap-4 items-center"},Ei=e("div",{class:"text-end basis-1/4"},"ติดตามหนังสือ",-1),Bi={class:"basis-2/4 flex gap-5 items-center"},Ni={class:"basis-2/4"},Ai={class:"basis-full"},Pi={class:"shrink w-[20px]"},Hi={key:1},Ji={class:"list list-odd space-y-1 px-12"},Gi={class:"py-4 flex gap-5"},Ki=e("div",{class:"text-end basis-1/6 font-semibold"},"รูปแบบการรับ",-1),Qi={class:"basis-5/6"},Wi={class:"py-4 flex gap-5"},Xi=e("div",{class:"text-end basis-1/6 font-semibold"}," รายละเอียดการปฏิบัติ ",-1),Zi={class:"basis-5/6"},$i={class:"flex gap-5"},en={class:"basis-3/4"},tn={class:"basis-1/4"},on=e("div",{class:"mb-1"},"รูปแบบคำสั่งการ/คำเสนอ/การปฏิบัติ",-1),ln={class:"py-4 flex gap-5"},sn=e("div",{class:"text-end basis-1/6 font-semibold"}," การลงทะเบียนรับ ",-1),an={class:"basis-5/6"},nn={class:"flex items-center w-full"},dn={class:"mr-2"},rn={key:0,class:"list list-odd"},cn=e("div",null,null,-1),_n=e("div",{class:"py-4 font-semibold text-[16px]"}," แจ้งตอบรับกลับทางอีเมล ",-1),un={class:"py-4 flex gap-5"},vn=e("div",{class:"text-end basis-1/6 font-semibold"}," หน่วยงานผู้รับ ",-1),mn={class:"basis-5/6"},pn={class:"py-4 flex gap-5"},bn=e("div",{class:"text-end basis-1/6 font-semibold"}," อีเมลผู้รับ ",-1),fn={class:"basis-5/6"},gn={class:"py-4 flex gap-5 items-center"},xn=e("div",{class:"text-end basis-1/6 font-semibold"},"เรื่อง",-1),hn={class:"basis-5/6"},yn={class:"py-4 flex gap-5"},kn=e("div",{class:"text-end basis-1/6 font-semibold"},"รายละเอียด",-1),Mn={class:"basis-5/6"},wn=e("div",{class:"text-[13px] text-red-500 mt-1"}," ระบบจะเพิ่มเติมข้อมูลวันเวลารับ ,เลขรับ และชื่อหน่วยงานพร้อมที่ตั้งให้อัตโนมัติ ",-1),Vn={key:2},Sn={class:"flex justify-center"},Fn=e("div",{class:"py-4 flex items-end gap-5"},[e("div",{class:"text-end basis-1/2"},[e("div",{class:"w-24 h-24"},[e("img",{class:"w-full h-full object-cover",src:_s,alt:"garudaLogo"})])]),e("div",{class:"basis-1/2 text-4xl -ml-28"},"บันทึกข้อความ")],-1),Cn={class:"flex"},zn=e("div",{class:"pt-2 text-xl font-medium shrink w-[125px]"}," ส่วนราชการ ",-1),jn={class:"basis-full"},On={class:"flex mt-4"},Dn={class:"basis-1/2"},In={class:"flex"},Ln=e("div",{class:"pt-2 text-xl font-medium shrink w-[20px]"}," ที่ ",-1),Tn={class:"basis-full"},Yn={class:"basis-1/2"},Un={class:"flex"},Rn=e("div",{class:"pt-2 text-xl font-medium text-center shrink w-[70px]"}," วันที่ ",-1),qn={class:"basis-full"},En={class:"flex items-center border border-gray-400 bg-gray-50 rounded-md pr-2"},Bn={class:"basis-full"},Nn={class:"shrink w-[20px]"},An={class:"flex mt-4"},Pn=e("div",{class:"pt-2 text-xl font-medium shrink w-[45px]"}," เรื่อง ",-1),Hn={class:"basis-full"},Jn={class:"flex mt-4"},Gn=e("div",{class:"pt-2 text-xl font-medium shrink w-[50px]"}," เรียน ",-1),Kn={class:"basis-full"},Qn={class:"mt-4"},Wn={class:"flex justify-center mt-4 mb-12"},Xn=e("hr",{class:"my-5"},null,-1),Zn=["src"],$n={class:"h-[250px] flex items-center justify-center"},ed={class:"text-center flex flex-row flex-wrap justify-center"},td={class:"basis-full flex justify-center mb-5"},od=e("h4",{class:"text-lg text-slate-900"},[w(" บันทึกหนังสือรับ "),e("span",{class:"text-green-500"},"สำเร็จ")],-1),ld={class:"flex justify-center w-full gap-3"},sd={class:"space-y-3"},ad={class:"flex gap-3"},id=e("div",{class:"basis-1/3 text-end"},"เลขที่หนังสือ",-1),nd={class:"basis-2/3"},dd={class:"flex gap-3"},rd=e("div",{class:"basis-1/3 text-end"},"ลงวันที่",-1),cd={class:"basis-2/3"},_d={class:"flex gap-3"},ud=e("div",{class:"basis-1/3 text-end"},"วันที่/เวลารับ",-1),vd={class:"basis-2/3"},md={class:"flex gap-3"},pd=e("div",{class:"basis-1/3 text-end"},"เลขที่รับ",-1),bd={class:"basis-2/3"},fd={class:"space-y-3 mt-7"},gd=e("div",{class:"flex gap-3"},[e("div",{class:"basis-1/3 text-end"},"ตอบรับกลับทางอีเมล"),e("div",{class:"basis-2/3 text-green-500"},"สำเร็จ")],-1),xd={class:"flex gap-3"},hd=e("div",{class:"basis-1/3 text-end"},"หน่วยงานผู้รับ",-1),yd={class:"basis-2/3"},kd={class:"flex gap-3"},Md=e("div",{class:"basis-1/3 text-end"},"อีเมลผู้รับ",-1),wd={class:"basis-2/3"},Vd={class:"flex gap-3"},Sd=e("div",{class:"basis-1/3 text-end"},"เรื่อง",-1),Fd={class:"basis-2/3"},Cd={class:"flex gap-3"},zd=e("div",{class:"basis-1/3 text-end"},"รายละเอียด",-1),jd={class:"basis-2/3"},Od={class:"flex justify-center w-full gap-3"},Dd={class:"space-y-3"},Id={class:"flex gap-3"},Ld=e("div",{class:"basis-1/3 text-end"},"เลขที่หนังสือ",-1),Td={class:"basis-2/3 text-orange-600"},Yd={class:"flex gap-3"},Ud=e("div",{class:"basis-1/3 text-end"},"ลงวันที่",-1),Rd={class:"basis-2/3 text-orange-600"},qd={class:"flex gap-3"},Ed=e("div",{class:"basis-1/3 text-end"},"เรื่อง",-1),Bd={class:"basis-2/3 text-orange-600"},Nd={class:"flex gap-3"},Ad=e("div",{class:"basis-1/3 text-end"},"วันที่/เวลารับ",-1),Pd={class:"basis-2/3 text-orange-600"},Hd={class:"flex gap-3"},Jd=e("div",{class:"basis-1/3 text-end"},"เลขที่รับ",-1),Gd={class:"basis-2/3 text-orange-600"},Kd={class:"flex gap-3"},Qd=e("div",{class:"basis-1/3 text-end"},"ผู้รับ",-1),Wd={class:"basis-2/3 text-orange-600"},Xd=e("div",{class:"flex gap-3"},[e("div",{class:"basis-1/3 text-end"},"หมายเหตุ"),e("div",{class:"basis-2/3"},[e("div",{class:"text-orange-600"},v("ระบบจะใช้เลขรับเดิม")),e("div",{class:"text-orange-600"},v("และเชื่อมเป็นหนังสืออ้างอิง"))])],-1),Zd={class:"flex justify-center w-full gap-3"},$d={class:"text-lg text-slate-900"};function er(j,o,he,t,G,et){const R=k("Stepper"),C=k("vSelect"),N=k("VueSelect"),y=k("TextValid"),I=k("Radio"),F=k("Icon"),O=k("Textinput"),H=k("CFlatPickr"),M=k("Button"),D=k("Textarea"),K=k("ScannerModal"),se=k("editor"),Q=k("Card"),W=k("ModalOrganizeOut"),ae=k("ModalOrganizeIn"),ye=k("ModalOrganizeUser"),ke=k("ModalBookRef"),L=k("Modal"),A=k("ModalError");return c(),b("div",null,[s(Q,{noborder:""},{default:V(()=>{var m,q;return[Js,s(R,{steps:t.steps,stepNumber:t.stepNumber},null,8,["steps","stepNumber"]),e("div",Gs,[e("form",{onSubmit:o[43]||(o[43]=vl((...l)=>t.submit&&t.submit(...l),["prevent"]))},[t.stepNumber===0?(c(),b("div",Ks,[e("div",Qs,[e("div",Ws,[Xs,e("div",Zs,[s(N,{classInput:"input_color"},{default:V(()=>[s(C,{modelValue:t.document_flow_id,"onUpdate:modelValue":o[0]||(o[0]=l=>t.document_flow_id=l),label:"label",class:ge(["input_color border rounded bg-white",t.document_flow_id_error?"border-red-500":""]),reduce:l=>l.value,options:t.document_flow_list},null,8,["modelValue","class","reduce","options"])]),_:1}),s(y,{valid:t.document_flow_id_error},null,8,["valid"])])]),e("div",$s,[ea,e("div",ta,[e("div",oa,[(c(!0),b(T,null,Y(t.bookTypeOptions,(l,f)=>(c(),b("div",{key:f},[s(I,{label:l.label,modelValue:t.book_type,"onUpdate:modelValue":o[1]||(o[1]=g=>t.book_type=g),value:l.value,disabled:""},null,8,["label","modelValue","value"])]))),128))]),s(y,{valid:t.book_type_error},null,8,["valid"])])]),t.checkReceiveOrgId?(c(),b("div",na,[t.document_type=="หนังสือรับจากอีเมล"?(c(),b("div",da,[ra,e("div",ca,[s(F,{icon:"mdi:email",class:"handle text-[25px] text-orange-500"}),w(" "+v("หนังสือรับจากอีเมล"))])])):(c(),b("div",_a,[ua,e("div",va,v("เอกสารทั่วไป (ส่งฉบับจริง)"),1)]))])):(c(),b("div",la,[sa,e("div",aa,[e("div",ia,[(c(!0),b(T,null,Y(t.documentTypeOptions,(l,f)=>(c(),b("div",{key:f},[s(I,{label:l.label,class:"mb-5",modelValue:t.document_type,"onUpdate:modelValue":o[2]||(o[2]=g=>t.document_type=g),value:l.label},null,8,["label","modelValue","value"])]))),128))]),s(y,{valid:t.document_type_error},null,8,["valid"])])])),e("div",ma,[pa,e("div",ba,[s(O,{classInput:"border border-gray-300 ",disabled:"",modelValue:t.year,"onUpdate:modelValue":o[3]||(o[3]=l=>t.year=l)},null,8,["modelValue"])])]),e("div",fa,[ga,e("div",xa,[s(O,{type:"text",classInput:"border border-gray-300 bg-white",placeholder:"",modelValue:t.document_number,"onUpdate:modelValue":o[4]||(o[4]=l=>t.document_number=l),error:t.document_number_error,disabled:!!(t.checkReceiveOrgId&&t.document_type!="หนังสือรับจากอีเมล")},null,8,["modelValue","error","disabled"])])]),e("div",ha,[ya,e("div",ka,[s(H,{value:t.document_date,onOnChange:o[5]||(o[5]=l=>t.document_date=l),class:ge(["form-control",t.document_date_error?"border-red-500":""]),placeholder:"yyyy, dd M"},null,8,["value","class"]),s(y,{valid:t.document_date_error},null,8,["valid"])])]),e("div",Ma,[wa,e("div",Va,[s(M,{icon:"heroicons-outline:search",text:"เลือกหน่วยงาน",btnClass:"btn-primary rounded-md",onClick:o[6]||(o[6]=l=>t.book_type=="inside"?t.openModalAction("isModalFromIn",!0):t.openModalAction("isModalFromOut",!0))}),s(y,{valid:t.from_id_error},null,8,["valid"]),e("div",Sa,v(t.organization_name_from),1)])]),e("div",Fa,[Ca,e("div",za,[s(M,{icon:"heroicons-outline:search",text:"เลือกหน่วยงาน",btnClass:"btn-primary rounded-md",onClick:o[7]||(o[7]=l=>t.openModalAction("isModalTo",!0))}),s(y,{valid:t.to_id_error},null,8,["valid"]),e("div",ja,[e("div",Oa,v((m=t.user_item)==null?void 0:m.full_name),1),e("div",Da,v((q=t.user_item)==null?void 0:q.organization_name),1)])])]),e("div",Ia,[La,e("div",Ta,[s(D,{placeholder:"",classInput:"border border-gray-400 text_area_bg",modelValue:t.subject,"onUpdate:modelValue":o[8]||(o[8]=l=>t.subject=l),error:t.subject_error},null,8,["modelValue","error"])])]),e("div",Ya,[Ua,e("div",Ra,[s(O,{type:"text",classInput:"border border-gray-300 bg-white",placeholder:"",modelValue:t.attn,"onUpdate:modelValue":o[9]||(o[9]=l=>t.attn=l),error:t.attn_error},null,8,["modelValue","error"])])]),e("div",qa,[Ea,e("div",Ba,[s(D,{placeholder:"",classInput:"border border-gray-400 text_area_bg",rows:10,modelValue:t.detail,"onUpdate:modelValue":o[10]||(o[10]=l=>t.detail=l),error:t.detail_error},null,8,["modelValue","error"])])]),e("div",Na,[Aa,e("div",Pa,[s(N,{classInput:"input_color"},{default:V(()=>[s(C,{modelValue:t.document_objective_id,"onUpdate:modelValue":o[11]||(o[11]=l=>t.document_objective_id=l),label:"label",class:"input_color border rounded",reduce:l=>l.value,options:t.document_objective_list},null,8,["modelValue","reduce","options"])]),_:1}),s(y,{valid:t.document_objective_id_error},null,8,["valid"])])]),e("div",Ha,[Ja,e("div",Ga,[s(N,{classInput:"input_color"},{default:V(()=>[s(C,{modelValue:t.document_format,"onUpdate:modelValue":o[12]||(o[12]=l=>t.document_format=l),label:"label",class:"input_color border rounded bg-white",reduce:l=>l.label,options:t.bookFormatOptions},null,8,["modelValue","reduce","options"])]),_:1}),s(y,{valid:t.document_format_error},null,8,["valid"])])]),e("div",Ka,[Qa,e("div",Wa,[s(N,{classInput:"input_color"},{default:V(()=>[s(C,{modelValue:t.urgency_level,"onUpdate:modelValue":o[13]||(o[13]=l=>t.urgency_level=l),label:"label",class:"input_color border rounded",reduce:l=>l.label,options:t.speedLevelOptions},null,8,["modelValue","reduce","options"])]),_:1}),s(y,{valid:t.urgency_level_error},null,8,["valid"])])]),e("div",Xa,[Za,e("div",$a,[s(N,{classInput:"input_color"},{default:V(()=>[s(C,{modelValue:t.secrecy_level,"onUpdate:modelValue":o[14]||(o[14]=l=>t.secrecy_level=l),label:"label",class:"input_color border rounded bg-white",reduce:l=>l.label,options:t.secretLevelOptions},null,8,["modelValue","reduce","options"])]),_:1}),s(y,{valid:t.secrecy_level_error},null,8,["valid"])])]),e("div",ei,[ti,e("div",oi,[e("div",li,[e("input",{type:"file",class:"hidden",ref:"stampFileInput",accept:"application/pdf",onChange:o[15]||(o[15]=(...l)=>t.uploadStampFile&&t.uploadStampFile(...l))},null,544),s(M,{isDisabled:!t.checkUploadFile,icon:"ic:baseline-cloud-upload",text:"อัปโหลดจากคอมพิวเตอร์",btnClass:"btn-primary rounded-md",onClick:o[16]||(o[16]=l=>t.handleUploadStampFile())},null,8,["isDisabled"]),s(M,{isDisabled:!t.checkScanFile,icon:"material-symbols:scanner",text:"สแกนเอกสาร",btnClass:"btn-primary rounded-md",onClick:o[17]||(o[17]=l=>t.pdfModalStamp=!0)},null,8,["isDisabled"])]),s(K,{"active-modal":t.pdfModalStamp,onOnClose:o[18]||(o[18]=l=>t.pdfModalStamp=!1),onOnFinish:t.afterScanStampComplete},null,8,["active-modal","onOnFinish"]),(c(!0),b(T,null,Y(t.previewStampFiles,(l,f)=>(c(),b("div",{class:"mt-2 border rounded border-gray-200 bg-gray-50 px-3 py-2",key:f},[e("div",si,[e("div",ai,[s(F,{icon:"ant-design:file-pdf-filled",class:"text-red-500 text-2xl cursor-pointer"})]),e("div",ii,[e("div",ni,v(l==null?void 0:l.name),1),e("div",di,[e("div",ri,v(l==null?void 0:l.size)+" KB",1),e("div",ci," วันที่นำเข้า : "+v(l.date_input),1)])]),e("div",_i,[s(F,{onClick:g=>t.removeStampFile(f),icon:"mdi:trash",class:"text-red-500 text-2xl cursor-pointer"},null,8,["onClick"])])])]))),128))])]),e("div",ui,[vi,e("div",mi,[e("div",pi,[e("input",{type:"file",class:"hidden",ref:"fileInput",accept:t.acceptList,onChange:o[19]||(o[19]=(...l)=>t.uploadFile&&t.uploadFile(...l))},null,40,bi),s(M,{isDisabled:!t.checkUploadFile,icon:"ic:baseline-cloud-upload",text:"อัปโหลดจากคอมพิวเตอร์",btnClass:"btn-primary rounded-md",onClick:o[20]||(o[20]=l=>t.handleUploadFile())},null,8,["isDisabled"]),s(M,{isDisabled:!t.checkScanFile,icon:"material-symbols:scanner",text:"สแกนเอกสาร",btnClass:"btn-primary rounded-md",onClick:o[21]||(o[21]=l=>t.pdfModal=!0)},null,8,["isDisabled"])]),s(K,{"active-modal":t.pdfModal,onOnClose:o[22]||(o[22]=l=>t.pdfModal=!1),onOnFinish:t.afterScanComplete},null,8,["active-modal","onOnFinish"]),(c(!0),b(T,null,Y(t.previewFile,(l,f)=>(c(),b("div",{class:"mt-2 border rounded border-gray-200 bg-gray-50 px-3 py-2",key:f},[e("div",fi,[e("div",gi,[s(F,{icon:"ant-design:file-pdf-filled",class:"text-red-500 text-2xl cursor-pointer"})]),e("div",xi,[e("div",hi,v(l==null?void 0:l.name),1),e("div",yi,[e("div",ki,v(l==null?void 0:l.size)+" KB",1),e("div",Mi," วันที่นำเข้า : "+v(l.date_input),1)])]),e("div",wi,[s(F,{onClick:g=>t.removeFile(f),icon:"mdi:trash",class:"text-red-500 text-2xl cursor-pointer"},null,8,["onClick"])])])]))),128))])]),e("div",Vi,[Si,e("div",Fi,[s(M,{icon:"tdesign:link-1",text:"หนังสืออ้างอิง",btnClass:"btn-primary rounded-md",onClick:o[23]||(o[23]=l=>t.openModalAction("isModalBookRef",!0))}),(c(!0),b(T,null,Y(t.ref_document,(l,f)=>{var g,X;return c(),b("div",{class:"mt-2 border rounded border-gray-200 bg-gray-50 px-3 py-2",key:f},[e("div",Ci,[e("div",zi,[s(F,{icon:"ant-design:file-word-filled",class:"text-blue-500 text-3xl cursor-pointer"})]),e("div",ji,[e("div",Oi,v((g=l==null?void 0:l.document)!=null&&g.subject?(X=l==null?void 0:l.document)==null?void 0:X.subject:l==null?void 0:l.subject),1)]),e("div",Di,[s(F,{onClick:qe=>t.removeDocRef(f),icon:"mdi:trash",class:"text-red-500 text-2xl cursor-pointer"},null,8,["onClick"])])])])}),128))])]),e("div",Ii,[Li,e("div",Ti,[(c(!0),b(T,null,Y(t.createOptions,(l,f)=>(c(),b("div",{key:f},[s(I,{label:l.label,modelValue:t.have_generate_document,"onUpdate:modelValue":o[24]||(o[24]=g=>t.have_generate_document=g),value:l.value},null,8,["label","modelValue","value"])]))),128))])]),e("div",Yi,[Ui,e("div",Ri,[(c(!0),b(T,null,Y(t.createOptions,(l,f)=>(c(),b("div",{key:f},[s(I,{label:l.label,modelValue:t.create_qr_code,"onUpdate:modelValue":o[25]||(o[25]=g=>t.create_qr_code=g),value:l.value},null,8,["label","modelValue","value"])]))),128))])]),e("div",qi,[Ei,e("div",Bi,[(c(!0),b(T,null,Y(t.followOptions,(l,f)=>(c(),b("div",{class:"basis-1/4",key:f},[s(I,{label:l.label,class:"mb-5",modelValue:t.follow_up_document,"onUpdate:modelValue":o[26]||(o[26]=g=>t.follow_up_document=g),value:l.value},null,8,["label","modelValue","value"])]))),128)),e("div",Ni,[e("div",{class:ge(["flex items-center border rounded-md pr-2",t.follow_up_document?"":"bg-gray-100"])},[e("div",Ai,[s(H,{modelValue:t.follow_up_document_date,"onUpdate:modelValue":o[27]||(o[27]=l=>t.follow_up_document_date=l),onOnChange:o[28]||(o[28]=l=>t.follow_up_document_date=l),disabled:!t.follow_up_document,class:"form-control border-0 focus:ring-0"},null,8,["modelValue","disabled"])]),e("div",Pi,[s(F,{class:"text-2xl",icon:"ant-design:calendar-outlined"})])],2)])])])])])):B("",!0),t.stepNumber===1?(c(),b("div",Hi,[e("div",Ji,[e("div",Gi,[Ki,e("div",Qi,[(c(!0),b(T,null,Y(t.receiveTypeOptions,(l,f)=>(c(),b("div",{key:f},[s(I,{label:l.label,modelValue:t.receiving_format,"onUpdate:modelValue":o[29]||(o[29]=g=>t.receiving_format=g),value:l.label},null,8,["label","modelValue","value"])]))),128)),s(y,{valid:t.receiving_format_error},null,8,["valid"])])]),e("div",Wi,[Xi,e("div",Zi,[e("div",$i,[e("div",en,[s(D,{placeholder:"",rows:7,name:"detail",modelValue:t.action_detail,"onUpdate:modelValue":o[30]||(o[30]=l=>t.action_detail=l),classInput:"border border-gray-400 text_area_bg"},null,8,["modelValue"]),s(y,{valid:t.action_detail_error},null,8,["valid"])]),e("div",tn,[on,s(N,{classInput:"input_color"},{default:V(()=>[s(C,{label:"label",class:ge(["input_color border rounded bg-white",t.document_flow_id_error?"border-red-500":""]),reduce:l=>l.value,options:t.document_objective_list,"onOption:selected":t.setActionDetail},null,8,["class","reduce","options","onOption:selected"])]),_:1})])])])]),e("div",ln,[sn,e("div",an,[(c(!0),b(T,null,Y(t.have_initial_number_list,(l,f)=>(c(),b("div",{key:f,class:"mb-3"},[s(I,{modelValue:t.have_initial_number,"onUpdate:modelValue":o[31]||(o[31]=g=>t.have_initial_number=g),value:l.value},{default:V(()=>[e("div",nn,[e("div",dn,v(l.label),1)])]),_:2},1032,["modelValue","value"])]))),128)),s(y,{valid:t.have_initial_number_error},null,8,["valid"])])]),t.documentStatus==="หนังสือรับจากอีเมล"?(c(),b("div",rn,[cn,_n,e("div",un,[vn,e("div",mn,v(t.organization_receive),1)]),e("div",pn,[bn,e("div",fn,v(t.email_receive),1)]),e("div",gn,[xn,e("div",hn,[s(D,{placeholder:"",rows:7,classInput:"border border-gray-400 text_area_bg",modelValue:t.subject_receive,"onUpdate:modelValue":o[32]||(o[32]=l=>t.subject_receive=l),error:t.subject_receive_error},null,8,["modelValue","error"])])]),e("div",yn,[kn,e("div",Mn,[s(D,{placeholder:"",rows:7,classInput:"border border-gray-400 text_area_bg",modelValue:t.detail_receive,"onUpdate:modelValue":o[33]||(o[33]=l=>t.detail_receive=l),error:t.detail_receive_error},null,8,["modelValue","error"]),wn])])])):B("",!0)])])):B("",!0),t.stepNumber===2?(c(),b("div",Vn,[e("div",Sn,[s(Q,{className:"w-[80%] border-2 rounded-none px-20 pb-28"},{default:V(()=>[Fn,e("div",Cn,[zn,e("div",jn,[s(O,{type:"text",classInput:"border border-gray-400 bg-gray-50",placeholder:"",modelValue:t.book_pdf_government,"onUpdate:modelValue":o[34]||(o[34]=l=>t.book_pdf_government=l),error:t.book_pdf_government_error},null,8,["modelValue","error"])])]),e("div",On,[e("div",Dn,[e("div",In,[Ln,e("div",Tn,[s(O,{type:"text",classInput:"border border-gray-400 bg-gray-50",placeholder:"",modelValue:t.book_pdf_number,"onUpdate:modelValue":o[35]||(o[35]=l=>t.book_pdf_number=l),disabled:""},null,8,["modelValue"])])])]),e("div",Yn,[e("div",Un,[Rn,e("div",qn,[e("div",En,[e("div",Bn,[s(H,{modelValue:t.book_pdf_date,"onUpdate:modelValue":o[36]||(o[36]=l=>t.book_pdf_date=l),onOnChange:o[37]||(o[37]=l=>t.book_pdf_date=l),class:"form-control border-0 focus:ring-0"},null,8,["modelValue"])]),e("div",Nn,[s(F,{class:"text-2xl",icon:"ant-design:calendar-outlined"})])]),s(y,{valid:t.book_pdf_date_error},null,8,["valid"])])])])]),e("div",An,[Pn,e("div",Hn,[s(O,{type:"text",classInput:"border border-gray-400 bg-gray-50",placeholder:"",modelValue:t.subject,"onUpdate:modelValue":o[38]||(o[38]=l=>t.subject=l),disabled:""},null,8,["modelValue"])])]),e("div",Jn,[Gn,e("div",Kn,[s(O,{type:"text",classInput:"border border-gray-400 bg-gray-50",placeholder:"",modelValue:t.attn,"onUpdate:modelValue":o[39]||(o[39]=l=>t.attn=l),disabled:""},null,8,["modelValue"])])]),e("div",Qn,[s(se,{class:"h-[600px]","api-key":"tvq48l6368vn3ems7hzoks5k23rxu2wharjh39g0zgyn9dl2",init:{plugins:G.plugins,toolbar:G.toolbar},modelValue:t.book_pdf_detail,"onUpdate:modelValue":o[40]||(o[40]=l=>t.book_pdf_detail=l)},null,8,["init","modelValue"]),s(y,{valid:t.book_pdf_detail_error},null,8,["valid"])])]),_:1})]),e("div",Wn,[s(M,{onClick:o[41]||(o[41]=l=>t.previewPDF()),text:" แสดงตัวอย่าง",btnClass:"btn-primary"})])])):B("",!0),Xn,e("div",{class:ge(t.stepNumber>0?"flex justify-between":" text-right")},[t.stepNumber!==0?(c(),fe(M,{key:0,onClick:o[42]||(o[42]=vl(l=>t.prev(),["prevent"])),text:"ย้อนกลับ",btnClass:"btn-outline-dark"})):B("",!0),s(M,{type:"submit",text:t.stepNumber!==t.steps.length-1?"ถัดไป":"บันทึกและส่ง",btnClass:"btn-primary"},null,8,["text"])],2)],32)])]}),_:1}),s(W,{title:"เลือกหน่วยงาน",items:t.outside_organization,isOpen:t.isModal.isModalFromOut,modalId:t.from_id,"onEvent:submit":o[44]||(o[44]=m=>t.setFromTo("from_type",m)),"onEvent:close":o[45]||(o[45]=m=>t.openModalAction("isModalFromOut",!1))},null,8,["items","isOpen","modalId"]),s(ae,{title:"เลือกหน่วยงาน",items:t.inside_organization,isOpen:t.isModal.isModalFromIn,"onEvent:submit":o[46]||(o[46]=m=>t.setFromTo("from_type",m)),"onEvent:close":o[47]||(o[47]=m=>t.openModalAction("isModalFromIn",!1))},null,8,["items","isOpen"]),s(ye,{title:"เลือกบุคคล",tabIndex:1,items:t.user_list,modalId:t.to_id,isOpen:t.isModal.isModalTo,"onEvent:submit":o[48]||(o[48]=m=>t.setFromTo("to_type",m)),"onEvent:close":o[49]||(o[49]=m=>t.openModalAction("isModalTo",!1))},null,8,["items","modalId","isOpen"]),s(ke,{title:"ค้นหาหนังสืออ้างถึง",items:t.book_ref_list,isOpen:t.isModal.isModalBookRef,"onEvent:submit":t.setBookRef,"onEvent:close":o[50]||(o[50]=m=>t.openModalAction("isModalBookRef",!1))},null,8,["items","isOpen","onEvent:submit"]),t.isModal.isShowDialogPdf?(c(),fe(L,{key:0,title:"ดูรายละเอียดเอกสาร",labelClass:"btn-outline-dark",sizeClass:"w-3/4",label:"",centered:"",activeModal:t.isModal.isShowDialogPdf,"onEvent:closeModal":o[51]||(o[51]=m=>t.openModalAction("isShowDialogPdf",!1))},{default:V(()=>[e("div",null,[e("iframe",{class:"w-full h-[1000px] mt-4",src:"data:application/pdf;base64, "+t.pdfPath,frameborder:"0"},null,8,Zn)])]),_:1},8,["activeModal"])):B("",!0),t.isModal.isSuccess?(c(),fe(L,{key:1,title:" ",labelClass:"btn-outline-dark",sizeClass:"w-full max-w-[700px]",label:"",centered:"",activeModal:t.isModal.isSuccess,"onEvent:closeModal":o[54]||(o[54]=m=>j.$router.push("/app/receive-list/wait-to-receive"))},{footer:V(()=>[e("div",ld,[s(M,{text:"ไปที่รายการรอรับ",btnClass:"btn-primary w-36",onClick:o[52]||(o[52]=m=>j.$router.push("/app/receive-list/wait-to-receive"))}),s(M,{text:"ปิด",btnClass:"bg-white border border-gray-500 w-36",onClick:o[53]||(o[53]=m=>j.$router.push("/app/receive-list/wait-to-receive/"+t.modalId))})])]),default:V(()=>[e("div",$n,[e("div",ed,[e("div",td,[s(F,{icon:"icon-park-solid:protect",class:"text-6xl text-green-500"})]),od])])]),_:1},8,["activeModal"])):B("",!0),t.isModal.isReceiveMail?(c(),fe(L,{key:2,title:"บันทึกหนังสือรับ",labelClass:"btn-outline-dark",sizeClass:"w-full max-w-[700px]",label:"",centered:"",activeModal:t.isModal.isReceiveMail,"onEvent:closeModal":o[57]||(o[57]=m=>t.isModal.isReceiveMail=!1)},{footer:V(()=>[e("div",Od,[s(M,{text:"รายละเอียดหนังสือ",btnClass:"bg-white border border-gray-500 w-36",onClick:o[55]||(o[55]=m=>j.$router.push("/app/receive-list/wait-to-receive/"+t.modalId))}),s(M,{text:"กลับไปหน้ารายการ",btnClass:"btn-primary w-36",onClick:o[56]||(o[56]=m=>j.$router.push("/app/receive-list/wait-to-receive"))})])]),default:V(()=>[e("div",sd,[e("div",ad,[id,e("div",nd,v(t.actionList.document_number),1)]),e("div",dd,[rd,e("div",cd,v(t.formatDate(t.actionList.document_date)),1)]),e("div",_d,[ud,e("div",vd,v(t.formatDateTime(t.actionList.created_at)),1)]),e("div",md,[pd,e("div",bd,v(t.actionList.initial_number_from?t.actionList.initial_number_from:"-"),1)])]),e("div",fd,[gd,e("div",xd,[hd,e("div",yd,v(t.actionList.organization_receive),1)]),e("div",kd,[Md,e("div",wd,v(t.actionList.email_receive),1)]),e("div",Vd,[Sd,e("div",Fd,v(t.actionList.subject_receive),1)]),e("div",Cd,[zd,e("div",jd,v(t.actionList.detail_receive),1)])])]),_:1},8,["activeModal"])):B("",!0),t.isModal.isDuplicateCase?(c(),fe(L,{key:3,title:"การแจ้งเตือน",themeClass:"orange-danger",sizeClass:"w-full max-w-[700px]",label:"",centered:"",activeModal:t.isModal.isDuplicateCase,"onEvent:closeModal":o[59]||(o[59]=m=>t.isModal.isDuplicateCase=!1)},{footer:V(()=>[e("div",Zd,[s(M,{text:"ดำเนินการต่อ",btnClass:"btn-primary w-36",onClick:o[58]||(o[58]=m=>j.$router.push("/app/receive-list/wait-to-receive"))})])]),default:V(()=>{var m;return[e("div",Dd,[e("div",Id,[Ld,e("div",Td,v(t.duplicateList.document_number),1)]),e("div",Yd,[Ud,e("div",Rd,v(t.formatDate(t.duplicateList.document_date)),1)]),e("div",qd,[Ed,e("div",Bd,v(t.duplicateList.subject),1)]),e("div",Nd,[Ad,e("div",Pd,v(t.formatDateTime(t.duplicateList.created_at)),1)]),e("div",Hd,[Jd,e("div",Gd,v(t.duplicateList.initial_number_from?t.duplicateList.initial_number_from:"-"),1)]),e("div",Kd,[Qd,e("div",Wd,v((m=t.duplicateList.to_data)==null?void 0:m.full_name),1)]),Xd])]}),_:1},8,["activeModal"])):B("",!0),s(A,{title:"",isOpen:t.isFileSizeError,"onEvent:closeModal":o[60]||(o[60]=m=>t.isFileSizeError=!1)},{default:V(()=>[e("div",$d,v(t.fileErrorMessage),1)]),_:1},8,["isOpen"])])}const oc=zs(Hs,[["render",er]]);export{oc as default};
