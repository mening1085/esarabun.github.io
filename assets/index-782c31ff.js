import{B as Button}from"./index-441935dc.js";import{C as Card}from"./index-263882d1.js";import{I as Icon}from"./index-72ee420c.js";import{P as Pagination}from"./index-bb139ada.js";import{L as Loading}from"./Todo-3470ab94.js";import{T as Tooltip}from"./index-9078ba5b.js";import{D as Dropdown,S as Se}from"./index-090a8953.js";import{I as InputGroup}from"./index-a60d9262.js";import{C as ConfirmDelete}from"./user-ffb7e3c2.js";import{V as VueSelect,C as Ce}from"./VueSelect-4c8519b3.js";import{S as Switch}from"./index-a15147cf.js";import{M as Modal}from"./Modal-19eb68c4.js";import{T as Textinput}from"./index-31d1a8ca.js";import{C as ChangeStatus}from"./index-559355a7.js";import{M as ModalSuccess}from"./index-7dc8252b.js";import{A as Avatar}from"./index-2bf9679a.js";import{_ as _export_sfc,a as apiFire,t as urlSarabun}from"./index-e058a960.js";import{al as onMounted,aA as ref,aF as resolveComponent,as as openBlock,o as createElementBlock,p as createBaseVNode,x as createVNode,aT as toDisplayString,F as Fragment,aD as renderList,aw as pushScopeId,at as popScopeId,be as watch,bj as withCtx,n as createCommentVNode,m as createBlock,c as Transition,w as createTextVNode,ac as normalizeClass}from"./preload-helper-9e0646ca.js";import{M as ModalOrganize}from"./index-0fe0dceb.js";import{d as dayjs}from"./dayjs.min-72c81edc.js";import{C as Checkbox}from"./index-8994827d.js";import{e as entry_esm}from"./vue3-tree-vue.esm-b89ac387.js";import{T as Textarea}from"./index-ce9a51c5.js";import{R as Radio}from"./index-3069c0b6.js";import{F as FromGroup}from"./index-6c8c0d73.js";import{F as Footer,W as Width,T as Theme}from"./Theme-5f88bfd6.js";import{S as Select}from"./index-7e9b1d19.js";import"./iconify-4e42c13d.js";import"./dom-891ac6c3.js";import"./focus-management-e6c5d1fd.js";import"./open-closed-486d85f0.js";import"./use-resolve-button-type-38f1f99a.js";import"./use-outside-click-a758fdce.js";import"./vue-cleave.min-9e1201c2.js";import"./transition-39b574f4.js";import"./hidden-11a9ab9d.js";import"./micro-task-89dcd6af.js";import"./index-1b218db3.js";import"./ck-white-7280cd79.js";const detail_vue_vue_type_style_index_0_scoped_dc005515_lang="",_sfc_main$5={components:{Button,Dropdown,Icon,Tooltip,Avatar},props:{items:{default:""}},setup(a,{emit:t}){onMounted(async()=>{c(a.items)});const n=urlSarabun,e=ref([]),m=ref({}),_=ref(""),l=()=>{t("onCloseDetailOutput",!1)},h=()=>{t("onMoveToOrg",!0,a.items)},i=()=>{t("onMoveToTrash",!0,a.items)},r=()=>{t("onMoveToReceive",!0,a.items)},p=s=>{if(s){const g=new Date(s),u=g.getDate().toString().padStart(2,"0"),o=(g.getMonth()+1).toString().padStart(2,"0"),v=g.getFullYear(),V=g.getHours().toString().padStart(2,"0"),y=g.getMinutes().toString().padStart(2,"0");return`${u}/${o}/${v} ${V}:${y}`}else return null},c=async s=>{var o,v,V,y,N;const{data:g,status:u}=await apiFire("inboxMailStore","show",{payload:s});u==200&&(console.log("data",g),m.value=(o=g.result)==null?void 0:o.data,console.log(m.value),_.value=(V=(v=g.result)==null?void 0:v.data)==null?void 0:V.detail,e.value=(N=(y=g.result)==null?void 0:y.data)==null?void 0:N.attachments)};return{closeDetailOutput:l,formatDate:p,moveToOrg:h,moveToTrash:i,moveToReceive:r,htmlContent:_,getDetail:c,redirectToSrc:s=>{window.location.href=urlSarabun+"/"+s},sarabunUrl:n,emailDetail:m,fileList:e,convertNewlineToBr:s=>s.replace(/\n/g,"<br>")}}},_withScopeId$1=a=>(pushScopeId("data-v-dc005515"),a=a(),popScopeId(),a),_hoisted_1$5={class:"absolute left-0 top-0 w-full h-full bg-white dark:bg-slate-800 z-[55] rounded-md p-6 overflow-y-auto"},_hoisted_2$5={class:"flex items-center border-b border-slate-100 dark:border-slate-700 -mx-6 pb-6 mb-6 px-6"},_hoisted_3$5={class:"flex pr-2"},_hoisted_4$5={class:"flex pr-2"},_hoisted_5$5={class:"text-lg font-medium text-slate-600 dark:text-slate-300"},_hoisted_6$5={class:"flex space-x-3 pt-4 pb-6 items-start rtl:space-x-reverse"},_hoisted_7$5={class:"flex-none"},_hoisted_8$5={class:"h-8 w-8 rounded-full text-white"},_hoisted_9$5={class:"flex-1"},_hoisted_10$5={class:"text-sm text-slate-600 dark:text-slate-300 font-medium leading-4"},_hoisted_11$4={class:"relative -top-1 text-gray-400 mt-2 text-sm"},_hoisted_12$4={class:"text-sm text-slate-600 dark:text-slate-300 font-normal"},_hoisted_13$4=["innerHTML"],_hoisted_14$4=_withScopeId$1(()=>createBaseVNode("hr",{class:"mt-5 border mb-5"},null,-1)),_hoisted_15$4=["href"],_hoisted_16$4={class:"flex gap-3 items-center border bg-gray-100 p-3 my-3 rounded w-[30%] cursor-pointer"},_hoisted_17$4={class:"ell-1"};function _sfc_render$5(a,t,n,e,m,_){const l=resolveComponent("Icon"),h=resolveComponent("Button"),i=resolveComponent("Avatar");return openBlock(),createElementBlock("div",_hoisted_1$5,[createBaseVNode("div",_hoisted_2$5,[createBaseVNode("div",_hoisted_3$5,[createBaseVNode("div",{class:"email-icon",onClick:t[0]||(t[0]=(...r)=>e.closeDetailOutput&&e.closeDetailOutput(...r))},[createVNode(l,{icon:"heroicons-outline:arrow-left"})])]),createBaseVNode("div",null,[createBaseVNode("div",_hoisted_4$5,[createBaseVNode("div",{class:"trash-icon",onClick:t[1]||(t[1]=(...r)=>e.moveToTrash&&e.moveToTrash(...r))},[createVNode(l,{icon:"fa6-solid:trash-can"})])])]),createBaseVNode("div",null,[createVNode(h,{text:"ส่งต่อไปยังหน่วยงาน",btnClass:"btn-primary text-white w-50 h-8 items-center",icon:"mdi:bank",onClick:e.moveToOrg},null,8,["onClick"])]),createBaseVNode("div",null,[createVNode(h,{text:"ไปยังหนังสือรับ",btnClass:"btn-primary text-white w-70 h-8 ml-4 items-center",icon:"mdi:check",onClick:e.moveToReceive},null,8,["onClick"])])]),createBaseVNode("div",null,[createBaseVNode("div",_hoisted_5$5,toDisplayString(e.emailDetail.subject),1),createBaseVNode("div",_hoisted_6$5,[createBaseVNode("div",_hoisted_7$5,[createBaseVNode("div",_hoisted_8$5,[createVNode(i,{image:"profile-1"})])]),createBaseVNode("div",_hoisted_9$5,[createBaseVNode("span",_hoisted_10$5,toDisplayString(e.emailDetail.from),1),createBaseVNode("div",_hoisted_11$4,toDisplayString(e.formatDate(e.emailDetail.created_at)),1)])]),createBaseVNode("div",_hoisted_12$4,[createBaseVNode("div",{innerHTML:e.convertNewlineToBr(e.htmlContent)},null,8,_hoisted_13$4)]),_hoisted_14$4,createBaseVNode("div",null,[createBaseVNode("div",null,toDisplayString(e.fileList.length+" ไฟล์แนบ"),1),(openBlock(!0),createElementBlock(Fragment,null,renderList(e.fileList,(r,p)=>(openBlock(),createElementBlock("div",{key:p},[createBaseVNode("a",{href:e.sarabunUrl+"/"+r.path,target:"_blank"},[createBaseVNode("div",_hoisted_16$4,[createVNode(l,{icon:"ant-design:file-pdf-filled",class:"text-red-500 pr-1"}),createBaseVNode("div",_hoisted_17$4,toDisplayString(r==null?void 0:r.name),1)])],8,_hoisted_15$4)]))),128))])])])}const inputDetail=_export_sfc(_sfc_main$5,[["render",_sfc_render$5],["__scopeId","data-v-dc005515"]]),index_vue_vue_type_style_index_0_lang$3="",_sfc_main$4={components:{Tooltip,Pagination,InputGroup,Dropdown,Icon,Button,Card,MenuItem:Se,VueSelect,vSelect:Ce,Switch,Modal,Textinput,ConfirmDelete,ChangeStatus,ModalSuccess,inputDetail,ModalOrganize},setup(){const emailList=ref([]),columns=ref([{label:"",field:"title",width:"80%"},{label:"",field:"date",width:"20%"}]),manageLists=ref([{id:1,label:"ส่งต่อให้หน่วยงาน",icon:"mdi:bank",fnName:"sendToOrg"},{id:2,label:"ย้ายไปยังหนังสือรับ",icon:"heroicons:check",fnName:"moveToReceiveBook"},{id:3,label:"ย้ายไปถังขยะ",icon:"heroicons-outline:trash",fnName:"moveToTrash"}]),sarabunUrl=urlSarabun,email=ref(""),keyword=ref(""),emailId=ref(""),selectedIds=ref([]),inboxList=ref([]),paginate={total:1,current:1,perpage:10,pageRange:5},searchTerm=ref(""),headerDialog=ref(""),headersuccess=ref(""),isShowSucceess=ref(!1),isShowDialogOrganize=ref(!1),onSwitch=ref(!1),detailList=ref({}),organization_id=ref(null),organizeList=ref([]),convertDateTime=a=>a?dayjs(a).locale("th").add(543,"year").format("DD/MM/YYYY HH:mm"):"-",formatDate=a=>{if(a){const t=new Date(a),n=t.getDate().toString().padStart(2,"0"),e=(t.getMonth()+1).toString().padStart(2,"0"),m=t.getFullYear(),_=t.getHours().toString().padStart(2,"0"),l=t.getMinutes().toString().padStart(2,"0");return`${n}/${e}/${m} ${_}:${l}`}else returfilter};watch(email,async a=>{getData(1)}),onMounted(async()=>{getData(1)});const getData=async a=>{var e,m,_,l,h,i,r,p;const{data:t,status:n}=await apiFire("inboxMailStore","get",{payload:{page:a,keyword:keyword.value,email:email.value}});n==200&&(console.log("data",t),emailList.value=(e=t==null?void 0:t.result)==null?void 0:e.organization_email_list,inboxList.value=(m=t==null?void 0:t.result)==null?void 0:m.data,paginate.total=((_=t==null?void 0:t.result)==null?void 0:_.total_page)*((l=t==null?void 0:t.result)==null?void 0:l.per_page),paginate.current=(h=t==null?void 0:t.result)==null?void 0:h.current_page,paginate.perpage=(i=t==null?void 0:t.result)==null?void 0:i.per_page,(p=(r=t==null?void 0:t.result)==null?void 0:r.organization_list)==null||p.map(c=>{organizeList.value.push(c)}))},changePage=async a=>{paginate.current=a,await getData(a)},handleSelectedRowsChange=a=>{selectedIds.value=a.selectedRows.map(t=>({id:t.id})),console.log("Selected IDs:",selectedIds.value)},refresh=async()=>{const{data:a,status:t}=await apiFire("inboxMailStore","refresh");t==200&&location.reload()},redirectToSrc=a=>{window.location.href=urlSarabun+a},onDetail=a=>{console.log("val",a),onSwitch.value=!0,detailList.value=a.id},onCloseDetail=a=>{onSwitch.value=a},sendToOrg=()=>{console.log("1"),isShowDialogOrganize.value=!0},moveToReceiveBook=async()=>{if(console.log("2"),selectedIds.value.length!=0){let a={id:selectedIds.value.map(e=>({id:e.id}))};headerDialog.value="ย้ายไปยังหนังสือรับ",headersuccess.value="ย้ายไปยังหนังสือรับ";const{data:t,status:n}=await apiFire("inboxMailStore","moveToRecive",{payload:a});n==200?(isShowSucceess.value=!0,getData(1)):alert("error")}},moveToTrash=async()=>{if(selectedIds.value.length!=0){let a=selectedIds.value.map(e=>e.id);headerDialog.value="ย้ายไปถังขยะ",headersuccess.value="ย้ายไปถังขยะ";const{data:t,status:n}=await apiFire("inboxMailStore","moveToTrash",{payload:a});n==200?(isShowSucceess.value=!0,getData(1)):alert("error")}},fnHandler=item=>{console.log(item.fnName),eval(item.fnName+"()")},onClosemodal=()=>{isShowDialogOrganize.value=!1,emailId.value=""},onSelectedItem=a=>{console.log("onSelectedItem",a),a.have_sub_organization&&(organization_id.value=a.id,console.log(organization_id.value))},onSelectedOrg=async()=>{if(console.log("check EmailId",emailId.value),selectedIds.value.length!=0||emailId.value!="")if(emailId.value!=""){console.log("1");let a={id:[{id:emailId.value}],organization_id:organization_id.value};headerDialog.value="ส่งหนังสือต่อให้หน่วยงาน",headersuccess.value="ส่งหนังสือต่อให้หน่วยงาน";const{data:t,status:n}=await apiFire("inboxMailStore","moveToOrg",{payload:a});n==200?(isShowDialogOrganize.value=!1,isShowSucceess.value=!0,organization_id.value="",emailId.value="",getData(1)):(emailId.value="",alert("error"))}else{console.log("2");let a={organization_id:organization_id.value,id:selectedIds.value.map(e=>({id:e.id}))};headerDialog.value="ส่งหนังสือต่อให้หน่วยงาน",headersuccess.value="ส่งหนังสือต่อให้หน่วยงาน";const{data:t,status:n}=await apiFire("inboxMailStore","moveToOrg",{payload:a});n==200?(isShowDialogOrganize.value=!1,isShowSucceess.value=!0,organization_id.value="",getData(1)):alert("error")}},onAccept=()=>{isShowSucceess.value=!1},openModalOrg=(a,t)=>{console.log("openModalOrg",a),isShowDialogOrganize.value=a,console.log("openModalOrg"),onSwitch.value=!1,emailId.value=t,console.log("end",emailId.value)},openModalMoveToTrash=async(a,t)=>{if(t!=null){let n=[t];headerDialog.value="ย้ายไปถังขยะ",headersuccess.value="ย้ายไปถังขยะ";const{data:e,status:m}=await apiFire("inboxMailStore","moveToTrash",{payload:n});m==200?(isShowSucceess.value=a,onSwitch.value=!1,getData(1)):alert("error")}},openModalMoveToReceive=async(a,t)=>{if(t!=null){let n={id:[{id:t}]};headerDialog.value="ย้ายไปยังหนังสือรับ",headersuccess.value="ย้ายไปยังหนังสือรับ";const{data:e,status:m}=await apiFire("inboxMailStore","moveToRecive",{payload:n});m==200?(isShowSucceess.value=a,onSwitch.value=!1,getData(1)):alert("error")}};return{formatDate,convertDateTime,sarabunUrl,redirectToSrc,onDetail,onSwitch,onCloseDetail,detailList,moveToTrash,moveToReceiveBook,sendToOrg,fnHandler,isShowDialogOrganize,onClosemodal,organization_id,organizeList,onSelectedItem,openModalOrg,onAccept,headerDialog,headersuccess,isShowSucceess,openModalMoveToTrash,openModalMoveToReceive,getData,searchTerm,paginate,inboxList,changePage,refresh,handleSelectedRowsChange,selectedIds,onSelectedOrg,emailId,emailList,columns,manageLists,email,keyword}}},_hoisted_1$4={class:"mt-5 px-5 inputView"},_hoisted_2$4={class:"flex justify-between pb-6 items-center"},_hoisted_3$4={class:"basis-2/5"},_hoisted_4$4={class:"flex items-center"},_hoisted_5$4={class:"flex gap-3 basis-3/5"},_hoisted_6$4={class:"basis-full"},_hoisted_7$4={class:"basis-full"},_hoisted_8$4={class:"no-scroll-x-table"},_hoisted_9$4=createBaseVNode("div",{class:"text-center"},[createBaseVNode("div",{class:"text-gray-400"},"ไม่พบข้อมูล")],-1),_hoisted_10$4={style:{"white-space":"nowrap","font-size":"16px","font-weight":"600"}},_hoisted_11$3={key:0},_hoisted_12$3={class:"md:flex items-center md:space-x-6 rtl:space-x-reverse"},_hoisted_13$3=createBaseVNode("div",{class:"flex-none"},null,-1),_hoisted_14$3=["onClick"],_hoisted_15$3={class:"text-gray-400 ell-1 max-w-[700px]"},_hoisted_16$3={key:0,class:"flex space-x-4"},_hoisted_17$3=["href"],_hoisted_18$3={class:"flex items-center bg-gray-100 border rounded-md px-2 h-[24px] cursor-pointer"},_hoisted_19$3={class:"ell-1"},_hoisted_20$3={key:1,class:"w-[120px]"},_hoisted_21$2={class:"py-4 px-3"},_hoisted_22$2={class:"h-36 flex items-center justify-center"},_hoisted_23$2={class:"text-center flex flex-row flex-wrap justify-center"},_hoisted_24$2={class:"basis-full flex justify-center mb-5"},_hoisted_25$2={class:"text-lg text-slate-900"},_hoisted_26$2=createBaseVNode("span",{class:"text-green-500"},"สำเร็จ",-1),_hoisted_27$2={class:"flex justify-center w-full"};function _sfc_render$4(a,t,n,e,m,_){const l=resolveComponent("Icon"),h=resolveComponent("Button"),i=resolveComponent("Dropdown"),r=resolveComponent("vSelect"),p=resolveComponent("VueSelect"),c=resolveComponent("InputGroup"),w=resolveComponent("Pagination"),x=resolveComponent("vue-good-table"),s=resolveComponent("inputDetail"),g=resolveComponent("ModalOrganize"),u=resolveComponent("Modal");return openBlock(),createElementBlock("div",_hoisted_1$4,[createBaseVNode("div",_hoisted_2$4,[createBaseVNode("div",_hoisted_3$4,[createVNode(i,{classMenuItems:"left-0  w-[200px] top-[110%] ",items:e.manageLists,onOnClickItem:e.fnHandler},{default:withCtx(()=>[createVNode(h,{btnClass:"btn-primary",iconClass:"text-lg"},{default:withCtx(()=>[createBaseVNode("div",_hoisted_4$4,[createVNode(l,{icon:"heroicons:check",class:"handle text-[20px]"}),createBaseVNode("span",null,toDisplayString("ดำเนินการ ("+e.selectedIds.length+")"),1),createVNode(l,{icon:"heroicons-outline:chevron-down",class:"handle text-[20px]"})])]),_:1})]),_:1},8,["items","onOnClickItem"])]),createBaseVNode("div",_hoisted_5$4,[createBaseVNode("div",null,[createVNode(h,{class:"w-3 h-[40px] flex items-center",icon:"mdi:refresh",onClick:t[0]||(t[0]=o=>e.refresh())})]),createBaseVNode("div",_hoisted_6$4,[createVNode(p,{classInput:"input_color"},{default:withCtx(()=>[createVNode(r,{modelValue:e.email,"onUpdate:modelValue":t[1]||(t[1]=o=>e.email=o),class:"input_color border rounded-md",label:"email",reduce:o=>o.email,options:e.emailList},null,8,["modelValue","reduce","options"])]),_:1})]),createBaseVNode("div",_hoisted_7$4,[createVNode(c,{modelValue:e.keyword,"onUpdate:modelValue":t[2]||(t[2]=o=>e.keyword=o),placeholder:"ค้นหา",classInputGroup:"border-gray-200",type:"text",prependIcon:"heroicons-outline:search",merged:"",inputEnter:"","onEvent:inputEnter":t[3]||(t[3]=o=>e.getData(1))},null,8,["modelValue"])])])]),createBaseVNode("div",_hoisted_8$4,[createVNode(x,{onSelectedRowsChange:e.handleSelectedRowsChange,columns:e.columns,styleClass:"vgt-table bordered",rows:e.inboxList,"pagination-options":{enabled:!0,perPage:e.paginate.perpage},"search-options":{enabled:!0,externalQuery:e.searchTerm},"select-options":{enabled:!0,selectOnCheckboxOnly:!0,selectioninfoClass:"custom-class",selectionText:"rows selected",clearSelectionText:"clear",disableSelectinfo:!0,selectAllByGroup:!0},"sort-options":{enabled:!1},"filter-options":{enabled:!1}},{emptystate:withCtx(()=>[_hoisted_9$4]),"table-column":withCtx(o=>[createBaseVNode("div",_hoisted_10$4,toDisplayString(o.column.label),1)]),"table-row":withCtx(o=>[o.column.field=="title"?(openBlock(),createElementBlock("div",_hoisted_11$3,[createBaseVNode("div",null,[createBaseVNode("div",_hoisted_12$3,[_hoisted_13$3,createBaseVNode("div",null,[createBaseVNode("div",{class:"hover:underline pointer",onClick:v=>e.onDetail(o.row)},toDisplayString(o.row.subject),9,_hoisted_14$3),createBaseVNode("div",_hoisted_15$3,toDisplayString(o.row.detail),1),o.row.attachments?(openBlock(),createElementBlock("div",_hoisted_16$3,[(openBlock(!0),createElementBlock(Fragment,null,renderList(o.row.attachments,v=>(openBlock(),createElementBlock("div",{key:v},[createBaseVNode("a",{href:e.sarabunUrl+"/"+v.path,target:"_blank"},[createBaseVNode("div",_hoisted_18$3,[createVNode(l,{icon:"ant-design:file-pdf-filled",class:"text-red-500 pr-1"}),createBaseVNode("div",_hoisted_19$3,toDisplayString(v==null?void 0:v.name),1)])],8,_hoisted_17$3)]))),128))])):createCommentVNode("",!0)])])])])):createCommentVNode("",!0),o.column.field=="date"?(openBlock(),createElementBlock("div",_hoisted_20$3,toDisplayString(e.convertDateTime(o.row.created_at)),1)):createCommentVNode("",!0)]),"pagination-bottom":withCtx(o=>[createBaseVNode("div",_hoisted_21$2,[createVNode(w,{total:e.paginate.total,current:e.paginate.current,"per-page":e.paginate.perpage,pageRange:e.paginate.pageRange,onPageChanged:t[4]||(t[4]=v=>e.changePage(v)),pageChanged:o.pageChanged,perPageChanged:o.perPageChanged,textAfterInput:"ไปที่หน้า",enableSearch:"",enableInput:""},null,8,["total","current","per-page","pageRange","pageChanged","perPageChanged"])])]),_:1},8,["onSelectedRowsChange","columns","rows","pagination-options","search-options"])]),createVNode(Transition,{name:"singleEmail",style:{"z-index":"9999"}},{default:withCtx(()=>[e.onSwitch?(openBlock(),createBlock(s,{key:0,items:e.detailList,onOnCloseDetailOutput:e.onCloseDetail,onOnMoveToOrg:e.openModalOrg,onOnMoveToTrash:e.openModalMoveToTrash,onOnMoveToReceive:e.openModalMoveToReceive},null,8,["items","onOnCloseDetailOutput","onOnMoveToOrg","onOnMoveToTrash","onOnMoveToReceive"])):createCommentVNode("",!0)]),_:1}),createVNode(g,{isShowDialogOrganize:e.isShowDialogOrganize,items:e.organizeList,value:e.organization_id,"onEvent:closeModal":t[5]||(t[5]=o=>e.onClosemodal()),"onEvent:acceptSelectOrganize":t[6]||(t[6]=o=>e.onSelectedOrg()),"onEvent:onSelectedItem":t[7]||(t[7]=o=>e.onSelectedItem(o))},null,8,["isShowDialogOrganize","items","value"]),e.isShowSucceess?(openBlock(),createBlock(u,{key:0,title:e.headerDialog,label:"",labelClass:"btn-outline-dark",centered:"",activeModal:e.isShowSucceess,"onEvent:closeModal":t[9]||(t[9]=o=>e.onAccept())},{footer:withCtx(()=>[createBaseVNode("div",_hoisted_27$2,[createVNode(h,{text:"ปิด",btnClass:"btn-primary w-36",onClick:t[8]||(t[8]=o=>e.onAccept())})])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_22$2,[createBaseVNode("div",_hoisted_23$2,[createBaseVNode("div",_hoisted_24$2,[createVNode(l,{icon:"icon-park-solid:protect",class:"text-5xl text-green-500"})]),createBaseVNode("h4",_hoisted_25$2,[createTextVNode(toDisplayString(e.headersuccess)+" ",1),_hoisted_26$2])])])]),_:1},8,["title","activeModal"])):createCommentVNode("",!0)])}const inputView=_export_sfc(_sfc_main$4,[["render",_sfc_render$4]]),detail_vue_vue_type_style_index_0_scoped_25d29d6d_lang="",_sfc_main$3={components:{Button,Dropdown,Icon,Tooltip,Avatar},props:{items:{default:""}},setup(a,{emit:t}){const n=ref([]),e=ref({}),m=ref(""),_=urlSarabun;onMounted(async()=>{i(a.items.id)});const l=()=>{t("onCloseDetailOutput",!1)},h=p=>{if(p){const c=new Date(p),w=c.getDate().toString().padStart(2,"0"),x=(c.getMonth()+1).toString().padStart(2,"0"),s=c.getFullYear(),g=c.getHours().toString().padStart(2,"0"),u=c.getMinutes().toString().padStart(2,"0");return`${w}/${x}/${s} ${g}:${u}`}else return null},i=async p=>{var x,s,g,u,o,v,V;const{data:c,status:w}=await apiFire("inboxMailStore","showOut",{payload:p});w==200&&(console.log("data",c),e.value=(x=c.result)==null?void 0:x.data,console.log(e.value),m.value=(g=(s=c.result)==null?void 0:s.data)==null?void 0:g.detail,n.value=(o=(u=c.result)==null?void 0:u.data)!=null&&o.attachments?(V=(v=c.result)==null?void 0:v.data)==null?void 0:V.attachments:[])};return{sarabunUrl:_,redirectToSrc:p=>{window.location.href=_+"/"+p},closeDetailOutput:l,formatDate:h,getDetail:i,emailDetail:e,htmlContent:m,fileList:n}}},_withScopeId=a=>(pushScopeId("data-v-25d29d6d"),a=a(),popScopeId(),a),_hoisted_1$3={class:"absolute left-0 top-0 w-full h-full bg-white dark:bg-slate-800 z-[55] rounded-md p-6 overflow-y-auto"},_hoisted_2$3={class:"flex items-center border-b border-slate-100 dark:border-slate-700 -mx-6 pb-6 mb-6 px-6"},_hoisted_3$3={class:"flex pr-2"},_hoisted_4$3={key:0,style:{"text-align":"center","background-color":"rgba(254, 228, 218, 1)"},class:"h-[50px] w-full rounded-md py-3"},_hoisted_5$3={class:"text-center",style:{color:"rgba(255, 90, 31, 1)"}},_hoisted_6$3={key:1,style:{"text-align":"center","background-color":"rgba(222, 247, 236, 1)"},class:"h-[50px] w-full rounded-md py-3"},_hoisted_7$3={class:"text-center",style:{color:"rgba(14, 159, 110, 1)"}},_hoisted_8$3={class:"text-lg font-medium text-slate-600 dark:text-slate-300"},_hoisted_9$3={class:"flex space-x-3 pt-4 pb-6 items-start rtl:space-x-reverse"},_hoisted_10$3={class:"flex-none"},_hoisted_11$2={class:"h-8 w-8 rounded-full text-white"},_hoisted_12$2={class:"flex-1"},_hoisted_13$2={class:"text-sm text-slate-600 dark:text-slate-300 font-medium leading-4"},_hoisted_14$2={class:"relative -top-1 text-gray-400 mt-2 text-sm"},_hoisted_15$2={class:"text-sm text-slate-600 dark:text-slate-300 font-normal"},_hoisted_16$2=["innerHTML"],_hoisted_17$2=_withScopeId(()=>createBaseVNode("hr",{class:"mt-5 border mb-5"},null,-1)),_hoisted_18$2=["href"],_hoisted_19$2={class:"flex gap-3 items-center border bg-gray-100 p-3 my-3 rounded w-[30%] cursor-pointer"},_hoisted_20$2={class:"ell-1"};function _sfc_render$3(a,t,n,e,m,_){const l=resolveComponent("Icon"),h=resolveComponent("Avatar");return openBlock(),createElementBlock("div",_hoisted_1$3,[createBaseVNode("div",_hoisted_2$3,[createBaseVNode("div",_hoisted_3$3,[createBaseVNode("div",{class:"email-icon",onClick:t[0]||(t[0]=(...i)=>e.closeDetailOutput&&e.closeDetailOutput(...i))},[createVNode(l,{icon:"heroicons-outline:arrow-left"})])]),n.items.status=="กำหนดเวลาไว้"?(openBlock(),createElementBlock("div",_hoisted_4$3,[createBaseVNode("div",_hoisted_5$3,toDisplayString("วันที่ที่กำหนดเวลา "+e.formatDate(n.items.date)),1)])):createCommentVNode("",!0),n.items.status=="ส่งแล้ว"?(openBlock(),createElementBlock("div",_hoisted_6$3,[createBaseVNode("div",_hoisted_7$3,toDisplayString("ส่งแล้ว "+e.formatDate(n.items.created_at)),1)])):createCommentVNode("",!0)]),createBaseVNode("div",null,[createBaseVNode("div",_hoisted_8$3,toDisplayString(e.emailDetail.subject),1),createBaseVNode("div",_hoisted_9$3,[createBaseVNode("div",_hoisted_10$3,[createBaseVNode("div",_hoisted_11$2,[createVNode(h,{image:"profile-1"})])]),createBaseVNode("div",_hoisted_12$2,[createBaseVNode("span",_hoisted_13$2,toDisplayString(e.emailDetail.from),1),createBaseVNode("div",_hoisted_14$2,toDisplayString(e.formatDate(e.emailDetail.created_at)),1)])]),createBaseVNode("div",_hoisted_15$2,[createBaseVNode("div",{innerHTML:e.htmlContent},null,8,_hoisted_16$2)]),_hoisted_17$2,createBaseVNode("div",null,[createBaseVNode("div",null,toDisplayString(e.fileList.length+" ไฟล์แนบ"),1),(openBlock(!0),createElementBlock(Fragment,null,renderList(e.fileList,(i,r)=>(openBlock(),createElementBlock("div",{key:r},[createBaseVNode("a",{href:e.sarabunUrl+"/"+i.path,target:"_blank"},[createBaseVNode("div",_hoisted_19$2,[createVNode(l,{icon:"ant-design:file-pdf-filled",class:"text-red-500 pr-1"}),createBaseVNode("div",_hoisted_20$2,toDisplayString(i==null?void 0:i.name),1)])],8,_hoisted_18$2)]))),128))])])])}const outputDetail=_export_sfc(_sfc_main$3,[["render",_sfc_render$3],["__scopeId","data-v-25d29d6d"]]),index_vue_vue_type_style_index_0_lang$2="",_sfc_main$2={components:{Tooltip,Pagination,InputGroup,Dropdown,Icon,Button,Card,MenuItem:Se,VueSelect,vSelect:Ce,Switch,Modal,Textinput,ConfirmDelete,ChangeStatus,ModalSuccess,outputDetail},setup(){const a=ref({}),t=ref(!1),n=ref(!1),e=ref([]),m=ref([{label:"เรื่อง/ถึง",field:"title",width:"55%",tdClass:"text_left",thClass:"text_left"},{label:"สถานะ",field:"status",width:"15%",tdClass:"text-center",thClass:"text-center"},{label:"วันที่ส่ง",field:"created_at",width:"20%",tdClass:"text-center",thClass:"text-center"},{label:"จัดการ",field:"action",width:"10%",tdClass:"text-center",thClass:"text-center"}]),_=ref([{id:1,name:"กำหนดเวลาไว้"},{id:2,name:"ส่งแล้ว"}]),l=ref(""),h=ref(""),i={total:1,current:1,perpage:10,pageRange:5};watch(l,async u=>{r(1)}),onMounted(()=>{r(1)});const r=async u=>{var V,y,N,D,f;const{data:o,status:v}=await apiFire("inboxMailStore","getMailOutBox",{payload:{page:u,keyword:h.value,status:l.value}});v==200&&(console.log("data",o),e.value=(V=o==null?void 0:o.result)==null?void 0:V.data,i.total=((y=o==null?void 0:o.result)==null?void 0:y.total_page)*((N=o==null?void 0:o.result)==null?void 0:N.per_page),i.current=(D=o==null?void 0:o.result)==null?void 0:D.current_page,i.perpage=(f=o==null?void 0:o.result)==null?void 0:f.per_page)};return{moveToTrashModal:t,onSwitch:n,detailList:a,outboxList:e,columns:m,statusList:_,filterStatus:l,keyword:h,paginate:i,getData:r,convertDateTime:u=>u?dayjs(u).locale("th").add(543,"year").format("DD MMM YYYY HH:mm"):"-",onAccept:()=>{t.value=!1},moveToTrash:async u=>{let o=[u];const{data:v,status:V}=await apiFire("inboxMailStore","moveToTrashOutbox",{payload:o});V==200?(t.value=!0,r(1)):alert("error")},onDetail:u=>{n.value=!0,a.value=u},onCloseDetail:u=>{n.value=u},changePage:async u=>{i.current=u,await r(u)}}}},_hoisted_1$2={class:"outView"},_hoisted_2$2={class:"justify-between pb-6 md:space-y-0 space-y-3 items-center w-2/5 ml-auto mt-5 px-5"},_hoisted_3$2={class:"flex flex-wrap sm:flex-nowrap gap-3"},_hoisted_4$2={class:"basis-full"},_hoisted_5$2={class:"basis-full"},_hoisted_6$2={class:"no-scroll-x-table"},_hoisted_7$2=createBaseVNode("div",{class:"text-center"},[createBaseVNode("div",{class:"text-gray-400"},"ไม่พบข้อมูล")],-1),_hoisted_8$2={style:{"white-space":"nowrap","font-size":"16px","font-weight":"600"}},_hoisted_9$2={key:0},_hoisted_10$2={class:"md:flex items-center md:space-x-6 rtl:space-x-reverse"},_hoisted_11$1=createBaseVNode("div",{class:"flex-none"},null,-1),_hoisted_12$1={class:"text-gray-400 ell-1 max-w-[700px]"},_hoisted_13$1={key:1},_hoisted_14$1={key:0},_hoisted_15$1={class:"text-center",style:{color:"rgba(255, 90, 31, 1)"}},_hoisted_16$1={key:1},_hoisted_17$1={class:"text-center",style:{color:"rgba(14, 159, 110, 1)"}},_hoisted_18$1={key:2},_hoisted_19$1={key:0},_hoisted_20$1={class:"text-center rounded",style:{"background-color":"rgba(254, 228, 218, 1)",color:"rgba(255, 90, 31, 1)"}},_hoisted_21$1={key:1},_hoisted_22$1={class:"text-center rounded",style:{"background-color":"rgba(222, 247, 236, 1)",color:"rgba(14, 159, 110, 1)"}},_hoisted_23$1={key:3},_hoisted_24$1={class:"w-full"},_hoisted_25$1=["onClick"],_hoisted_26$1=["onClick"],_hoisted_27$1={class:"py-4 px-3"},_hoisted_28$1={class:"h-36 flex items-center justify-center"},_hoisted_29$1={class:"text-center flex flex-row flex-wrap justify-center"},_hoisted_30$1={class:"basis-full flex justify-center mb-5"},_hoisted_31=createBaseVNode("h4",{class:"text-lg text-slate-900"},[createTextVNode(" ย้ายไปถังขยะ "),createBaseVNode("span",{class:"text-green-500"},"สำเร็จ")],-1),_hoisted_32={class:"flex justify-center w-full"};function _sfc_render$2(a,t,n,e,m,_){var u;const l=resolveComponent("vSelect"),h=resolveComponent("VueSelect"),i=resolveComponent("InputGroup"),r=resolveComponent("Icon"),p=resolveComponent("Dropdown"),c=resolveComponent("Pagination"),w=resolveComponent("vue-good-table"),x=resolveComponent("Button"),s=resolveComponent("Modal"),g=resolveComponent("outputDetail");return openBlock(),createElementBlock("div",_hoisted_1$2,[createBaseVNode("div",_hoisted_2$2,[createBaseVNode("div",_hoisted_3$2,[createBaseVNode("div",_hoisted_4$2,[createVNode(h,{classInput:"input_color"},{default:withCtx(()=>[createVNode(l,{placeholder:"สถานะ",modelValue:e.filterStatus,"onUpdate:modelValue":t[0]||(t[0]=o=>e.filterStatus=o),class:"input_color border rounded-md",label:"name",reduce:o=>o.name,options:e.statusList},null,8,["modelValue","reduce","options"])]),_:1})]),createBaseVNode("div",_hoisted_5$2,[createVNode(i,{modelValue:e.keyword,"onUpdate:modelValue":t[1]||(t[1]=o=>e.keyword=o),placeholder:"ค้นหา",classInputGroup:"border-gray-200",type:"text",prependIcon:"heroicons-outline:search",merged:"",inputEnter:"","onEvent:inputEnter":t[2]||(t[2]=o=>e.getData(1))},null,8,["modelValue"])])])]),createBaseVNode("div",_hoisted_6$2,[createVNode(w,{columns:e.columns,styleClass:"vgt-table bordered",rows:e.outboxList,"pagination-options":{enabled:!0,perPage:(u=e.paginate)==null?void 0:u.perpage},"sort-options":{enabled:!1}},{emptystate:withCtx(()=>[_hoisted_7$2]),"table-column":withCtx(o=>[createBaseVNode("div",_hoisted_8$2,toDisplayString(o.column.label),1)]),"table-row":withCtx(o=>[o.column.field=="title"?(openBlock(),createElementBlock("span",_hoisted_9$2,[createBaseVNode("div",null,[createBaseVNode("div",_hoisted_10$2,[_hoisted_11$1,createBaseVNode("div",null,[createBaseVNode("div",null,toDisplayString(o.row.subject),1),createBaseVNode("div",_hoisted_12$1,toDisplayString(o.row.detail),1)])])])])):createCommentVNode("",!0),o.column.field=="created_at"?(openBlock(),createElementBlock("span",_hoisted_13$1,[o.row.status=="กำหนดเวลาไว้"?(openBlock(),createElementBlock("div",_hoisted_14$1,[createBaseVNode("div",_hoisted_15$1,toDisplayString(o.row.created_at?e.convertDateTime(o.row.created_at):"-"),1)])):createCommentVNode("",!0),o.row.status=="ส่งแล้ว"?(openBlock(),createElementBlock("div",_hoisted_16$1,[createBaseVNode("div",_hoisted_17$1,toDisplayString(o.row.created_at?e.convertDateTime(o.row.created_at):"-"),1)])):createCommentVNode("",!0)])):createCommentVNode("",!0),o.column.field=="status"?(openBlock(),createElementBlock("span",_hoisted_18$1,[o.row.status=="กำหนดเวลาไว้"?(openBlock(),createElementBlock("div",_hoisted_19$1,[createBaseVNode("div",_hoisted_20$1,toDisplayString(o.row.status),1)])):createCommentVNode("",!0),o.row.status=="ส่งแล้ว"?(openBlock(),createElementBlock("div",_hoisted_21$1,[createBaseVNode("div",_hoisted_22$1,toDisplayString(o.row.status),1)])):createCommentVNode("",!0)])):createCommentVNode("",!0),o.column.field=="action"?(openBlock(),createElementBlock("span",_hoisted_23$1,[createVNode(p,{classMenuItems:"right-full  w-[220px] top-[110%] "},{menus:withCtx(()=>[createBaseVNode("ul",_hoisted_24$1,[createBaseVNode("li",null,[createBaseVNode("div",{class:"p-2 flex items-center hover:bg-gray-50 cursor-pointer",onClick:v=>e.onDetail(o.row)},[createVNode(r,{icon:"grommet-icons:document-text",class:"text-xl mr-2"}),createTextVNode(" ดูรายละเอียด ")],8,_hoisted_25$1)]),createBaseVNode("li",null,[createBaseVNode("div",{class:"p-2 flex items-center hover:bg-gray-50 cursor-pointer",onClick:v=>e.moveToTrash(o.row.id)},[createVNode(r,{icon:"fa6-solid:trash-can",class:"text-xl mr-2"}),createTextVNode(" ย้ายไปถังขยะ ")],8,_hoisted_26$1)])])]),default:withCtx(()=>[createVNode(r,{icon:"pepicons-pencil:dots-x",class:"text-gray-400 text-4xl"})]),_:2},1024)])):createCommentVNode("",!0)]),"pagination-bottom":withCtx(o=>[createBaseVNode("div",_hoisted_27$1,[createVNode(c,{total:e.paginate.total,current:e.paginate.current,"per-page":e.paginate.perpage,pageRange:e.paginate.pageRange,onPageChanged:t[3]||(t[3]=v=>e.changePage(v)),pageChanged:o.pageChanged,perPageChanged:o.perPageChanged,textAfterInput:"ไปที่หน้า",enableSearch:"",enableInput:""},null,8,["total","current","per-page","pageRange","pageChanged","perPageChanged"])])]),_:1},8,["columns","rows","pagination-options"])]),e.moveToTrashModal?(openBlock(),createBlock(s,{key:0,title:"ย้ายไปถังขยะ",label:"",labelClass:"btn-outline-dark",centered:"",activeModal:e.moveToTrashModal,"onEvent:closeModal":t[5]||(t[5]=o=>e.onAccept())},{footer:withCtx(()=>[createBaseVNode("div",_hoisted_32,[createVNode(x,{text:"ปิด",btnClass:"btn-primary w-36",onClick:t[4]||(t[4]=o=>e.onAccept())})])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_28$1,[createBaseVNode("div",_hoisted_29$1,[createBaseVNode("div",_hoisted_30$1,[createVNode(r,{icon:"icon-park-solid:protect",class:"text-5xl text-green-500"})]),_hoisted_31])])]),_:1},8,["activeModal"])):createCommentVNode("",!0),createVNode(Transition,{name:"singleEmail",style:{"z-index":"9999"},onOnCloseDetailOutput:e.onCloseDetail},{default:withCtx(()=>[e.onSwitch?(openBlock(),createBlock(g,{key:0,items:e.detailList},null,8,["items"])):createCommentVNode("",!0)]),_:1},8,["onOnCloseDetailOutput"])])}const outputView=_export_sfc(_sfc_main$2,[["render",_sfc_render$2]]),index_vue_vue_type_style_index_0_lang$1="",_sfc_main$1={components:{Select,Checkbox,Footer,Width,Theme,FromGroup,Radio,Textarea,Modal,Card,tree:entry_esm,Icon,Button,Dropdown,Textinput,InputGroup,Pagination,VueSelect,MenuItem:Se},setup(){const a=ref(null),t=ref(""),n=ref([]),e=ref([]),m=ref(""),_=ref(!1),l=ref(!1),h=ref([{label:"เรื่อง/จาก",field:"title",width:"70%",tdClass:"text_left",thClass:"text_left"},{label:"เวลาสร้าง",field:"date",width:"20%",tdClass:"text_center",thClass:"text_center"},{label:"จัดการ",field:"action",width:"10%",tdClass:"text_center",thClass:"text_center"}]),i=ref(""),r={total:50,current:1,perpage:10,pageRange:5},p=ref(""),c=ref("");onMounted(async()=>{x(1)});const w=f=>{e.value=f.selectedRows.map(d=>({id:d.id})),console.log("Selected IDs:",e.value)},x=async f=>{var B,b,S,k,$;const{data:d,status:C}=await apiFire("inboxMailStore","getTrash",{payload:{page:f,keyword:i.value}});C==200&&(console.log("data",d),n.value=(B=d==null?void 0:d.result)==null?void 0:B.data,r.total=((b=d==null?void 0:d.result)==null?void 0:b.total_page)*((S=d==null?void 0:d.result)==null?void 0:S.per_page),r.current=(k=d==null?void 0:d.result)==null?void 0:k.current_page,r.perpage=($=d==null?void 0:d.result)==null?void 0:$.per_page)};return{columns:h,formatDate:f=>{if(f){const d=new Date(f),C=d.getDate().toString().padStart(2,"0"),B=(d.getMonth()+1).toString().padStart(2,"0"),b=d.getFullYear(),S=d.getHours().toString().padStart(2,"0"),k=d.getMinutes().toString().padStart(2,"0");return`${C}/${B}/${b} ${S}:${k}`}else return null},isShowSucceess:_,isShowDialog:l,headerDialog:p,headersuccess:c,onAccept:()=>{_.value=!1},deletefile:async f=>{if(e.value.length!=0||f!=null)if(f!=null){let d=[f];p.value="ลบรายการข้อมูล",c.value="ลบรายการข้อมูลถาวร";const{data:C,status:B}=await apiFire("inboxMailStore","destroy",{payload:d});B==200?(_.value=!0,x(1)):alert("error")}else{let d=e.value.map(b=>b.id);p.value="ลบรายการข้อมูล",c.value="ลบรายการข้อมูลถาวร";const{data:C,status:B}=await apiFire("inboxMailStore","destroy",{payload:d});B==200?(_.value=!0,x(1)):alert("error")}},restore:async f=>{p.value="กู้คืนข้อมูล",c.value="กู้คืนข้อมูล",m.value="คุณต้องการกู้คืนรายการต่อใช่ไหม",l.value=!0,t.value="restore",a.value=f},onAcceptDialog:async()=>{if(l.value=!1,t.value=="clear"){const{data:f,status:d}=await apiFire("inboxMailStore","clearTrash");d==200&&(_.value=!0,x(1))}if(t.value=="restore"&&(e.value.length!=0||a.value!=null))if(a.value!=null){let f=[a.value];const{data:d,status:C}=await apiFire("inboxMailStore","recover",{payload:f});C==200?(_.value=!0,x(1)):alert("error")}else{let f=e.value.map(B=>B.id);const{data:d,status:C}=await apiFire("inboxMailStore","recover",{payload:f});C==200?(_.value=!0,x(1)):alert("error")}},onCloseSucceess:()=>{_.value=!1,a.value=null},onCloseDialog:()=>{l.value=!1},clearMailbox:()=>{console.log("กดเปิด"),p.value="ลบรายการข้อมูล",c.value="ลบรายการข้อมูลถาวร",m.value="การดำเนินการนี้จะส่งผลกระทบต่อรายการทั้งหมดใน กล่องจดหมายขยะ คุณต้องการดำเนินการต่อใช่ไหม",l.value=!0,t.value="clear"},text:m,handleSelectedRowsChange:w,selectedIds:e,getData:x,paginate:r,changePage:async f=>{r.current=f,await x(f)},trashList:n,keyword:i}}},_hoisted_1$1={class:"trashView"},_hoisted_2$1={class:"flex-1"},_hoisted_3$1={class:"pt-10"},_hoisted_4$1={class:"flex justify-between px-6 mb-4"},_hoisted_5$1={class:""},_hoisted_6$1={class:"pb-5",style:{"padding-left":"25px","padding-right":"25px"}},_hoisted_7$1={style:{"text-align":"center",color:"red","background-color":"rgba(253, 232, 232, 1)"},class:"h-[50px] py-3"},_hoisted_8$1={class:"no-scroll-x-table"},_hoisted_9$1=createBaseVNode("div",{class:"text-center"},[createBaseVNode("div",{class:"text-gray-400"},"ไม่พบข้อมูล")],-1),_hoisted_10$1={style:{"white-space":"nowrap","font-size":"16px","font-weight":"600"}},_hoisted_11={key:0},_hoisted_12={class:"md:flex items-center md:space-x-6 rtl:space-x-reverse"},_hoisted_13=createBaseVNode("div",{class:"flex-none"},null,-1),_hoisted_14={class:"text-gray-400 ell-1"},_hoisted_15={key:1},_hoisted_16={key:2},_hoisted_17={class:"w-full"},_hoisted_18=["onClick"],_hoisted_19=["onClick"],_hoisted_20={class:"py-4 px-3"},_hoisted_21={class:"py-6"},_hoisted_22={class:"items-center py-2 mb-3 text-center"},_hoisted_23={class:"basis-1/2"},_hoisted_24={class:"text-center mt-4 flex justify-center w-full"},_hoisted_25={class:"h-36 flex items-center justify-center"},_hoisted_26={class:"text-center flex flex-row flex-wrap justify-center"},_hoisted_27={class:"basis-full flex justify-center mb-5"},_hoisted_28={class:"text-lg text-slate-900"},_hoisted_29=createBaseVNode("span",{class:"text-green-500"},"สำเร็จ",-1),_hoisted_30={class:"flex justify-center w-full"};function _sfc_render$1(a,t,n,e,m,_){const l=resolveComponent("Button"),h=resolveComponent("InputGroup"),i=resolveComponent("Icon"),r=resolveComponent("Dropdown"),p=resolveComponent("Pagination"),c=resolveComponent("vue-good-table"),w=resolveComponent("Card"),x=resolveComponent("Modal");return openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",_hoisted_1$1,[createVNode(w,{bodyClass:"p-0 two-side-card"},{default:withCtx(()=>[createBaseVNode("div",_hoisted_2$1,[createBaseVNode("div",_hoisted_3$1,[createBaseVNode("div",_hoisted_4$1,[createBaseVNode("div",null,[createVNode(l,{text:"กู้คืน",icon:"mdi:restore",onClick:t[0]||(t[0]=s=>e.restore())}),createVNode(l,{style:{"margin-left":"12px"},text:"ลบถาวร",icon:"heroicons-outline:trash",btnClass:"theme-one text-slate-50 bg-[red]",onClick:t[1]||(t[1]=s=>e.deletefile())})]),createBaseVNode("div",_hoisted_5$1,[createVNode(h,{modelValue:e.keyword,"onUpdate:modelValue":t[2]||(t[2]=s=>e.keyword=s),placeholder:"ค้นหา",classInputGroup:"border-gray-200",type:"text",prependIcon:"heroicons-outline:search",merged:"",inputEnter:"","onEvent:inputEnter":t[3]||(t[3]=s=>e.getData(1))},null,8,["modelValue"])])]),createBaseVNode("div",_hoisted_6$1,[createBaseVNode("div",_hoisted_7$1,[createTextVNode(toDisplayString("รายการที่อยู่ในกล่องจดหมายขยะนานเกิน 30 วัน จะถูกลบทิ้งโดยอัตโนมัติ")+" "),createBaseVNode("span",{class:"underline pointer",style:{color:"rgba(26, 86, 219, 1)"},onClick:t[4]||(t[4]=s=>e.clearMailbox())}," ล้างจดหมายถังขยะ ")])]),createBaseVNode("div",_hoisted_8$1,[createVNode(c,{onSelectedRowsChange:e.handleSelectedRowsChange,columns:e.columns,styleClass:"vgt-table bordered",rows:e.trashList,"pagination-options":{enabled:!0,perPage:e.paginate.perpage},"search-options":{enabled:!1},"select-options":{enabled:!0,selectOnCheckboxOnly:!0,selectioninfoClass:"custom-class",selectionText:"rows selected",clearSelectionText:"clear",disableSelectinfo:!0,selectAllByGroup:!0},"sort-options":{enabled:!1},"filter-options":{enabled:!1}},{emptystate:withCtx(()=>[_hoisted_9$1]),"table-column":withCtx(s=>[createBaseVNode("div",_hoisted_10$1,toDisplayString(s.column.label),1)]),"table-row":withCtx(s=>[s.column.field=="title"?(openBlock(),createElementBlock("span",_hoisted_11,[createBaseVNode("div",null,[createBaseVNode("div",_hoisted_12,[_hoisted_13,createBaseVNode("div",null,[createBaseVNode("div",null,toDisplayString(s.row.subject),1),createBaseVNode("div",_hoisted_14,toDisplayString(s.row.detail),1)])])])])):createCommentVNode("",!0),s.column.field=="date"?(openBlock(),createElementBlock("span",_hoisted_15,toDisplayString(e.formatDate(s.row.created_at)),1)):createCommentVNode("",!0),s.column.field=="action"?(openBlock(),createElementBlock("span",_hoisted_16,[createVNode(r,{classMenuItems:"right-full  w-[220px] top-[110%] "},{menus:withCtx(()=>[createBaseVNode("ul",_hoisted_17,[createBaseVNode("li",null,[createBaseVNode("div",{class:"p-2 flex items-center hover:bg-gray-50 cursor-pointer",onClick:g=>e.restore(s.row.id)},[createVNode(i,{icon:"bi:eye-fill",class:"text-xl mr-2"}),createTextVNode(" กู้คืน ")],8,_hoisted_18)]),createBaseVNode("li",null,[createBaseVNode("div",{class:"p-2 flex items-center hover:bg-gray-50 cursor-pointer",onClick:g=>e.deletefile(s.row.id)},[createVNode(i,{icon:"fa6-solid:trash-can",class:"text-xl mr-2"}),createTextVNode(" ลบถาวร ")],8,_hoisted_19)])])]),default:withCtx(()=>[createVNode(i,{icon:"pepicons-pencil:dots-x",class:"text-gray-400 text-4xl"})]),_:2},1024)])):createCommentVNode("",!0)]),"pagination-bottom":withCtx(s=>[createBaseVNode("div",_hoisted_20,[createVNode(p,{total:e.paginate.total,current:e.paginate.current,"per-page":e.paginate.perpage,pageRange:e.paginate.pageRange,onPageChanged:t[5]||(t[5]=g=>e.changePage(g)),pageChanged:s.pageChanged,perPageChanged:s.perPageChanged,textAfterInput:"ไปที่หน้า",enableSearch:"",enableInput:""},null,8,["total","current","per-page","pageRange","pageChanged","perPageChanged"])])]),_:1},8,["onSelectedRowsChange","columns","rows","pagination-options"])])])])]),_:1})]),e.isShowDialog?(openBlock(),createBlock(x,{key:0,title:e.headerDialog,labelClass:"btn-outline-dark",label:"",ref:"modalDialog",centered:"",activeModal:e.isShowDialog,"onEvent:closeModal":t[8]||(t[8]=s=>e.onCloseDialog())},{footer:withCtx(()=>[createBaseVNode("div",_hoisted_24,[createVNode(l,{text:"ยืนยัน",btnClass:"btn-primary w-32 mx-2",onClick:t[6]||(t[6]=s=>e.onAcceptDialog())}),createVNode(l,{text:"ยกเลิก",btnClass:"btn-outline-dark w-32 mx-2",onClick:t[7]||(t[7]=s=>e.onCloseDialog())})])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_21,[createBaseVNode("div",_hoisted_22,[createBaseVNode("div",_hoisted_23,toDisplayString(e.text),1)])])]),_:1},8,["title","activeModal"])):createCommentVNode("",!0),e.isShowSucceess?(openBlock(),createBlock(x,{key:1,title:e.headerDialog,label:"",labelClass:"btn-outline-dark",centered:"",activeModal:e.isShowSucceess,"onEvent:closeModal":t[10]||(t[10]=s=>e.onAccept())},{footer:withCtx(()=>[createBaseVNode("div",_hoisted_30,[createVNode(l,{text:"ปิด",btnClass:"btn-primary w-36",onClick:t[9]||(t[9]=s=>e.onAccept())})])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_25,[createBaseVNode("div",_hoisted_26,[createBaseVNode("div",_hoisted_27,[createVNode(i,{icon:"icon-park-solid:protect",class:"text-5xl text-green-500"})]),createBaseVNode("h4",_hoisted_28,[createTextVNode(toDisplayString(e.headersuccess)+" ",1),_hoisted_29])])])]),_:1},8,["title","activeModal"])):createCommentVNode("",!0)],64)}const trashView=_export_sfc(_sfc_main$1,[["render",_sfc_render$1]]),index_vue_vue_type_style_index_0_lang="",_sfc_main={components:{Button,Card,Icon,Pagination,Loading,Tooltip,inputView,outputView,trashView},setup(){const a=ref([{name:"กล่องขาเข้า",value:"input",icon:"mdi:mailbox-up-outline"},{name:"กล่องขาออก",value:"output",icon:"ci:paper-plane"},{name:"กล่องจดหมายขยะ",value:"trash",icon:"heroicons:trash"}]),t=ref("input"),n=ref(0);onMounted(()=>{window.addEventListener("resize",e),e()});const e=()=>{n.value=window.innerWidth};return{filters:a,selected:t,width:n,onSelected:_=>{console.log("value selected",_),t.value=_,console.log("selected",t)},handleResize:e}}},_hoisted_1={class:"flex space-x-5"},_hoisted_2={class:"flex-1 h-full"},_hoisted_3={class:"h-full pb-10 px-6","data-simplebar":""},_hoisted_4={class:"list mt-6"},_hoisted_5=["onClick"],_hoisted_6={class:"flex-1 flex space-x-2 rtl:space-x-reverse"},_hoisted_7={class:"text-xl"},_hoisted_8={key:0},_hoisted_9={key:1},_hoisted_10={key:2};function _sfc_render(a,t,n,e,m,_){const l=resolveComponent("Icon"),h=resolveComponent("Card"),i=resolveComponent("inputView"),r=resolveComponent("outputView"),p=resolveComponent("trashView");return openBlock(),createElementBlock("div",_hoisted_1,[createBaseVNode("div",{class:normalizeClass(["transition-all duration-150",[e.width<1280?" absolute h-full top-0 md:w-[260px] w-[200px] z-[999]":"flex-none min-w-[260px]",e.width<1280?"ltr:left-0  rtl:right-0":"ltr:-left-full rtl:-right-full "]])},[createVNode(h,{bodyClass:" h-full flex flex-col ",className:"h-full"},{default:withCtx(()=>[createBaseVNode("div",_hoisted_2,[createBaseVNode("div",_hoisted_3,[createBaseVNode("ul",_hoisted_4,[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.filters.slice(0,3),c=>(openBlock(),createElementBlock("li",{key:c.label},[createBaseVNode("label",{class:normalizeClass(["flex items-center cursor-pointer px-2 py-3 rounded",e.selected===c.value?"bg-slate-100 text-slate-900 dark:bg-slate-700 dark:text-slate-200":"  text-slate-600 dark:text-slate-300 "]),onClick:w=>e.onSelected(c.value)},[createBaseVNode("div",_hoisted_6,[createBaseVNode("span",_hoisted_7,[createVNode(l,{icon:c.icon},null,8,["icon"])]),createBaseVNode("span",{class:normalizeClass(["capitalize text-sm",[e.selected===c.value?" font-medium":"font-normal"]])},toDisplayString(c.name),3)])],10,_hoisted_5)]))),128))])])])]),_:1})],2),createBaseVNode("div",{class:normalizeClass(["flex-1 md:w-[calc(100%-320px)]",e.width<768?"h-full":""])},[createVNode(h,{bodyClass:"p-0 h-full  relative",className:e.width<1024?"h-full":""},{default:withCtx(()=>[e.selected=="input"?(openBlock(),createElementBlock("div",_hoisted_8,[createVNode(i)])):createCommentVNode("",!0),e.selected=="output"?(openBlock(),createElementBlock("div",_hoisted_9,[createVNode(r)])):createCommentVNode("",!0),e.selected=="trash"?(openBlock(),createElementBlock("div",_hoisted_10,[createVNode(p)])):createCommentVNode("",!0)]),_:1},8,["className"])],2)])}const index=_export_sfc(_sfc_main,[["render",_sfc_render]]);export{index as default};
