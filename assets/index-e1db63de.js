import{e as I}from"./vue3-tree-vue.esm-0dbd4492.js";import{_ as S}from"./index-f91482a0.js";import{M}from"./Modal-b54f1b5f.js";import{B as w}from"./index-c2d6eb9c.js";import{I as V}from"./index-2198f2cf.js";import{I as B}from"./index-8d30ace7.js";import{C as z}from"./checkbox-12649afb.js";import{R as L}from"./index-e163c14d.js";import{aA as f,be as O,k as R,aF as s,as as r,m as d,bj as c,p,x as b,w as U,aT as C,o as G,n as x,ac as N}from"./preload-helper-f37a9bec.js";const A={name:"ModalOrganize",components:{Modal:M,Button:w,InputGroup:V,Icon:B,tree:I,Radio:L,CheckedBox:z},props:{isOpen:{type:Boolean,default:!1},items:{type:Array,default:()=>[]},value:{type:[String,Number,Array],default:""},multiple:{type:Boolean,default:!0}},emits:["event:closeModal","event:onSelectedItem","event:acceptSelectOrganize"],setup(l,{emit:a}){const n=f(""),t=f([]),m=f(null),u=f(null);O(()=>l.isOpen,o=>{console.log("itemSelected.value",l.value),l.multiple?l.value.length>0&&(t.value=l.value):l.value&&(m.value=l.value)});const h=()=>{a("event:closeModal",!1)},k=o=>{console.log("item",o),u.value=o,m.value=o.id},v=o=>{t.value.length>0&&t.value.find(e=>e.item_id===o.item_id)?t.value=t.value.filter(e=>e.item_id!==o.item_id):t.value.push({item_id:o.item_id,organization_id:o.organization_id,name:o.name})},_=()=>{a("event:onSelectedItem",l.multiple?t.value:u.value),a("event:acceptSelectOrganize",t.value)},y=o=>t.value.length>0?!!t.value.find(e=>e.item_id===o.item_id):!1;return{roleList:R(()=>{if(n.value=="")return l.items;{if(l.items.length==0)return;let o=[];return l.items.forEach(e=>{o=e.children.filter(i=>i.type=="organization"?i.organization_name.toLowerCase().includes(n.value.toLowerCase()):i.name.toLowerCase().includes(n.value.toLowerCase()))}),[{...l.items[0],children:o}]}}),searchRole:n,closeModal:h,onSelectedItem:v,onSelectedRadioItem:k,checkedItem:y,submit:_,itemSelected:t,radioSelected:m,radioItem:u}}},E={class:"mb-8"},j={class:"h-[500px] overflow-y-scroll"},D={key:0},T={class:"text-center flex justify-center w-full mb-10 mt-3"};function F(l,a,n,t,m,u){const h=s("InputGroup"),k=s("Icon"),v=s("CheckedBox"),_=s("tree"),y=s("Radio"),g=s("Button"),o=s("Modal");return n.isOpen?(r(),d(o,{key:0,title:"เลือกบทบาท",label:"",labelClass:"btn-outline-dark",ref:"modalDialog",centered:"",activeModal:n.isOpen,"onEvent:closeModal":a[3]||(a[3]=e=>t.closeModal())},{footer:c(()=>[p("div",T,[b(g,{text:"บันทึก",type:"submit",btnClass:"btn-primary w-32 font-medium mx-2",onOnClick:t.submit},null,8,["onOnClick"]),b(g,{text:"ยกเลิก",btnClass:"btn-outline-dark w-32 mx-2",onOnClick:a[2]||(a[2]=e=>t.closeModal())})])]),default:c(()=>[p("div",E,[b(h,{type:"text",placeholder:"ค้นหา",prependIcon:"material-symbols:search",classInput:"h-[40px] custom_text_input border-2 border-gray-400",merged:"",modelValue:t.searchRole,"onUpdate:modelValue":a[0]||(a[0]=e=>t.searchRole=e)},null,8,["modelValue"])]),p("div",j,[n.multiple?(r(),d(_,{key:0,items:t.roleList,isCheckable:!1,hideGuideLines:!0,class:"tree-root-parent custom_tree_view"},{"item-prepend":c(e=>[b(k,{icon:"bi:check-lg"}),U(" "+C(e.organization_name),1)]),"item-prepend-icon":c(e=>[e.type=="role"?(r(),G("div",D,[t.checkedItem(e)?(r(),d(v,{key:0,disabled:e.have_sub_role==!1,modelValue:e,"onUpdate:checkedbox":i=>t.onSelectedItem(e),checked:!0},null,8,["disabled","modelValue","onUpdate:checkedbox"])):(r(),d(v,{key:1,disabled:e.have_sub_role==!1,modelValue:e,"onUpdate:checkedbox":i=>t.onSelectedItem(e)},null,8,["disabled","modelValue","onUpdate:checkedbox"]))])):x("",!0)]),_:1},8,["items"])):(r(),d(_,{key:1,items:t.roleList,isCheckable:!1,hideGuideLines:!0,class:"tree-root-parent custom_tree_view"},{"item-prepend":c(e=>[p("div",{class:N(e.children.length==0?"text-gray-400 cursor-not-allowed":"text-gray-800")},C(e.organization_name),3)]),"item-prepend-icon":c(e=>[e.type=="role"?(r(),d(y,{key:0,svg:"",inputClass:"bg-red-500",value:e.id,modelValue:t.radioSelected,"onUpdate:modelValue":a[1]||(a[1]=i=>t.radioSelected=i),onClick:i=>t.onSelectedRadioItem(e)},null,8,["value","modelValue","onClick"])):x("",!0)]),_:1},8,["items"]))])]),_:1},8,["activeModal"])):x("",!0)}const Z=S(A,[["render",F]]);export{Z as M};
