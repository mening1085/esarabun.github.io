import{C as A}from"./index-cb5a08aa.js";import{I as F}from"./index-8d30ace7.js";import{B as R}from"./index-c2d6eb9c.js";import{E as j}from"./index-360221be.js";import{D as O}from"./index-976a2577.js";import{C as P,B as V,A as I,a as N,b as T,R as Y}from"./RouteDetail-d06baee9.js";import{M as H}from"./index-8e7d66d6.js";import{M as z}from"./index-38095681.js";import{M as G}from"./index-b704274e.js";import{A as q}from"./AttachedFileStamp-6d1dcfc6.js";import{_ as J,t as S,a as p,g as K,G as L}from"./index-f91482a0.js";import{d as Q}from"./dayjs.min-472eb357.js";import{M as U}from"./index-3891a0e1.js";import{T as W}from"./ThreeForm-c5dff615.js";import{o as X,x as i,bj as d,m as c,n as m,aF as n,as as a,p as s,aT as h,w as Z}from"./preload-helper-f37a9bec.js";import"./iconify-2baafea4.js";import"./dom-b10fc197.js";import"./focus-management-94a631f4.js";import"./open-closed-75edfb8a.js";import"./use-resolve-button-type-d7bee841.js";import"./use-outside-click-156e41c1.js";import"./index-f32159fc.js";import"./Modal-b54f1b5f.js";import"./transition-be7c09bc.js";import"./hidden-800255f5.js";import"./micro-task-89dcd6af.js";import"./index-3e8503e7.js";import"./vue-cleave.min-df5c8cc9.js";import"./index-78f015fc.js";import"./index-e68945de.js";import"./vee-validate.esm-bf91438b.js";import"./TextValid-d1c607fc.js";import"./array-6ac4c54d.js";import"./tabs-cf3e0d3b.js";import"./VueSelect-403231fd.js";import"./index-fdd62298.js";import"./index-325a54cb.js";import"./ck-white-3501111f.js";import"./index-60fb4808.js";import"./vue3-tree-vue.esm-0dbd4492.js";import"./index-e163c14d.js";import"./index-8ecfca6d.js";const $={name:"ReceiveView",components:{Card:A,Icon:F,Button:R,Expansion:j,Dropdown:O,CoverSheet:P,BookDetail:V,AttachedFile:I,BookReference:N,Activity:T,RouteDetail:Y,AttachedFileStamp:q,ModalSuccess:H,ModalError:U,ModalAcknow:z,Modal:G,ThreeForm:W},data(){return{isOpen:!1,pdfPath:"",urlSarabun:S,item:null,isSuccess:!1,isError:!1,isSigned:!1,pinError:""}},created(){this.fetchData();const{data:o,status:e}=p("acknowStore","read",{payload:this.$route.params.id});e==200&&console.log(o.message)},computed:{isMobile(){return K().isMobile}},methods:{async pdfHistory(){const{data:o,status:e}=await p("documentStore","PDFHistory",{payload:this.$route.params.id});e==200&&(console.log("data pdf",o.result),this.pdfPath=o.result,this.isOpen=!0)},async handleSigned(){this.isSigned=!0},async signedSubmit(o){var f;const e=await p("acknowStore","store",{payload:o});console.log("data",e),e.status===200?(this.isSuccess=!0,this.isSigned=!1,L().clearSignature):e.status===403&&(this.pinError=(f=e.data)==null?void 0:f.message)},closeModal(){this.isSuccess=!1,this.isSigned=!1,this.isShowModalReturn=!1},async fetchData(){console.log("fetchData");const{data:o,status:e}=await p("acknowStore","show",{payload:this.$route.params.id});e===200&&(this.item=o.result)},convertDate(o){return o?Q(o).locale("th").add(543,"year").format("DD/MM/YYYY"):"-"},async handleReceiveBook(){console.log("handleReceiveBook");const{data:o,status:e}=await p("documentStore","acceptDocument",{payload:this.$route.params.id});e===200&&(this.isSuccess=!0,this.fetchData())},onPrinter(){console.log("onPrinter")},downloadFileDocument(o){console.log(o)},downloadFile(o){const e=S+o;window.open(e,"_blank")}}},ee={class:"flex items-center gap-3"},te=s("div",null,"กลับไปหน้ารายการ",-1),oe={class:"pt-4"},se={class:"md:text-2xl text-[16px] font-medium my-6"},ie={class:"h-[250px] flex items-center justify-center"},ne={class:"text-center flex flex-row flex-wrap justify-center"},le={class:"basis-full flex justify-center mb-5"},re=s("div",null,[s("h4",{class:"text-lg text-slate-900"},[Z(" บันทึกคำสั่งการ/คำเสนอ/การปฎิบัติ "),s("span",{class:"text-green-500"},"สำเร็จ")])],-1),ae=s("hr",null,null,-1),ce={class:"flex justify-center mt-4"},me=["src"];function pe(o,e,f,de,t,l){const v=n("Icon"),u=n("Button"),_=n("Card"),b=n("CoverSheet"),g=n("BookDetail"),w=n("AttachedFileStamp"),M=n("AttachedFile"),C=n("BookReference"),D=n("Activity"),E=n("RouteDetail"),B=n("ModalAcknow"),y=n("Modal");return a(),X("div",null,[i(_,null,{default:d(()=>{var r,x,k;return[s("div",ee,[s("div",{onClick:e[0]||(e[0]=ue=>o.$router.back()),class:"flex items-center text-primary-600 cursor-pointer"},[i(v,{icon:"mdi:chevron-left",class:"text-xl"}),te])]),s("div",oe,[i(_,{bodyClass:"bg-gray-100 h-[95px] flex items-center space-y-10 py-6"},{default:d(()=>[s("div",null,[i(u,{onClick:l.handleSigned,text:"บันทึกคำสั่งการ/คำเสนอ/การปฎิบัติ"},null,8,["onClick"])])]),_:1})]),s("div",se," วันที่ "+h(l.convertDate((r=t.item)==null?void 0:r.document_date))+" "+h((x=t.item)==null?void 0:x.subject)+" พ.ศ. "+h((k=t.item)==null?void 0:k.year),1),i(b,{item:t.item},null,8,["item"]),i(g,{item:t.item},null,8,["item"]),i(w,{item:t.item},null,8,["item"]),l.isMobile?m("",!0):(a(),c(M,{key:0,item:t.item},null,8,["item"])),l.isMobile?m("",!0):(a(),c(C,{key:1,item:t.item},null,8,["item"])),l.isMobile?m("",!0):(a(),c(D,{key:2,item:t.item,"onEvent:onClick":l.pdfHistory},null,8,["item","onEvent:onClick"])),l.isMobile?m("",!0):(a(),c(E,{key:3,item:t.item},null,8,["item"])),s("div",null,[i(_,{bodyClass:"bg-gray-100 h-[95px] flex items-center space-y-10 py-6"},{default:d(()=>[s("div",null,[i(u,{onClick:l.handleSigned,text:"บันทึกคำสั่งการ/คำเสนอ/การปฎิบัติ"},null,8,["onClick"])])]),_:1})])]}),_:1}),i(B,{item:t.item,title:"บันทึกคำสั่งการ/คำเสนอ/การปฎิบัติ",isOpen:t.isSigned,pinError:t.pinError,"onEvent:closeModal":e[1]||(e[1]=r=>t.isSigned=!1),"onEvent:submit":l.signedSubmit,"onEvent:pincode":e[2]||(e[2]=r=>t.pinError="")},null,8,["item","isOpen","pinError","onEvent:submit"]),t.isSuccess?(a(),c(y,{key:0,title:"",activeModal:t.isSuccess,"onEvent:closeModal":e[5]||(e[5]=r=>t.isSuccess=!1),label:"",labelClass:"btn-outline-dark",sizeClass:"w-full max-w-[700px]",centered:""},{default:d(()=>[s("div",ie,[s("div",ne,[s("div",le,[i(v,{icon:"icon-park-solid:protect",class:"text-6xl text-green-500"})]),re])]),ae,s("div",ce,[i(u,{text:"ปิด",btnClass:"btn-primary w-32 mx-2",onClick:e[3]||(e[3]=r=>t.isSuccess=!1)}),i(u,{text:"ไปหน้ารายการ",btnClass:"btn-outline-dark w-32 mx-2",onClick:e[4]||(e[4]=r=>o.$router.push("/app/issue/acknowledge"))})])]),_:1},8,["activeModal"])):m("",!0),t.isOpen?(a(),c(y,{key:1,title:"ดูรายละเอียดเอกสาร",labelClass:"btn-outline-dark",sizeClass:"w-3/4",label:"",centered:"",activeModal:t.isOpen,"onEvent:closeModal":e[6]||(e[6]=r=>t.isOpen=!1)},{default:d(()=>[s("div",null,[s("iframe",{class:"w-full h-[1000px] mt-4",src:"data:application/pdf;base64, "+t.pdfPath,frameborder:"0"},null,8,me)])]),_:1},8,["activeModal"])):m("",!0)])}const ot=J($,[["render",pe]]);export{ot as default};
