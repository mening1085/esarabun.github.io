import{D as R,S as O}from"./index-976a2577.js";import{C as T}from"./index-cb5a08aa.js";import{I as A}from"./index-8d30ace7.js";import{B as P}from"./index-c2d6eb9c.js";import{I as B}from"./index-2198f2cf.js";import{P as V}from"./index-5ddbaceb.js";import{S as j}from"./index-a56f86b1.js";import{V as F,C as G}from"./VueSelect-403231fd.js";import{S as N}from"./index-ca598517.js";import{M as U}from"./Modal-b54f1b5f.js";import{T as q}from"./index-3e8503e7.js";import{_ as z,a as f}from"./index-f91482a0.js";import{C as H}from"./index-4d060206.js";import{C as J}from"./index-1653d012.js";import{M as K}from"./index-8e7d66d6.js";import{M as L}from"./index-3891a0e1.js";import{R as Q}from"./index-e163c14d.js";import{T as W}from"./index-78f015fc.js";import{C as X}from"./index-325a54cb.js";import{A as Y}from"./AdvancedSearch-88f89aed.js";import{o as r,x as a,bj as m,aF as i,as as d,p as t,n as c,w as p,aT as w}from"./preload-helper-f37a9bec.js";import"./dom-b10fc197.js";import"./focus-management-94a631f4.js";import"./open-closed-75edfb8a.js";import"./use-resolve-button-type-d7bee841.js";import"./use-outside-click-156e41c1.js";import"./iconify-2baafea4.js";import"./vue-cleave.min-df5c8cc9.js";import"./transition-be7c09bc.js";import"./hidden-800255f5.js";import"./micro-task-89dcd6af.js";import"./index-b704274e.js";import"./ck-white-3501111f.js";import"./select-option-b2a02578.js";import"./index-8ecfca6d.js";const Z={components:{Pagination:V,InputGroup:B,Dropdown:R,Icon:A,Button:P,Card:T,MenuItem:O,Select:j,VueSelect:F,vSelect:G,Switch:N,Modal:U,Radio:Q,Textinput:q,ChangeStatus:H,ConfirmDelete:J,ModalSuccess:K,ModalError:L,Textarea:W,Checkbox:X,AdvancedSearch:Y},data(){return{modalId:null,isSuccess:!1,isShowModalAS:!1,modalRestore:!1,isShowModalReturnBook:!1,isShowModalDelete:!1,isModalDeleteSuccess:!1,isModalDeleteError:!1,errorMessage:"",messageSuccess:"ลบข้อมูล",paginate:{total:50,current:1,perpage:10,pageRange:5},modalTitle:"",formStatus:!0,searchTerm:"",keyword:"",filter:{},radioOption:"1",radioOptions:[{value:"1",label:"เปิดใช้งาน",activeClass:"ring-primary-500 border-primary-500"},{value:"0",label:"ปิดใช้งาน",activeClass:"ring-primary-500 border-primary-500"}],documentTypeOption:[],documentTypeOptions:[{value:"1",label:"อิเล็กทรอนิกส์"},{value:"2",label:"ทั่วไป (ส่งฉบับจริง)"},{value:"3",label:"รับจากอีเมล"}],bookTypeOption:[],bookTypeOptions:[{value:"1",label:"หนังสือภายนอก",title:"หนังสือภายนอก"},{value:"2",label:"หนังสือภายใน",title:"หนังสือภายใน"},{value:"3",label:"หนังสือเวียน",title:"หนังสือเวียน"}],columns:[{label:"หนังสือ",field:"book",width:"6.67%",tdClass:"text_left",thClass:"text_left"},{label:"เลขที่หนังสือ",field:"document_number",width:"13.33%",tdClass:"text_left",thClass:"text_left"},{label:"ประเภทหนังสือ",field:"document_type",width:"13.33%",tdClass:"text_left",thClass:"text_left"},{label:"เรื่อง",field:"subject",width:"46.67%",tdClass:"text_left",thClass:"text_left"},{label:"ถึง",field:"to_data.full_name",width:"13.33%",tdClass:"text_left",thClass:"text_left"},{label:"จัดการ",field:"action",width:"6.67%"}],advancedTable:[],selectedIds:[]}},created(){this.getData(1)},methods:{async getData(l){var h,_,o,n;const e=await f("documentCancelStore","get",{payload:{page:l,...this.filter}});e.status===200&&(console.log("res",e),this.advancedTable=e.data.result.data,this.paginate.total=((h=e.data.result)==null?void 0:h.total_page)*((_=e.data.result)==null?void 0:_.per_page),this.paginate.current=(o=e.data)==null?void 0:o.result.current_page,this.paginate.perpage=(n=e.data.result)==null?void 0:n.per_page)},handleSelectedRowsChange({selectedRows:l}){this.selectedIds=l.map(e=>({id:e.id}))},async onSearch(){this.isSuccess=!0,this.getData(1),this.clearModal()},handleDelete(l,e){if(l=="all"&&this.selectedIds.length==0){this.isModalDeleteError=!0,this.errorMessage="กรุณาเลือกข้อมูลที่ต้องการลบ";return}this.modalId=l=="all"?this.selectedIds:[{id:e}],this.isShowModalDelete=!0},async onDelete(l){this.isShowModalDelete=!1,console.log("onDelete",l);const e=await f("documentCancelStore","delete",{payload:l});e.status==200?(this.isModalDeleteSuccess=!0,this.messageSuccess="ลบข้อมูล",this.getData(1)):(this.isModalDeleteError=!0,this.errorMessage=e.data.message)},handleRestore(l,e){if(l=="all"&&this.selectedIds.length==0){this.isModalDeleteError=!0,this.errorMessage="กรุณาเลือกข้อมูลที่ต้องการกู้คืน";return}this.modalId=l=="all"?this.selectedIds:[{id:e}],this.modalRestore=!0},async onRetore(l){console.log("onRetore",l),this.modalRestore=!1;const e=await f("documentCancelStore","restore",{payload:l});console.log("res",e),e.status==200?(this.isModalDeleteSuccess=!0,this.messageSuccess="กู้คืนข้อมูล",this.getData(1)):(console.log("error: ",e),this.isModalDeleteError=!0,this.errorMessage=e.data.message)},clearModal(){this.isShowModalDelete=!1,this.isModalDeleteSuccess=!1,this.isModalDeleteError=!1,this.modalRestore=!1,this.isShowModalReturnBook=!1,this.isShowModalAS=!1,this.errorMessage="",this.modalId=null},async changePage(l){this.paginate.current_page=l,await this.getData(l)},closeModal(){this.modalRestore=!1,this.isShowModalReturnBook=!1,this.isShowModalAS=!1},async openModalAdvancedSearch(){this.isShowModalAS=!0},onFilter(l){this.filter=l,this.getData(1)}}},$={class:"role_managment"},ee={class:"p-6 space-y-3"},te=t("div",{class:"py-3 w-full bg-danger-500 bg-opacity-[0.16] rounded-md text-center"},[t("span",{class:"text-sm text-danger-500"},"ระบบจะลบรายการในถังขยะแบบถาวรหลังจากผ่านไป 7 วัน")],-1),oe={class:"md:flex justify-between md:space-y-0 space-y-3 items-center"},se={class:"flex gap-3"},le={class:"flex flex-wrap sm:flex-nowrap gap-3"},ae=t("div",{class:"text-center"},[t("div",{class:"text-gray-400"},"ไม่พบข้อมูล")],-1),ne={key:0},re={class:"flex space-x-1"},ie={class:"space-y-1"},de={key:0},ce={key:1},me={key:2},ue={class:"space-y-1"},pe={key:0},he=t("div",{class:"bg-yellow-500 min-w-[75px] max-w-[75px] text-center rounded text-white"}," ด่วน ",-1),_e=[he],ge={key:1},xe=t("div",{class:"bg-orange-500 min-w-[75px] max-w-[75px] text-center rounded text-white"}," ด่วนมาก ",-1),fe=[xe],ve={key:2},we=t("div",{class:"bg-red-500 min-w-[75px] max-w-[75px] text-center rounded text-white"}," ด่วนที่สุด ",-1),be=[we],ye={key:3},Se=t("div",{class:"bg-white border-2 border-blue-700 min-w-[75px] max-w-[75px] text-center rounded text-black"}," ลับ ",-1),Me=[Se],Ce={key:4},De=t("div",{class:"bg-white border-2 border-red-500 min-w-[75px] max-w-[75px] text-center rounded text-black"}," ลับมาก ",-1),ke=[De],Ie={key:5},Ee=t("div",{class:"bg-white border-2 border-yellow-500 min-w-[75px] max-w-[75px] text-center rounded text-black"}," ลับที่สุด ",-1),Re=[Ee],Oe={key:1},Te={class:"w-full"},Ae={class:"p-2 flex items-center hover:bg-gray-50 cursor-pointer"},Pe=["onClick"],Be=["onClick"],Ve={class:"py-4 px-3"},je={class:"text-lg text-slate-900"},Fe=t("span",{class:"text-green-500"},"สำเร็จ",-1),Ge={class:"text-lg text-slate-900"};function Ne(l,e,h,_,o,n){const g=i("Button"),b=i("InputGroup"),y=i("AdvancedSearch"),u=i("Icon"),S=i("router-link"),M=i("Dropdown"),C=i("Pagination"),D=i("vue-good-table"),k=i("Card"),v=i("ConfirmDelete"),I=i("ModalSuccess"),E=i("ModalError");return d(),r("div",$,[a(k,{noborder:"",bodyClass:"p-0"},{default:m(()=>[t("div",ee,[te,t("div",oe,[t("div",se,[t("div",null,[a(g,{icon:"uiw:reload",text:"กู้คืน",btnClass:"btn-primary rounded-md",onClick:e[0]||(e[0]=s=>n.handleRestore("all",""))})]),t("div",null,[a(g,{icon:"material-symbols:delete",text:"ลบถาวร",btnClass:"btn-danger rounded-md",onClick:e[1]||(e[1]=s=>n.handleDelete("all",""))})])]),t("div",le,[t("div",null,[a(b,{modelValue:o.keyword,"onUpdate:modelValue":e[2]||(e[2]=s=>o.keyword=s),placeholder:"Search",classInputGroup:"border-gray-200",type:"text",prependIcon:"heroicons-outline:search",merged:"",inputEnter:"","onEvent:inputEnter":e[3]||(e[3]=s=>n.onFilter({keyword:o.keyword}))},null,8,["modelValue"])]),t("div",null,[a(g,{icon:"mdi:filter",text:"ค้นหาขั้นสูง",btnClass:"btn-primary rounded-md h-[40px] flex items-center",onClick:e[4]||(e[4]=s=>o.isShowModalAS=!o.isShowModalAS)})])])]),a(y,{isOpen:o.isShowModalAS,"onEvent:close":e[5]||(e[5]=s=>o.isShowModalAS=!1),"onEvent:submit":n.onFilter},null,8,["isOpen","onEvent:submit"])]),a(D,{columns:o.columns,styleClass:" vgt-table bordered lesspadding2",rows:o.advancedTable,"pagination-options":{enabled:!0,perPage:o.paginate.perpage},"sort-options":{enabled:!1},"select-options":{enabled:!0,selectOnCheckboxOnly:!0,selectioninfoClass:"custom-class",selectionText:"rows selected",clearSelectionText:"clear"},onSelectedRowsChange:n.handleSelectedRowsChange},{emptystate:m(()=>[ae]),"table-row":m(s=>[s.column.field=="book"?(d(),r("span",ne,[t("div",re,[t("div",ie,[s.row.document_type=="e-document"?(d(),r("div",de,[a(u,{icon:"emojione-monotone:letter-e",class:"handle text-[25px] text-blue-700"})])):c("",!0),s.row.document_type=="email-document"?(d(),r("div",ce,[a(u,{icon:"mdi:email",class:"handle text-[25px] text-orange-500"})])):c("",!0),s.row.document_type=="general-document"?(d(),r("div",me,[a(u,{icon:"emojione-monotone:letter-p",class:"handle text-[25px] text-yellow-500"})])):c("",!0)]),t("div",ue,[s.row.urgency_level=="ด่วน"?(d(),r("div",pe,_e)):c("",!0),s.row.urgency_level=="ด่วนมาก"?(d(),r("div",ge,fe)):c("",!0),s.row.urgency_level=="ด่วนที่สุด"?(d(),r("div",ve,be)):c("",!0),s.row.secrecy_level=="ลับ"?(d(),r("div",ye,Me)):c("",!0),s.row.secrecy_level=="ลับมาก"?(d(),r("div",Ce,ke)):c("",!0),s.row.secrecy_level=="ลับที่สุด"?(d(),r("div",Ie,Re)):c("",!0)])])])):c("",!0),s.column.field=="action"?(d(),r("span",Oe,[a(M,{classMenuItems:"right-full  w-[220px] top-[110%] "},{menus:m(()=>[t("div",null,[t("ul",Te,[t("li",null,[a(S,{to:"/app/delete-list/delete-document/"+s.row.id},{default:m(()=>[t("div",Ae,[a(u,{icon:"grommet-icons:document-text",class:"text-xl mr-2"}),p(" ดูรายละเอียด ")])]),_:2},1032,["to"])]),t("li",null,[t("div",{class:"p-2 flex items-center hover:bg-gray-50 cursor-pointer",onClick:x=>n.handleRestore("single",s.row.id)},[a(u,{icon:"uiw:reload",class:"text-xl mr-2"}),p(" กู้คืน ")],8,Pe)]),t("li",null,[t("div",{class:"p-2 flex items-center hover:bg-gray-50 cursor-pointer",onClick:x=>n.handleDelete("single",s.row.id)},[a(u,{icon:"material-symbols:delete",class:"text-xl mr-2"}),p(" ลบถาวร ")],8,Be)])])])]),default:m(()=>[a(u,{icon:"pepicons-pencil:dots-x",class:"text-gray-400 text-4xl"})]),_:2},1024)])):c("",!0)]),"pagination-bottom":m(s=>[t("div",Ve,[a(C,{total:o.paginate.total,current:o.paginate.current,"per-page":o.paginate.perpage,pageRange:o.paginate.pageRange,onPageChanged:e[6]||(e[6]=x=>n.changePage(x)),pageChanged:s.pageChanged,perPageChanged:s.perPageChanged,textAfterInput:"ไปที่หน้า",enableSearch:"",enableInput:""},null,8,["total","current","per-page","pageRange","pageChanged","perPageChanged"])])]),_:1},8,["columns","rows","pagination-options","onSelectedRowsChange"])]),_:1}),a(v,{title:"ยืนยันการกู้คืนข้อมูล",isOpen:o.modalRestore,modalId:o.modalId,errorMessage:o.errorMessage,"onEvent:delete":n.onRetore,"onEvent:close":n.clearModal},null,8,["isOpen","modalId","errorMessage","onEvent:delete","onEvent:close"]),a(v,{title:"ยืนยันการลบข้อมูล",isOpen:o.isShowModalDelete,modalId:o.modalId,errorMessage:o.errorMessage,"onEvent:delete":n.onDelete,"onEvent:close":n.clearModal},null,8,["isOpen","modalId","errorMessage","onEvent:delete","onEvent:close"]),a(I,{title:"",isOpen:o.isModalDeleteSuccess,"onEvent:closeModal":e[7]||(e[7]=s=>o.isModalDeleteSuccess=!1)},{default:m(()=>[t("h4",je,[p(w(o.messageSuccess)+" ",1),Fe])]),_:1},8,["isOpen"]),a(E,{title:"",isOpen:o.isModalDeleteError,"onEvent:closeModal":e[8]||(e[8]=s=>{o.isModalDeleteError=!1,o.errorMessage=""})},{default:m(()=>[t("h4",Ge,w(o.errorMessage),1)]),_:1},8,["isOpen"])])}const yt=z(Z,[["render",Ne]]);export{yt as default};
