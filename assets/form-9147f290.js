import{E as Ql,M as Wl,a as Xl,S as Zl,_ as $l}from"./garudaLogo1-a5ed496a.js";import{C as es}from"./index-cb5a08aa.js";import{V as ts,C as os}from"./VueSelect-403231fd.js";import{M as ls}from"./index-b704274e.js";import{R as ss}from"./index-e163c14d.js";import{B as as}from"./index-c2d6eb9c.js";import{I as is}from"./index-8d30ace7.js";import{I as ds}from"./index-2198f2cf.js";import{T as ns}from"./index-78f015fc.js";import{T as rs}from"./index-3e8503e7.js";import{S as cs}from"./index-fcbb1db2.js";import{T as _s}from"./TextValid-d1c607fc.js";import{M as us}from"./index-11a388f0.js";import{M as vs}from"./index-73eccad8.js";import{u as ms,a as m}from"./vee-validate.esm-bf91438b.js";import{aA as r,ay as ps,k as C,al as bs,be as je,o as p,x as s,bj as V,m as ve,n as E,aF as y,as as c,p as e,bo as $o,ac as me,F as T,aD as U,w,aT as u}from"./preload-helper-f37a9bec.js";import{c as Oe,a as _}from"./array-6ac4c54d.js";import{_ as fs,a as Ge,u as gs,g as Ke,c as xs}from"./index-f91482a0.js";import{d as B}from"./dayjs.min-472eb357.js";import{o as hs,f as ys,s as ks,a as Ms,i as ws,j as Vs,k as Ss,r as Fs,c as el}from"./select-option-b2a02578.js";import{p as Cs}from"./pdfkit-cbb5e47f.js";import{C as zs}from"./index-8ecfca6d.js";import{N as js}from"./index-f32159fc.js";import{T as Os}from"./index-b52aeb81.js";import{M as Ds}from"./index-3891a0e1.js";import"./tabs-cf3e0d3b.js";import"./dom-b10fc197.js";import"./focus-management-94a631f4.js";import"./use-resolve-button-type-d7bee841.js";import"./hidden-800255f5.js";import"./micro-task-89dcd6af.js";import"./index-325a54cb.js";import"./ck-white-3501111f.js";import"./index-5ddbaceb.js";import"./index-a56f86b1.js";import"./transition-be7c09bc.js";import"./open-closed-75edfb8a.js";import"./use-outside-click-156e41c1.js";import"./iconify-2baafea4.js";import"./vue-cleave.min-df5c8cc9.js";const Is={components:{CFlatPickr:zs,Button:as,Icon:is,Textinput:rs,InputGroup:ds,Textarea:ns,Card:es,VueSelect:ts,vSelect:os,Modal:ls,Radio:ss,Editor:Ql,Stepper:cs,TextValid:_s,ModalOrganizeUser:Wl,ModalOrganizeOut:us,ModalBookRef:Xl,ModalOrganizeIn:vs,pdfkit:Cs,ScannerModal:Zl,NavigationPath:js,Tooltip:Os,ModalError:Ds},data(){return{plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code help wordcount"],toolbar:"undo redo | styleselect | fontsizeselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image | print preview media fullscreen | forecolor backcolor emoticons | help",pdfTest:"",scannerActive:!1}},setup(){const D=r(""),l=r(!1),De=r(!1),t=r(!1),P=r(!1),Qe=r(!1),R=gs(),F=r([{id:1,title:"ข้อมูลเบื้องต้น"},{id:2,title:"ออกเลขรับ"},{id:3,title:"รูปแบบหนังสือ/เสนอ"}]),N=r([{id:1,title:"ข้อมูลเบื้องต้น"},{id:2,title:"ออกเลขรับ"},{id:3,title:"รูปแบบหนังสือ/เสนอ"}]),k=r([]),I=r([]),S=r(""),j=r([]),H=r([]),M=r(el),z=r(el),ee=r([]),pe=r([]),te=r([]),J=r(""),oe=r(null),be=r(null),fe=r(null),L=r([]),A=r([]),v=r([]),Y=r([]),o=r([]),b=r([]),f=r([]),le=r([]),Ie=r(""),ge=r(""),xe=r(""),he=r(""),Le=r(""),tl=r([{value:!0,label:"ออกเลขรับหนังสือ"},{value:!1,label:"ลงชื่อรับ แต่ไม่ออกเลขรับหนังสือ"}]),G=r(0),K=ps({isReceiveMail:!1,isModalFromOut:!1,isModalFromIn:!1,isModalTo:!1,isModalBookRef:!1,isShowDialogPdf:!1,isSuccess:!1,isDuplicateCase:!1}),We=C(()=>Ke().accept_document),ol=C(()=>Ke()),Xe=C(()=>{var a;return(a=Ke().acceptList[1])==null?void 0:a.file_size_limit});let ll=We.value.split(", ");const sl=C(()=>{switch(G.value){case 0:return Ze;case 1:return he.value==="หนังสือรับจากอีเมล"&&(console.log("documentStatus.value",he.value),$e=Oe().shape({detail_receive:_().nullable().required("กรุณากรอกรายละเอียด"),subject_receive:_().nullable().required("กรุณากรอกเรื่อง")})),$e;case 2:return al;default:return Ze}});let Ze=Oe().shape({document_flow_id:_().required("กรุณาเลือกเส้นทางหนังสือ").nullable(),book_type:_().required("กรุณาเลือกประเภทหนังสือ").nullable(),document_type:_().required("กรุณาเลือกประเภทเอกสาร").nullable(),year:_().nullable(),document_number:_().nullable().required("กรุณากรอกเลขที่หนังสือ"),document_date:_().nullable().required("กรุณาเลือกวันที่ลงหนังสือ"),from_type:_().nullable().required("กรุณาระบุว่ามาจากหน่วยงานไหน"),from_id:_().nullable().required("กรุณาระบุว่ามาจากหน่วยงานไหน"),to_type:_().nullable().required("กรุณาระบุว่าจะส่งหนังสือไปหน่วยงานไหน"),to_id:_().nullable().required("กรุณาระบุว่าจะส่งหนังสือไปหน่วยงานไหน"),subject:_().required("กรุณากรอกเรื่อง").nullable(),attn:_().required("กรุณากรอกเรียน").nullable(),detail:_().required("กรุณากรอกรายละเอียด").nullable(),document_objective_id:_().required("กรุณากรอกวัตถุประสงค์").nullable(),document_format:_().required("กรุณากรอกรูปแบบหนังสือ").nullable(),urgency_level:_().required("กรุณากรอกชั้นความเร่งด่วน").nullable(),secrecy_level:_().required("กรุณากรอกชั้นความลับ").nullable(),have_generate_document:_().nullable(),create_qr_code:_().nullable(),follow_up_document:_().nullable(),follow_up_document_date:_().nullable()}),$e=Oe().shape({receiving_format:_().required("กรุณาเลือกรูปแบบการรับ").nullable(),action_detail:_().required("กรุณากรอกรายละเอียดการปฏิบัติ").nullable(),have_initial_number:_().required("การลงทะเบียนรับ").nullable(),detail_receive:_().nullable(),subject_receive:_().nullable()}),al=Oe().shape({book_pdf_government:_().nullable().required("กรุณากรอกส่วนราชการ"),book_pdf_number:_().nullable().required("กรุณากรอกเลขที่"),book_pdf_date:_().nullable().required("กรุณากรอกวันที่"),book_pdf_detail:_().nullable().required("กรุณากรอกรายละเอียด")});const{handleSubmit:il,resetForm:An}=ms({validationSchema:sl}),{value:Q,errorMessage:dl}=m("document_flow_id"),{value:W,errorMessage:nl}=m("book_type"),{value:X,errorMessage:rl}=m("document_type"),{value:Te,errorMessage:cl}=m("year"),{value:Ue,errorMessage:_l}=m("document_number"),{value:Re,errorMessage:ul}=m("document_date"),{value:ye,errorMessage:vl}=m("from_type"),{value:se,errorMessage:ml}=m("from_id"),{value:ke,errorMessage:pl}=m("to_type"),{value:Me,errorMessage:bl}=m("to_id"),{value:ae,errorMessage:fl}=m("subject"),{value:ie,errorMessage:gl}=m("attn"),{value:we,errorMessage:xl}=m("detail"),{value:Ye,errorMessage:hl}=m("document_objective_id"),{value:qe,errorMessage:yl}=m("document_format"),{value:Ee,errorMessage:kl}=m("urgency_level"),{value:Be,errorMessage:Ml}=m("secrecy_level"),{value:de,errorMessage:wl}=m("have_generate_document"),{value:Ne,errorMessage:Vl}=m("create_qr_code"),{value:Z,errorMessage:Sl}=m("follow_up_document"),{value:Ve,errorMessage:Pn}=m("follow_up_document_date"),{value:Ae,errorMessage:Fl}=m("receiving_format"),{value:ne,errorMessage:Cl}=m("action_detail"),{value:Pe,errorMessage:zl}=m("have_initial_number"),{value:He,errorMessage:jl}=m("detail_receive"),{value:Je,errorMessage:Ol}=m("subject_receive"),{value:Se,errorMessage:Dl}=m("book_pdf_number"),{value:Fe,errorMessage:Il}=m("book_pdf_government"),{value:Ce,errorMessage:Ll}=m("book_pdf_date"),{value:re,errorMessage:Tl}=m("book_pdf_detail");bs(async()=>{var a,n,x,h,_e,d,O,ue,q,ze,$,tt,ot,lt,st,at,it,dt,nt,rt,ct,_t,ut,vt,mt,pt,bt,ft,gt,xt,ht,yt,kt,Mt,wt,Vt,St,Ft,Ct,zt,jt,Ot,Dt,It,Lt,Tt,Ut,Rt,Yt,qt,Et,Bt,Nt,At,Pt,Ht,Jt,Gt,Kt,Qt,Wt,Xt,Zt,$t,eo,to,oo,lo,so,ao,io,no,ro,co,_o,uo,vo,mo,po,bo,fo,go,xo,ho,yo,ko,Mo,wo,Vo,So,Fo,Co,zo,jo,Oo,Do,Io,Lo,To,Uo,Ro,Yo,qo,Eo,Bo,No,Ao,Po,Ho,Jo,Go,Ko,Qo,Wo,Xo,Zo;if(console.log("router.currentRoute.value.params.id",R.currentRoute.value.params.id),R.currentRoute.value.params.id){const{data:i,status:Kl}=await Ge("documentStore","edit",{payload:R.currentRoute.value.params.id});Kl===200&&(console.log("data",i),console.log("data.result?.sarabun_role_list",(a=i.result)==null?void 0:a.sarabun_role_list),j.value=(n=i.result)==null?void 0:n.document_flow_receive_list.map(g=>({...g,label:g.flow_name,value:g.id})),De.value=(h=(x=i.result.permission)==null?void 0:x.sarabun_role)==null?void 0:h.can_attach_file,t.value=(d=(_e=i.result.permission)==null?void 0:_e.sarabun_role)==null?void 0:d.can_scan_file,he.value=(ue=(O=i.result)==null?void 0:O.data)==null?void 0:ue.document_type,ee.value=(q=i.result)==null?void 0:q.document_list,H.value=(ze=i.result)==null?void 0:ze.user_list,pe.value=($=i.result)==null?void 0:$.outside_organization,te.value=(tt=i.result)==null?void 0:tt.inside_organization,le.value=(ot=i.result)==null?void 0:ot.document_objective_list.map(g=>({label:g.name,value:g.id})),S.value=(st=(lt=i.result)==null?void 0:lt.data)==null?void 0:st.receive_organization_id,Q.value=(it=(at=i.result)==null?void 0:at.data)==null?void 0:it.document_flow_id,W.value=(nt=(dt=i.result)==null?void 0:dt.data)==null?void 0:nt.book_type,X.value=(ct=(rt=i.result)==null?void 0:rt.data)==null?void 0:ct.document_type,Te.value=(ut=(_t=i.result)==null?void 0:_t.data)!=null&&ut.year?(mt=(vt=i.result)==null?void 0:vt.data)==null?void 0:mt.year:B().locale("th").add(543,"year").format("YYYY"),Ue.value=(bt=(pt=i.result)==null?void 0:pt.data)==null?void 0:bt.document_number,Re.value=(gt=(ft=i.result)==null?void 0:ft.data)==null?void 0:gt.document_date,ye.value=(ht=(xt=i.result)==null?void 0:xt.data)==null?void 0:ht.from_type,se.value=(kt=(yt=i.result)==null?void 0:yt.data)==null?void 0:kt.from_id,J.value=((wt=(Mt=i.result)==null?void 0:Mt.data)==null?void 0:wt.book_type)=="outside"?(Ft=(St=(Vt=i.result)==null?void 0:Vt.data)==null?void 0:St.from_data)==null?void 0:Ft.name:(jt=(zt=(Ct=i.result)==null?void 0:Ct.data)==null?void 0:zt.from_data)==null?void 0:jt.organization_name,ke.value=(Dt=(Ot=i.result)==null?void 0:Ot.data)==null?void 0:Dt.to_type,Me.value=(Lt=(It=i.result)==null?void 0:It.data)==null?void 0:Lt.to_id,oe.value={full_name:(Rt=(Ut=(Tt=i.result)==null?void 0:Tt.data)==null?void 0:Ut.to_data)==null?void 0:Rt.full_name,organization_name:(Bt=(Et=(qt=(Yt=i.result)==null?void 0:Yt.data)==null?void 0:qt.to_data)==null?void 0:Et.organization)==null?void 0:Bt.organization_name},ae.value=(At=(Nt=i.result)==null?void 0:Nt.data)==null?void 0:At.subject,ie.value=(Ht=(Pt=i.result)==null?void 0:Pt.data)==null?void 0:Ht.attn,we.value=(Gt=(Jt=i.result)==null?void 0:Jt.data)==null?void 0:Gt.detail,Ye.value=(Qt=(Kt=i.result)==null?void 0:Kt.data)==null?void 0:Qt.document_objective_id,qe.value=(Xt=(Wt=i.result)==null?void 0:Wt.data)==null?void 0:Xt.document_format,Ee.value=($t=(Zt=i.result)==null?void 0:Zt.data)==null?void 0:$t.urgency_level,Be.value=(to=(eo=i.result)==null?void 0:eo.data)==null?void 0:to.secrecy_level,o.value=(lo=(oo=i.result)==null?void 0:oo.data)==null?void 0:lo.ref_document,de.value=(ao=(so=i.result)==null?void 0:so.data)==null?void 0:ao.have_generate_document,Ne.value=(no=(io=i.result)==null?void 0:io.data)==null?void 0:no.create_qr_code,Z.value=(co=(ro=i.result)==null?void 0:ro.data)==null?void 0:co.follow_up_document,Ve.value=(uo=(_o=i.result)==null?void 0:_o.data)==null?void 0:uo.follow_up_date,xe.value=(mo=(vo=i.result)==null?void 0:vo.data)==null?void 0:mo.email_receive,ge.value=(bo=(po=i.result)==null?void 0:po.data)==null?void 0:bo.organization_receive,He.value=(go=(fo=i.result)==null?void 0:fo.data)==null?void 0:go.detail_receive,Je.value=(ho=(xo=i.result)==null?void 0:xo.data)==null?void 0:ho.subject_receive,b.value=(ko=(yo=i.result)==null?void 0:yo.data)==null?void 0:ko.document_attachments.map(g=>({name:g.file_name,size:g.file_size,date_input:B(g.created_at).locale("th").add(543,"year").format("DD MMM YYYY HH:mm")})),v.value=(wo=(Mo=i.result)==null?void 0:Mo.data)==null?void 0:wo.document_attachments.map(g=>({id:g.id,name:g.file_name,size:g.file_size,date_input:B(g.created_at).locale("th").add(543,"year").format("DD MMM YYYY HH:mm")})),(So=(Vo=i.result)==null?void 0:Vo.data)!=null&&So.document_stamps&&((Co=(Fo=i.result)==null?void 0:Fo.data)==null?void 0:Co.document_stamps.length)>0&&(console.log("data.result?.data?.document_stamps.length ",(jo=(zo=i.result)==null?void 0:zo.data)==null?void 0:jo.document_stamps),f.value=(Do=(Oo=i.result)==null?void 0:Oo.data)==null?void 0:Do.document_stamps.map(g=>({id:g.id,name:g.file_name,size:g.file_size,date_input:B(g.created_at).locale("th").add(543,"year").format("DD MMM YYYY HH:mm")})),Y.value=(Lo=(Io=i.result)==null?void 0:Io.data)==null?void 0:Lo.document_stamps.map(g=>({id:g.id,name:g.file_name,size:g.file_size,date_input:B(g.created_at).locale("th").add(543,"year").format("DD MMM YYYY HH:mm")}))),Ae.value=(Uo=(To=i.result)==null?void 0:To.data)==null?void 0:Uo.receiving_format,ne.value=(Yo=(Ro=i.result)==null?void 0:Ro.data)==null?void 0:Yo.action_detail,Pe.value=(Eo=(qo=i.result)==null?void 0:qo.data)==null?void 0:Eo.have_initial_number,Fe.value=(No=(Bo=i.result)==null?void 0:Bo.data)==null?void 0:No.book_pdf_government,Se.value=(Po=(Ao=i.result)==null?void 0:Ao.data)!=null&&Po.book_pdf_number?(Jo=(Ho=i.result)==null?void 0:Ho.data)==null?void 0:Jo.book_pdf_number:(Ko=(Go=et.value)==null?void 0:Go.organization)==null?void 0:Ko.organization_code,Ce.value=(Wo=(Qo=i.result)==null?void 0:Qo.data)==null?void 0:Wo.book_pdf_date,re.value=(Zo=(Xo=i.result)==null?void 0:Xo.data)==null?void 0:Zo.book_pdf_detail)}});const Ul=C(()=>hs),Rl=C(()=>ys),Yl=C(()=>ks),ql=C(()=>Ms),El=C(()=>ws),Bl=C(()=>Vs),Nl=C(()=>Ss),Al=C(()=>Fs),et=C(()=>xs().userInfo);je(Q,(a,n)=>{if(z.value=M.value,a){J.value="",se.value="",console.log("document_flow_id",Q.value);const x=j.value.find(h=>h.id===Q.value);x&&(console.log("document_flow.doc_type",x),W.value=x.doc_type,x.secret_level!=="ปกติ"?(console.log("secret_level",x.secret_level),z.value=z.value.filter(h=>h.label!=="ปกติ")):z.value=z.value.filter(h=>h.label=="ปกติ"))}else if(W.value="",S.value&&X.value=="หนังสือรับจากอีเมล")return X.value}),je(Z,(a,n)=>{console.log("follow_up_document",Z.value),Z.value||(Ve.value="")}),je(we,(a,n)=>{re.value=a}),je(de,(a,n)=>{F.value=N.value,de.value===!1&&(F.value=F.value.filter(x=>x.id!=3),console.log("steps",F))});const Pl=a=>a?B(a).locale("th").add(543,"year").format("DD/MM/YYYY hh:m"):"-",Hl=a=>a?B(a).locale("th").add(543,"year").format("DD/MM/YYYY"):"-",Jl=il(async()=>{var x,h,_e;let a=F.value.length;console.log("totalSteps",a);const n=G.value===a-1;if(console.log("isLastStep",n),n){G.value=a-1;let d=new FormData;if(d.append("document_flow_id",Q.value),d.append("book_type",W.value),d.append("document_type",X.value),d.append("year",Te.value),d.append("document_number",Ue.value),d.append("document_date",Re.value),d.append("from_type",ye.value),d.append("from_id",se.value),d.append("to_type",ke.value),d.append("to_id",Me.value),d.append("subject",ae.value),d.append("attn",ie.value),d.append("detail",we.value),d.append("document_objective_id",Ye.value),d.append("document_format",qe.value),d.append("urgency_level",Ee.value),d.append("secrecy_level",Be.value),d.append("ref_document",JSON.stringify(o.value.map(O=>({ref_document_id:O.id})))),d.append("have_generate_document",de.value),d.append("create_qr_code",Ne.value),d.append("follow_up_document",Z.value),d.append("follow_up_document_date",Ve.value),L.value.forEach(O=>{d.append("file",O.file)}),A.value.forEach(O=>{d.append("document_stamps",O.file)}),d.append("receiving_format",Ae.value),d.append("action_detail",ne.value),d.append("have_initial_number",Pe.value),d.append("organization_receive",ge.value),d.append("email_receive",xe.value),d.append("subject_receive",Je.value),d.append("detail_receive",He.value),d.append("book_pdf_government",Fe.value),d.append("book_pdf_number",Se.value),d.append("book_pdf_date",Ce.value),d.append("book_pdf_subject",ae.value),d.append("book_pdf_attn",ie.value),d.append("book_pdf_detail",re.value),R.currentRoute.value.params.id){const O=v.value.length>0?v.value.map($=>$.id):[];console.log("doc_att_ids",O),d.append("document_attachments",JSON.stringify(O));const ue=Y.value.length>0?Y.value.map($=>$.id):[];console.log("doc_stamp_att_ids",ue),d.append("document_stamps_ids",JSON.stringify(ue));const{data:q,status:ze}=await Ge("pendingStore","updateReceive",{payload:{id:R.currentRoute.value.params.id,data:d}});ze===200?(console.log("success",q),((x=q.result)==null?void 0:x.is_duplicate_case)==!1?X.value=="หนังสือรับจากอีเมล"?(K.isReceiveMail=!0,I.value=q.result,Le.value=(h=q.result)==null?void 0:h.id):(K.isSuccess=!0,Le.value=(_e=q.result)==null?void 0:_e.id):(k.value=q.result,K.isDuplicateCase=!0)):console.log("error")}}else G.value++}),Gl=()=>{G.value--},ce=(a,n)=>{K[a]=n,console.log(":c")};return{fileErrorMessage:D,isFileSizeError:l,afterScanStampComplete:a=>{let n=new Date;P.value=!1,console.log(a),A.value.push({file:a,date_input:n}),f.value.push({name:a.name,size:a.size,date_input:n})},afterScanComplete:a=>{let n=new Date;P.value=!1,console.log(a),ll.includes(a.type)&&Xe.value*1024*1024>=a.size?(L.value.push({file:a,date_input:n}),b.value.push({name:a.name,size:a.size,date_input:n})):(l.value=!0,D.value="ชนิดของไฟล์ไม่อนู่ในรายการที่อนุญาต")},pdfModal:P,pdfModalStamp:Qe,duplicateList:k,acceptList:We,GeneralStore:ol,actionList:I,checkReceiveOrgId:S,document_flow_id:Q,document_flow_id_error:dl,book_type:W,book_type_error:nl,document_type:X,document_type_error:rl,year:Te,year_error:cl,document_number:Ue,document_number_error:_l,document_date:Re,document_date_error:ul,from_type:ye,from_type_error:vl,from_id:se,from_id_error:ml,to_type:ke,to_type_error:pl,to_id:Me,to_id_error:bl,subject:ae,subject_error:fl,attn:ie,attn_error:gl,detail:we,detail_error:xl,document_objective_id:Ye,document_objective_id_error:hl,document_format:qe,document_format_error:yl,urgency_level:Ee,urgency_level_error:kl,secrecy_level:Be,secrecy_level_error:Ml,files:L,ref_document:o,have_generate_document:de,have_generate_document_error:wl,create_qr_code:Ne,create_qr_code_error:Vl,follow_up_document:Z,follow_up_document_error:Sl,follow_up_document_date:Ve,receiving_format:Ae,receiving_format_error:Fl,action_detail:ne,action_detail_error:Cl,have_initial_number:Pe,have_initial_number_error:zl,detail_receive:He,detail_receive_error:jl,subject_receive:Je,subject_receive_error:Ol,organization_receive:ge,email_receive:xe,book_pdf_government:Fe,book_pdf_government_error:Il,book_pdf_number:Se,book_pdf_number_error:Dl,book_pdf_date:Ce,book_pdf_date_error:Ll,book_pdf_detail:re,book_pdf_detail_error:Tl,steps:F,stepNumber:G,isModal:K,outside_organization:pe,inside_organization:te,organization_name_from:J,user_item:oe,user_list:H,fileInput:be,stampFileInput:fe,previewFile:b,previewStampFiles:f,stampFiles:A,document_attachments:v,document_stamps:Y,book_ref_list:ee,document_objective_list:le,have_initial_number_list:tl,pdfPath:Ie,documentStatus:he,modalId:Le,checkUploadFile:De,checkScanFile:t,document_flow_list:j,objectiveOptions:Ul,bookTypeOptions:Rl,speedLevelOptions:Yl,secretLevelOptionDefault:M,secretLevelOptions:z,bookFormatOptions:ql,documentTypeOptions:El,createOptions:Bl,followOptions:Nl,receiveTypeOptions:Al,userInfo:et,formatDateTime:Pl,formatDate:Hl,submit:Jl,prev:Gl,openModalAction:ce,setFromTo:(a,n)=>{var x;if(console.log("type",a),console.log("data",n),a=="from_type")ye.value=W.value=="inside"?"organizations":"outside_organization",se.value=n.id,J.value=n.lv1_name==null?n.name:n.name+" ("+n.lv1_name+")",xe.value=n.email,ge.value=n.name,ce("isModalFromOut",!1),ce("isModalFromIn",!1);else{ke.value="users",Me.value=n.id;const h={full_name:n.full_name,organization_name:(x=n.organization)==null?void 0:x.organization_name};oe.value=h,ce("isModalTo",!1)}},setBookRef:a=>{console.log("data setBookRef",a),o.value=a.map(n=>({id:n.id,subject:n.subject})),ce("isModalBookRef",!1)},removeDocRef:a=>{o.value.splice(a,1)},uploadFile:async a=>{let n=new Date,x=B(n).locale("th").add(543,"year").format("DD MMM YYYY HH:mm"),h=a.target.files[0];h&&Xe.value*1024*1024>=h.size?(L.value.push({file:h,date_input:x}),b.value.push({name:h.name,size:h.size,date_input:x}),a.target.value=""):(l.value=!0,D.value="ขนาดของไฟล์ไม่อนู่ในรายการที่อนุญาต",a.target.value="")},removeFile:a=>{b.value.splice(a,1),L.value.splice(a,1),R.currentRoute.value.params.id&&v.value.splice(a,1)},handleUploadFile:()=>{be.value.click()},uploadStampFile:async a=>{let n=new Date,x=B(n).locale("th").add(543,"year").format("DD MMM YYYY HH:mm");const h=a.target.files[0];A.value.push({file:h,date_input:x}),f.value.push({name:h.name,size:h.size,date_input:x})},removeStampFile:a=>{console.log("index",a),f.value.splice(a,1),A.value.splice(a,1),R.currentRoute.value.params.id&&Y.value.splice(a,1),console.log("previewStampFiles",f.value),console.log("stampFiles",A.value),console.log("document_stamps",Y.value)},handleUploadStampFile:()=>{fe.value.click()},setActionDetail:a=>{ne.value=(ne.value??"")+a.label},previewPDF:async()=>{const a={book_pdf_government:Fe.value,book_pdf_number:Se.value,book_pdf_date:Ce.value,book_pdf_subject:ae.value,book_pdf_attn:ie.value,book_pdf_detail:re.value},{data:n,status:x}=await Ge("documentStore","previewPDF",{payload:a});x===200?(console.log("data",n),Ie.value=n.result,K.isShowDialogPdf=!0):console.log("error")}}},mounted(){},methods:{}},Ls=e("div",{class:"mb-6"},"แบบฟอร์มแก้ไขหนังสือรับ",-1),Ts={class:"conten-box mt-14 border-t border-slate-100 dark:border-slate-700 -mx-6 px-6 pt-6"},Us={key:0},Rs={class:"list list-odd space-y-1 px-12"},Ys={class:"py-4 flex p-3 gap-4"},qs=e("div",{class:"pt-3 text-end basis-1/4"},[w(" เส้นทางหนังสือ "),e("span",{class:"text-red-600"},"*")],-1),Es={class:"basis-2/4"},Bs={class:"py-4 flex p-3 gap-4"},Ns=e("div",{class:"text-end basis-1/4"},[w(" ประเภทหนังสือ "),e("span",{class:"text-red-600"},"*")],-1),As={class:"basis-2/4"},Ps={class:"flex gap-5"},Hs={key:0,class:"py-4 flex p-3 gap-4"},Js=e("div",{class:"text-end basis-1/4"},[w(" ประเภทเอกสาร "),e("span",{class:"text-red-600"},"*")],-1),Gs={class:"basis-2/4"},Ks={class:"flex gap-5"},Qs={key:1},Ws={key:0,class:"py-4 flex p-3 gap-4"},Xs=e("div",{class:"text-end basis-1/4"},[w(" ประเภทเอกสาร "),e("span",{class:"text-red-600"},"*")],-1),Zs={class:"basis-2/4 flex gap-3"},$s={key:1,class:"py-4 flex p-3 gap-4"},ea=e("div",{class:"text-end basis-1/4"},[w(" ประเภทเอกสาร "),e("span",{class:"text-red-600"},"*")],-1),ta={class:"basis-2/4 flex gap-3"},oa={class:"py-4 flex p-3 gap-4"},la=e("div",{class:"text-end basis-1/4 pt-2"},"ปี",-1),sa={class:"basis-2/4 flex gap-5"},aa={class:"py-4 flex p-3 gap-4"},ia=e("div",{class:"text-end basis-1/4 pt-2"},[w(" เลขที่หนังสือ "),e("span",{class:"text-red-600"},"*")],-1),da={class:"basis-2/4 flex gap-5"},na={class:"py-4 flex p-3 gap-4"},ra=e("div",{class:"text-end basis-1/4 pt-2"},[w(" หนังสือลงวันที่ "),e("span",{class:"text-red-600"},"*")],-1),ca={class:"basis-2/4"},_a={class:"py-4 flex p-3 gap-4"},ua=e("div",{class:"text-end basis-1/4 pt-2"},[w(" จาก "),e("span",{class:"text-red-600"},"*")],-1),va={class:"basis-2/4"},ma={class:"mt-2"},pa={class:"py-4 flex p-3 gap-4"},ba=e("div",{class:"text-end basis-1/4 pt-2"},[w(" ถึง "),e("span",{class:"text-red-600"},"*")],-1),fa={class:"basis-2/4"},ga={class:"mt-2"},xa={class:"text-md ell-1"},ha={class:"text-sm ell-1 text-gray-500"},ya={class:"py-4 flex p-3 gap-4"},ka=e("div",{class:"text-end basis-1/4 pt-2"},[w(" เรื่อง "),e("span",{class:"text-red-600"},"*")],-1),Ma={class:"basis-2/4"},wa={class:"py-4 flex p-3 gap-4"},Va=e("div",{class:"text-end basis-1/4 pt-2"},[w(" เรียน "),e("span",{class:"text-red-600"},"*")],-1),Sa={class:"basis-2/4"},Fa={class:"py-4 flex p-3 gap-4"},Ca=e("div",{class:"text-end basis-1/4 pt-2"},[w(" รายละเอียด/เนื้อหาสำคัญ "),e("span",{class:"text-red-600"},"*")],-1),za={class:"basis-2/4"},ja={class:"py-4 flex p-3 gap-4"},Oa=e("div",{class:"text-end basis-1/4 pt-2"},[w(" วัตถุประสงค์ "),e("span",{class:"text-red-600"},"*")],-1),Da={class:"basis-2/4"},Ia={class:"py-4 flex p-3 gap-4"},La=e("div",{class:"text-end basis-1/4 pt-2"},[w(" รูปแบบหนังสือ "),e("span",{class:"text-red-600"},"*")],-1),Ta={class:"basis-2/4"},Ua={class:"py-4 flex p-3 gap-4"},Ra=e("div",{class:"text-end basis-1/4 pt-2"},[w(" ชั้นความเร็ว "),e("span",{class:"text-red-600"},"*")],-1),Ya={class:"basis-2/4"},qa={class:"py-4 flex p-3 gap-4"},Ea=e("div",{class:"text-end basis-1/4 pt-2"},[w(" ชั้นความลับ "),e("span",{class:"text-red-600"},"*")],-1),Ba={class:"basis-2/4"},Na={class:"py-4 flex p-3 gap-4"},Aa=e("div",{class:"text-end basis-1/4 pt-2"}," เอกสารเเนบประทับเลขรับ ",-1),Pa={class:"basis-2/4"},Ha={class:"gap-3 flex"},Ja={class:"flex items-center justify-between"},Ga={class:"shrink w-[20px]"},Ka={class:"basis-full pl-4"},Qa={class:"text-md ell-1"},Wa={class:"text-sm text-gray-500 flex items-center"},Xa={class:"basis-1/2"},Za={class:"basis-1/2"},$a={class:"shrink w-[20px]"},ei={class:"py-4 flex p-3 gap-4"},ti=e("div",{class:"text-end basis-1/4 pt-2"},"เอกสารแนบ",-1),oi={class:"basis-2/4"},li={class:"gap-3 flex"},si=["accept"],ai={class:"flex items-center justify-between"},ii={class:"shrink w-[20px]"},di={class:"basis-full pl-4"},ni={class:"text-md ell-1"},ri={class:"text-sm text-gray-500 flex items-center"},ci={class:"basis-1/2"},_i={class:"basis-1/2"},ui={class:"shrink w-[20px]"},vi={class:"py-4 flex p-3 gap-4"},mi=e("div",{class:"text-end basis-1/4 pt-2"},"หนังสืออ้างอิง",-1),pi={class:"basis-2/4"},bi={class:"flex items-center justify-between"},fi={class:"shrink w-[20px]"},gi={class:"basis-full pl-4"},xi={class:"text-md ell-1"},hi={class:"shrink w-[20px]"},yi={class:"py-4 flex p-3 gap-4"},ki=e("div",{class:"text-end basis-1/4"},"ใบต่อบันทึก",-1),Mi={class:"basis-2/4 flex gap-5"},wi={class:"py-4 flex p-3 gap-4"},Vi=e("div",{class:"text-end basis-1/4"},"QR Code เอกสารแนบ/อ้างอิง",-1),Si={class:"basis-2/4 flex gap-5"},Fi={class:"flex py-4 p-3 gap-4 items-center"},Ci=e("div",{class:"text-end basis-1/4"},"ติดตามหนังสือ",-1),zi={class:"basis-2/4 flex gap-5 items-center"},ji={class:"basis-2/4"},Oi={class:"basis-full"},Di={class:"shrink w-[20px]"},Ii={key:1},Li={class:"list list-odd space-y-1 px-12"},Ti={class:"py-4 flex gap-5"},Ui=e("div",{class:"text-end basis-1/6 font-semibold"},"รูปแบบการรับ",-1),Ri={class:"basis-5/6"},Yi={class:"py-4 flex gap-5"},qi=e("div",{class:"text-end basis-1/6 font-semibold"}," รายละเอียดการปฏิบัติ ",-1),Ei={class:"basis-5/6"},Bi={class:"flex gap-5"},Ni={class:"basis-3/4"},Ai={class:"basis-1/4"},Pi=e("div",{class:"mb-1"},"รูปแบบคำสั่งการ/คำเสนอ/การปฏิบัติ",-1),Hi={class:"py-4 flex gap-5"},Ji=e("div",{class:"text-end basis-1/6 font-semibold"}," การลงทะเบียนรับ ",-1),Gi={class:"basis-5/6"},Ki={class:"flex items-center w-full"},Qi={class:"mr-2"},Wi={key:0,class:"list list-odd"},Xi=e("div",null,null,-1),Zi=e("div",{class:"py-4 font-semibold text-[16px]"}," แจ้งตอบรับกลับทางอีเมล ",-1),$i={class:"py-4 flex gap-5"},ed=e("div",{class:"text-end basis-1/6 font-semibold"}," หน่วยงานผู้รับ ",-1),td={class:"basis-5/6"},od={class:"py-4 flex gap-5"},ld=e("div",{class:"text-end basis-1/6 font-semibold"}," อีเมลผู้รับ ",-1),sd={class:"basis-5/6"},ad={class:"py-4 flex gap-5 items-center"},id=e("div",{class:"text-end basis-1/6 font-semibold"},"เรื่อง",-1),dd={class:"basis-5/6"},nd={class:"py-4 flex gap-5"},rd=e("div",{class:"text-end basis-1/6 font-semibold"},"รายละเอียด",-1),cd={class:"basis-5/6"},_d=e("div",{class:"text-[13px] text-red-500 mt-1"}," ระบบจะเพิ่มเติมข้อมูลวันเวลารับ ,เลขรับ และชื่อหน่วยงานพร้อมที่ตั้งให้อัตโนมัติ ",-1),ud={key:2},vd={class:"flex justify-center"},md=e("div",{class:"py-4 flex items-end gap-5"},[e("div",{class:"text-end basis-1/2"},[e("div",{class:"w-24 h-24"},[e("img",{class:"w-full h-full object-cover",src:$l,alt:"garudaLogo"})])]),e("div",{class:"basis-1/2 text-4xl -ml-28"},"บันทึกข้อความ")],-1),pd={class:"flex"},bd=e("div",{class:"pt-2 text-xl font-medium shrink w-[125px]"}," ส่วนราชการ ",-1),fd={class:"basis-full"},gd={class:"flex mt-4"},xd={class:"basis-1/2"},hd={class:"flex"},yd=e("div",{class:"pt-2 text-xl font-medium shrink w-[20px]"}," ที่ ",-1),kd={class:"basis-full"},Md={class:"basis-1/2"},wd={class:"flex"},Vd=e("div",{class:"pt-2 text-xl font-medium text-center shrink w-[70px]"}," วันที่ ",-1),Sd={class:"basis-full"},Fd={class:"flex items-center border border-gray-400 bg-gray-50 rounded-md pr-2"},Cd={class:"basis-full"},zd={class:"shrink w-[20px]"},jd={class:"flex mt-4"},Od=e("div",{class:"pt-2 text-xl font-medium shrink w-[45px]"}," เรื่อง ",-1),Dd={class:"basis-full"},Id={class:"flex mt-4"},Ld=e("div",{class:"pt-2 text-xl font-medium shrink w-[50px]"}," เรียน ",-1),Td={class:"basis-full"},Ud={class:"mt-4"},Rd={class:"flex justify-center mt-4 mb-12"},Yd=e("hr",{class:"my-5"},null,-1),qd=["src"],Ed={class:"h-[250px] flex items-center justify-center"},Bd={class:"text-center flex flex-row flex-wrap justify-center"},Nd={class:"basis-full flex justify-center mb-5"},Ad=e("h4",{class:"text-lg text-slate-900"},[w(" บันทึกหนังสือรับ "),e("span",{class:"text-green-500"},"สำเร็จ")],-1),Pd={class:"flex justify-center w-full gap-3"},Hd={class:"space-y-3"},Jd={class:"flex gap-3"},Gd=e("div",{class:"basis-1/3 text-end"},"เลขที่หนังสือ",-1),Kd={class:"basis-2/3"},Qd={class:"flex gap-3"},Wd=e("div",{class:"basis-1/3 text-end"},"ลงวันที่",-1),Xd={class:"basis-2/3"},Zd={class:"flex gap-3"},$d=e("div",{class:"basis-1/3 text-end"},"วันที่/เวลารับ",-1),en={class:"basis-2/3"},tn={class:"flex gap-3"},on=e("div",{class:"basis-1/3 text-end"},"เลขที่รับ",-1),ln={class:"basis-2/3"},sn={class:"space-y-3 mt-7"},an=e("div",{class:"flex gap-3"},[e("div",{class:"basis-1/3 text-end"},"ตอบรับกลับทางอีเมล"),e("div",{class:"basis-2/3 text-green-500"},"สำเร็จ")],-1),dn={class:"flex gap-3"},nn=e("div",{class:"basis-1/3 text-end"},"หน่วยงานผู้รับ",-1),rn={class:"basis-2/3"},cn={class:"flex gap-3"},_n=e("div",{class:"basis-1/3 text-end"},"อีเมลผู้รับ",-1),un={class:"basis-2/3"},vn={class:"flex gap-3"},mn=e("div",{class:"basis-1/3 text-end"},"เรื่อง",-1),pn={class:"basis-2/3"},bn={class:"flex gap-3"},fn=e("div",{class:"basis-1/3 text-end"},"รายละเอียด",-1),gn={class:"basis-2/3"},xn={class:"flex justify-center w-full gap-3"},hn={class:"space-y-3"},yn={class:"flex gap-3"},kn=e("div",{class:"basis-1/3 text-end"},"เลขที่หนังสือ",-1),Mn={class:"basis-2/3 text-orange-600"},wn={class:"flex gap-3"},Vn=e("div",{class:"basis-1/3 text-end"},"ลงวันที่",-1),Sn={class:"basis-2/3 text-orange-600"},Fn={class:"flex gap-3"},Cn=e("div",{class:"basis-1/3 text-end"},"เรื่อง",-1),zn={class:"basis-2/3 text-orange-600"},jn={class:"flex gap-3"},On=e("div",{class:"basis-1/3 text-end"},"วันที่/เวลารับ",-1),Dn={class:"basis-2/3 text-orange-600"},In={class:"flex gap-3"},Ln=e("div",{class:"basis-1/3 text-end"},"เลขที่รับ",-1),Tn={class:"basis-2/3 text-orange-600"},Un={class:"flex gap-3"},Rn=e("div",{class:"basis-1/3 text-end"},"ผู้รับ",-1),Yn={class:"basis-2/3 text-orange-600"},qn=e("div",{class:"flex gap-3"},[e("div",{class:"basis-1/3 text-end"},"หมายเหตุ"),e("div",{class:"basis-2/3"},[e("div",{class:"text-orange-600"},u("ระบบจะใช้เลขรับเดิม")),e("div",{class:"text-orange-600"},u("และเชื่อมเป็นหนังสืออ้างอิง"))])],-1),En={class:"flex justify-center w-full gap-3"},Bn={class:"text-lg text-slate-900"};function Nn(D,l,De,t,P,Qe){const R=y("Stepper"),F=y("vSelect"),N=y("VueSelect"),k=y("TextValid"),I=y("Radio"),S=y("Icon"),j=y("Textinput"),H=y("CFlatPickr"),M=y("Button"),z=y("Textarea"),ee=y("ScannerModal"),pe=y("editor"),te=y("Card"),J=y("ModalOrganizeOut"),oe=y("ModalOrganizeIn"),be=y("ModalOrganizeUser"),fe=y("ModalBookRef"),L=y("Modal"),A=y("ModalError");return c(),p("div",null,[s(te,{noborder:""},{default:V(()=>{var v,Y;return[Ls,s(R,{steps:t.steps,stepNumber:t.stepNumber},null,8,["steps","stepNumber"]),e("div",Ts,[e("form",{onSubmit:l[43]||(l[43]=$o((...o)=>t.submit&&t.submit(...o),["prevent"]))},[t.stepNumber===0?(c(),p("div",Us,[e("div",Rs,[e("div",Ys,[qs,e("div",Es,[s(N,{classInput:"input_color"},{default:V(()=>[s(F,{modelValue:t.document_flow_id,"onUpdate:modelValue":l[0]||(l[0]=o=>t.document_flow_id=o),label:"label",class:me(["input_color border rounded bg-white",t.document_flow_id_error?"border-red-500":""]),reduce:o=>o.value,options:t.document_flow_list},null,8,["modelValue","class","reduce","options"])]),_:1}),s(k,{valid:t.document_flow_id_error},null,8,["valid"])])]),e("div",Bs,[Ns,e("div",As,[e("div",Ps,[(c(!0),p(T,null,U(t.bookTypeOptions,(o,b)=>(c(),p("div",{key:b},[s(I,{label:o.label,modelValue:t.book_type,"onUpdate:modelValue":l[1]||(l[1]=f=>t.book_type=f),value:o.value,disabled:""},null,8,["label","modelValue","value"])]))),128))]),s(k,{valid:t.book_type_error},null,8,["valid"])])]),t.checkReceiveOrgId?(c(),p("div",Qs,[t.document_type=="หนังสือรับจากอีเมล"?(c(),p("div",Ws,[Xs,e("div",Zs,[s(S,{icon:"mdi:email",class:"handle text-[25px] text-orange-500"}),w(" "+u("หนังสือรับจากอีเมล"))])])):(c(),p("div",$s,[ea,e("div",ta,u("เอกสารทั่วไป (ส่งฉบับจริง)"),1)]))])):(c(),p("div",Hs,[Js,e("div",Gs,[e("div",Ks,[(c(!0),p(T,null,U(t.documentTypeOptions,(o,b)=>(c(),p("div",{key:b},[s(I,{label:o.label,class:"mb-5",modelValue:t.document_type,"onUpdate:modelValue":l[2]||(l[2]=f=>t.document_type=f),value:o.label},null,8,["label","modelValue","value"])]))),128))]),s(k,{valid:t.document_type_error},null,8,["valid"])])])),e("div",oa,[la,e("div",sa,[s(j,{classInput:"border border-gray-300 ",disabled:"",modelValue:t.year,"onUpdate:modelValue":l[3]||(l[3]=o=>t.year=o)},null,8,["modelValue"])])]),e("div",aa,[ia,e("div",da,[s(j,{type:"text",classInput:"border border-gray-300 bg-white",placeholder:"",modelValue:t.document_number,"onUpdate:modelValue":l[4]||(l[4]=o=>t.document_number=o),error:t.document_number_error,disabled:!!(t.checkReceiveOrgId&&t.document_type!="หนังสือรับจากอีเมล")},null,8,["modelValue","error","disabled"])])]),e("div",na,[ra,e("div",ca,[s(H,{value:t.document_date,onOnChange:l[5]||(l[5]=o=>t.document_date=o),class:me(["form-control",t.document_date_error?"border-red-500":""]),placeholder:"yyyy, dd M"},null,8,["value","class"]),s(k,{valid:t.document_date_error},null,8,["valid"])])]),e("div",_a,[ua,e("div",va,[s(M,{icon:"heroicons-outline:search",text:"เลือกหน่วยงาน",btnClass:"btn-primary rounded-md",onClick:l[6]||(l[6]=o=>t.book_type=="inside"?t.openModalAction("isModalFromIn",!0):t.openModalAction("isModalFromOut",!0))}),s(k,{valid:t.from_id_error},null,8,["valid"]),e("div",ma,u(t.organization_name_from),1)])]),e("div",pa,[ba,e("div",fa,[s(M,{icon:"heroicons-outline:search",text:"เลือกหน่วยงาน",btnClass:"btn-primary rounded-md",onClick:l[7]||(l[7]=o=>t.openModalAction("isModalTo",!0))}),s(k,{valid:t.to_id_error},null,8,["valid"]),e("div",ga,[e("div",xa,u((v=t.user_item)==null?void 0:v.full_name),1),e("div",ha,u((Y=t.user_item)==null?void 0:Y.organization_name),1)])])]),e("div",ya,[ka,e("div",Ma,[s(z,{placeholder:"",classInput:"border border-gray-400 text_area_bg",modelValue:t.subject,"onUpdate:modelValue":l[8]||(l[8]=o=>t.subject=o),error:t.subject_error},null,8,["modelValue","error"])])]),e("div",wa,[Va,e("div",Sa,[s(j,{type:"text",classInput:"border border-gray-300 bg-white",placeholder:"",modelValue:t.attn,"onUpdate:modelValue":l[9]||(l[9]=o=>t.attn=o),error:t.attn_error},null,8,["modelValue","error"])])]),e("div",Fa,[Ca,e("div",za,[s(z,{placeholder:"",classInput:"border border-gray-400 text_area_bg",rows:10,modelValue:t.detail,"onUpdate:modelValue":l[10]||(l[10]=o=>t.detail=o),error:t.detail_error},null,8,["modelValue","error"])])]),e("div",ja,[Oa,e("div",Da,[s(N,{classInput:"input_color"},{default:V(()=>[s(F,{modelValue:t.document_objective_id,"onUpdate:modelValue":l[11]||(l[11]=o=>t.document_objective_id=o),label:"label",class:"input_color border rounded",reduce:o=>o.value,options:t.document_objective_list},null,8,["modelValue","reduce","options"])]),_:1}),s(k,{valid:t.document_objective_id_error},null,8,["valid"])])]),e("div",Ia,[La,e("div",Ta,[s(N,{classInput:"input_color"},{default:V(()=>[s(F,{modelValue:t.document_format,"onUpdate:modelValue":l[12]||(l[12]=o=>t.document_format=o),label:"label",class:"input_color border rounded bg-white",reduce:o=>o.label,options:t.bookFormatOptions},null,8,["modelValue","reduce","options"])]),_:1}),s(k,{valid:t.document_format_error},null,8,["valid"])])]),e("div",Ua,[Ra,e("div",Ya,[s(N,{classInput:"input_color"},{default:V(()=>[s(F,{modelValue:t.urgency_level,"onUpdate:modelValue":l[13]||(l[13]=o=>t.urgency_level=o),label:"label",class:"input_color border rounded",reduce:o=>o.label,options:t.speedLevelOptions},null,8,["modelValue","reduce","options"])]),_:1}),s(k,{valid:t.urgency_level_error},null,8,["valid"])])]),e("div",qa,[Ea,e("div",Ba,[s(N,{classInput:"input_color"},{default:V(()=>[s(F,{modelValue:t.secrecy_level,"onUpdate:modelValue":l[14]||(l[14]=o=>t.secrecy_level=o),label:"label",class:"input_color border rounded bg-white",reduce:o=>o.label,options:t.secretLevelOptions},null,8,["modelValue","reduce","options"])]),_:1}),s(k,{valid:t.secrecy_level_error},null,8,["valid"])])]),e("div",Na,[Aa,e("div",Pa,[e("div",Ha,[e("input",{type:"file",class:"hidden",ref:"stampFileInput",accept:"application/pdf",onChange:l[15]||(l[15]=(...o)=>t.uploadStampFile&&t.uploadStampFile(...o))},null,544),s(M,{isDisabled:!t.checkUploadFile,icon:"ic:baseline-cloud-upload",text:"อัปโหลดจากคอมพิวเตอร์",btnClass:"btn-primary rounded-md",onClick:l[16]||(l[16]=o=>t.handleUploadStampFile())},null,8,["isDisabled"]),s(M,{isDisabled:!t.checkScanFile,icon:"material-symbols:scanner",text:"สแกนเอกสาร",btnClass:"btn-primary rounded-md",onClick:l[17]||(l[17]=o=>t.pdfModalStamp=!0)},null,8,["isDisabled"])]),s(ee,{"active-modal":t.pdfModalStamp,onOnClose:l[18]||(l[18]=o=>t.pdfModalStamp=!1),onOnFinish:t.afterScanStampComplete},null,8,["active-modal","onOnFinish"]),(c(!0),p(T,null,U(t.previewStampFiles,(o,b)=>(c(),p("div",{class:"mt-2 border rounded border-gray-200 bg-gray-50 px-3 py-2",key:b},[e("div",Ja,[e("div",Ga,[s(S,{icon:"ant-design:file-pdf-filled",class:"text-red-500 text-2xl cursor-pointer"})]),e("div",Ka,[e("div",Qa,u(o==null?void 0:o.name),1),e("div",Wa,[e("div",Xa,u(o==null?void 0:o.size)+" KB",1),e("div",Za," วันที่นำเข้า : "+u(o.date_input),1)])]),e("div",$a,[s(S,{onClick:f=>t.removeStampFile(b),icon:"mdi:trash",class:"text-red-500 text-2xl cursor-pointer"},null,8,["onClick"])])])]))),128))])]),e("div",ei,[ti,e("div",oi,[e("div",li,[e("input",{type:"file",class:"hidden",ref:"fileInput",accept:t.acceptList,onChange:l[19]||(l[19]=(...o)=>t.uploadFile&&t.uploadFile(...o))},null,40,si),s(M,{isDisabled:!t.checkUploadFile,icon:"ic:baseline-cloud-upload",text:"อัปโหลดจากคอมพิวเตอร์",btnClass:"btn-primary rounded-md",onClick:l[20]||(l[20]=o=>t.handleUploadFile())},null,8,["isDisabled"]),s(M,{isDisabled:!t.checkScanFile,icon:"material-symbols:scanner",text:"สแกนเอกสาร",btnClass:"btn-primary rounded-md",onClick:l[21]||(l[21]=o=>t.pdfModal=!0)},null,8,["isDisabled"])]),s(ee,{"active-modal":t.pdfModal,onOnClose:l[22]||(l[22]=o=>t.pdfModal=!1),onOnFinish:t.afterScanComplete},null,8,["active-modal","onOnFinish"]),(c(!0),p(T,null,U(t.previewFile,(o,b)=>(c(),p("div",{class:"mt-2 border rounded border-gray-200 bg-gray-50 px-3 py-2",key:b},[e("div",ai,[e("div",ii,[s(S,{icon:"ant-design:file-pdf-filled",class:"text-red-500 text-2xl cursor-pointer"})]),e("div",di,[e("div",ni,u(o==null?void 0:o.name),1),e("div",ri,[e("div",ci,u(o==null?void 0:o.size)+" KB",1),e("div",_i," วันที่นำเข้า : "+u(o.date_input),1)])]),e("div",ui,[s(S,{onClick:f=>t.removeFile(b),icon:"mdi:trash",class:"text-red-500 text-2xl cursor-pointer"},null,8,["onClick"])])])]))),128))])]),e("div",vi,[mi,e("div",pi,[s(M,{icon:"tdesign:link-1",text:"หนังสืออ้างอิง",btnClass:"btn-primary rounded-md",onClick:l[23]||(l[23]=o=>t.openModalAction("isModalBookRef",!0))}),(c(!0),p(T,null,U(t.ref_document,(o,b)=>{var f,le;return c(),p("div",{class:"mt-2 border rounded border-gray-200 bg-gray-50 px-3 py-2",key:b},[e("div",bi,[e("div",fi,[s(S,{icon:"ant-design:file-word-filled",class:"text-blue-500 text-3xl cursor-pointer"})]),e("div",gi,[e("div",xi,u((f=o==null?void 0:o.document)!=null&&f.subject?(le=o==null?void 0:o.document)==null?void 0:le.subject:o==null?void 0:o.subject),1)]),e("div",hi,[s(S,{onClick:Ie=>t.removeDocRef(b),icon:"mdi:trash",class:"text-red-500 text-2xl cursor-pointer"},null,8,["onClick"])])])])}),128))])]),e("div",yi,[ki,e("div",Mi,[(c(!0),p(T,null,U(t.createOptions,(o,b)=>(c(),p("div",{key:b},[s(I,{label:o.label,modelValue:t.have_generate_document,"onUpdate:modelValue":l[24]||(l[24]=f=>t.have_generate_document=f),value:o.value},null,8,["label","modelValue","value"])]))),128))])]),e("div",wi,[Vi,e("div",Si,[(c(!0),p(T,null,U(t.createOptions,(o,b)=>(c(),p("div",{key:b},[s(I,{label:o.label,modelValue:t.create_qr_code,"onUpdate:modelValue":l[25]||(l[25]=f=>t.create_qr_code=f),value:o.value},null,8,["label","modelValue","value"])]))),128))])]),e("div",Fi,[Ci,e("div",zi,[(c(!0),p(T,null,U(t.followOptions,(o,b)=>(c(),p("div",{class:"basis-1/4",key:b},[s(I,{label:o.label,class:"mb-5",modelValue:t.follow_up_document,"onUpdate:modelValue":l[26]||(l[26]=f=>t.follow_up_document=f),value:o.value},null,8,["label","modelValue","value"])]))),128)),e("div",ji,[e("div",{class:me(["flex items-center border rounded-md pr-2",t.follow_up_document?"":"bg-gray-100"])},[e("div",Oi,[s(H,{modelValue:t.follow_up_document_date,"onUpdate:modelValue":l[27]||(l[27]=o=>t.follow_up_document_date=o),onOnChange:l[28]||(l[28]=o=>t.follow_up_document_date=o),disabled:!t.follow_up_document,class:"form-control border-0 focus:ring-0"},null,8,["modelValue","disabled"])]),e("div",Di,[s(S,{class:"text-2xl",icon:"ant-design:calendar-outlined"})])],2)])])])])])):E("",!0),t.stepNumber===1?(c(),p("div",Ii,[e("div",Li,[e("div",Ti,[Ui,e("div",Ri,[(c(!0),p(T,null,U(t.receiveTypeOptions,(o,b)=>(c(),p("div",{key:b},[s(I,{label:o.label,modelValue:t.receiving_format,"onUpdate:modelValue":l[29]||(l[29]=f=>t.receiving_format=f),value:o.label},null,8,["label","modelValue","value"])]))),128)),s(k,{valid:t.receiving_format_error},null,8,["valid"])])]),e("div",Yi,[qi,e("div",Ei,[e("div",Bi,[e("div",Ni,[s(z,{placeholder:"",rows:7,name:"detail",modelValue:t.action_detail,"onUpdate:modelValue":l[30]||(l[30]=o=>t.action_detail=o),classInput:"border border-gray-400 text_area_bg"},null,8,["modelValue"]),s(k,{valid:t.action_detail_error},null,8,["valid"])]),e("div",Ai,[Pi,s(N,{classInput:"input_color"},{default:V(()=>[s(F,{label:"label",class:me(["input_color border rounded bg-white",t.document_flow_id_error?"border-red-500":""]),reduce:o=>o.value,options:t.document_objective_list,"onOption:selected":t.setActionDetail},null,8,["class","reduce","options","onOption:selected"])]),_:1})])])])]),e("div",Hi,[Ji,e("div",Gi,[(c(!0),p(T,null,U(t.have_initial_number_list,(o,b)=>(c(),p("div",{key:b,class:"mb-3"},[s(I,{modelValue:t.have_initial_number,"onUpdate:modelValue":l[31]||(l[31]=f=>t.have_initial_number=f),value:o.value},{default:V(()=>[e("div",Ki,[e("div",Qi,u(o.label),1)])]),_:2},1032,["modelValue","value"])]))),128)),s(k,{valid:t.have_initial_number_error},null,8,["valid"])])]),t.documentStatus==="หนังสือรับจากอีเมล"?(c(),p("div",Wi,[Xi,Zi,e("div",$i,[ed,e("div",td,u(t.organization_receive),1)]),e("div",od,[ld,e("div",sd,u(t.email_receive),1)]),e("div",ad,[id,e("div",dd,[s(z,{placeholder:"",rows:7,classInput:"border border-gray-400 text_area_bg",modelValue:t.subject_receive,"onUpdate:modelValue":l[32]||(l[32]=o=>t.subject_receive=o),error:t.subject_receive_error},null,8,["modelValue","error"])])]),e("div",nd,[rd,e("div",cd,[s(z,{placeholder:"",rows:7,classInput:"border border-gray-400 text_area_bg",modelValue:t.detail_receive,"onUpdate:modelValue":l[33]||(l[33]=o=>t.detail_receive=o),error:t.detail_receive_error},null,8,["modelValue","error"]),_d])])])):E("",!0)])])):E("",!0),t.stepNumber===2?(c(),p("div",ud,[e("div",vd,[s(te,{className:"w-[80%] border-2 rounded-none px-20 pb-28"},{default:V(()=>[md,e("div",pd,[bd,e("div",fd,[s(j,{type:"text",classInput:"border border-gray-400 bg-gray-50",placeholder:"",modelValue:t.book_pdf_government,"onUpdate:modelValue":l[34]||(l[34]=o=>t.book_pdf_government=o),error:t.book_pdf_government_error},null,8,["modelValue","error"])])]),e("div",gd,[e("div",xd,[e("div",hd,[yd,e("div",kd,[s(j,{type:"text",classInput:"border border-gray-400 bg-gray-50",placeholder:"",modelValue:t.book_pdf_number,"onUpdate:modelValue":l[35]||(l[35]=o=>t.book_pdf_number=o),disabled:""},null,8,["modelValue"])])])]),e("div",Md,[e("div",wd,[Vd,e("div",Sd,[e("div",Fd,[e("div",Cd,[s(H,{modelValue:t.book_pdf_date,"onUpdate:modelValue":l[36]||(l[36]=o=>t.book_pdf_date=o),onOnChange:l[37]||(l[37]=o=>t.book_pdf_date=o),class:"form-control border-0 focus:ring-0"},null,8,["modelValue"])]),e("div",zd,[s(S,{class:"text-2xl",icon:"ant-design:calendar-outlined"})])]),s(k,{valid:t.book_pdf_date_error},null,8,["valid"])])])])]),e("div",jd,[Od,e("div",Dd,[s(j,{type:"text",classInput:"border border-gray-400 bg-gray-50",placeholder:"",modelValue:t.subject,"onUpdate:modelValue":l[38]||(l[38]=o=>t.subject=o),disabled:""},null,8,["modelValue"])])]),e("div",Id,[Ld,e("div",Td,[s(j,{type:"text",classInput:"border border-gray-400 bg-gray-50",placeholder:"",modelValue:t.attn,"onUpdate:modelValue":l[39]||(l[39]=o=>t.attn=o),disabled:""},null,8,["modelValue"])])]),e("div",Ud,[s(pe,{class:"h-[600px]","api-key":"tvq48l6368vn3ems7hzoks5k23rxu2wharjh39g0zgyn9dl2",init:{plugins:P.plugins,toolbar:P.toolbar},modelValue:t.book_pdf_detail,"onUpdate:modelValue":l[40]||(l[40]=o=>t.book_pdf_detail=o)},null,8,["init","modelValue"]),s(k,{valid:t.book_pdf_detail_error},null,8,["valid"])])]),_:1})]),e("div",Rd,[s(M,{onClick:l[41]||(l[41]=o=>t.previewPDF()),text:" แสดงตัวอย่าง",btnClass:"btn-primary"})])])):E("",!0),Yd,e("div",{class:me(t.stepNumber>0?"flex justify-between":" text-right")},[t.stepNumber!==0?(c(),ve(M,{key:0,onClick:l[42]||(l[42]=$o(o=>t.prev(),["prevent"])),text:"ย้อนกลับ",btnClass:"btn-outline-dark"})):E("",!0),s(M,{type:"submit",text:t.stepNumber!==t.steps.length-1?"ถัดไป":"บันทึกและส่ง",btnClass:"btn-primary"},null,8,["text"])],2)],32)])]}),_:1}),s(J,{title:"เลือกหน่วยงาน",items:t.outside_organization,isOpen:t.isModal.isModalFromOut,modalId:t.from_id,"onEvent:submit":l[44]||(l[44]=v=>t.setFromTo("from_type",v)),"onEvent:close":l[45]||(l[45]=v=>t.openModalAction("isModalFromOut",!1))},null,8,["items","isOpen","modalId"]),s(oe,{title:"เลือกหน่วยงาน",items:t.inside_organization,isOpen:t.isModal.isModalFromIn,"onEvent:submit":l[46]||(l[46]=v=>t.setFromTo("from_type",v)),"onEvent:close":l[47]||(l[47]=v=>t.openModalAction("isModalFromIn",!1))},null,8,["items","isOpen"]),s(be,{title:"เลือกบุคคล",tabIndex:1,items:t.user_list,modalId:t.to_id,isOpen:t.isModal.isModalTo,"onEvent:submit":l[48]||(l[48]=v=>t.setFromTo("to_type",v)),"onEvent:close":l[49]||(l[49]=v=>t.openModalAction("isModalTo",!1))},null,8,["items","modalId","isOpen"]),s(fe,{title:"ค้นหาหนังสืออ้างถึง",items:t.book_ref_list,isOpen:t.isModal.isModalBookRef,"onEvent:submit":t.setBookRef,"onEvent:close":l[50]||(l[50]=v=>t.openModalAction("isModalBookRef",!1))},null,8,["items","isOpen","onEvent:submit"]),t.isModal.isShowDialogPdf?(c(),ve(L,{key:0,title:"ดูรายละเอียดเอกสาร",labelClass:"btn-outline-dark",sizeClass:"w-3/4",label:"",centered:"",activeModal:t.isModal.isShowDialogPdf,"onEvent:closeModal":l[51]||(l[51]=v=>t.openModalAction("isShowDialogPdf",!1))},{default:V(()=>[e("div",null,[e("iframe",{class:"w-full h-[1000px] mt-4",src:"data:application/pdf;base64, "+t.pdfPath,frameborder:"0"},null,8,qd)])]),_:1},8,["activeModal"])):E("",!0),t.isModal.isSuccess?(c(),ve(L,{key:1,title:" ",labelClass:"btn-outline-dark",sizeClass:"w-full max-w-[700px]",label:"",centered:"",activeModal:t.isModal.isSuccess,"onEvent:closeModal":l[54]||(l[54]=v=>D.$router.push("/app/receive-list/wait-to-receive"))},{footer:V(()=>[e("div",Pd,[s(M,{text:"ไปที่รายการรอรับ",btnClass:"btn-primary w-36",onClick:l[52]||(l[52]=v=>D.$router.push("/app/receive-list/wait-to-receive"))}),s(M,{text:"ปิด",btnClass:"bg-white border border-gray-500 w-36",onClick:l[53]||(l[53]=v=>D.$router.push("/app/receive-list/wait-to-receive/"+t.modalId))})])]),default:V(()=>[e("div",Ed,[e("div",Bd,[e("div",Nd,[s(S,{icon:"icon-park-solid:protect",class:"text-6xl text-green-500"})]),Ad])])]),_:1},8,["activeModal"])):E("",!0),t.isModal.isReceiveMail?(c(),ve(L,{key:2,title:"บันทึกหนังสือรับ",labelClass:"btn-outline-dark",sizeClass:"w-full max-w-[700px]",label:"",centered:"",activeModal:t.isModal.isReceiveMail,"onEvent:closeModal":l[57]||(l[57]=v=>t.isModal.isReceiveMail=!1)},{footer:V(()=>[e("div",xn,[s(M,{text:"รายละเอียดหนังสือ",btnClass:"bg-white border border-gray-500 w-36",onClick:l[55]||(l[55]=v=>D.$router.push("/app/receive-list/wait-to-receive/"+t.modalId))}),s(M,{text:"กลับไปหน้ารายการ",btnClass:"btn-primary w-36",onClick:l[56]||(l[56]=v=>D.$router.push("/app/receive-list/wait-to-receive"))})])]),default:V(()=>[e("div",Hd,[e("div",Jd,[Gd,e("div",Kd,u(t.actionList.document_number),1)]),e("div",Qd,[Wd,e("div",Xd,u(t.formatDate(t.actionList.document_date)),1)]),e("div",Zd,[$d,e("div",en,u(t.formatDateTime(t.actionList.created_at)),1)]),e("div",tn,[on,e("div",ln,u(t.actionList.initial_number_from?t.actionList.initial_number_from:"-"),1)])]),e("div",sn,[an,e("div",dn,[nn,e("div",rn,u(t.actionList.organization_receive),1)]),e("div",cn,[_n,e("div",un,u(t.actionList.email_receive),1)]),e("div",vn,[mn,e("div",pn,u(t.actionList.subject_receive),1)]),e("div",bn,[fn,e("div",gn,u(t.actionList.detail_receive),1)])])]),_:1},8,["activeModal"])):E("",!0),t.isModal.isDuplicateCase?(c(),ve(L,{key:3,title:"การแจ้งเตือน",themeClass:"orange-danger",sizeClass:"w-full max-w-[700px]",label:"",centered:"",activeModal:t.isModal.isDuplicateCase,"onEvent:closeModal":l[59]||(l[59]=v=>t.isModal.isDuplicateCase=!1)},{footer:V(()=>[e("div",En,[s(M,{text:"ดำเนินการต่อ",btnClass:"btn-primary w-36",onClick:l[58]||(l[58]=v=>D.$router.push("/app/receive-list/wait-to-receive"))})])]),default:V(()=>{var v;return[e("div",hn,[e("div",yn,[kn,e("div",Mn,u(t.duplicateList.document_number),1)]),e("div",wn,[Vn,e("div",Sn,u(t.formatDate(t.duplicateList.document_date)),1)]),e("div",Fn,[Cn,e("div",zn,u(t.duplicateList.subject),1)]),e("div",jn,[On,e("div",Dn,u(t.formatDateTime(t.duplicateList.created_at)),1)]),e("div",In,[Ln,e("div",Tn,u(t.duplicateList.initial_number_from?t.duplicateList.initial_number_from:"-"),1)]),e("div",Un,[Rn,e("div",Yn,u((v=t.duplicateList.to_data)==null?void 0:v.full_name),1)]),qn])]}),_:1},8,["activeModal"])):E("",!0),s(A,{title:"",isOpen:t.isFileSizeError,"onEvent:closeModal":l[60]||(l[60]=v=>t.isFileSizeError=!1)},{default:V(()=>[e("div",Bn,u(t.fileErrorMessage),1)]),_:1},8,["isOpen"])])}const Pr=fs(Is,[["render",Nn]]);export{Pr as default};
