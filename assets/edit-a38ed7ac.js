import{F as S}from"./index-6c8c0d73.js";import{C as j}from"./index-263882d1.js";import{B as I}from"./index-441935dc.js";import{E}from"./index-1c6333b5.js";import{E as U}from"./index-97f1d9eb.js";import{V as F,C as O}from"./VueSelect-4c8519b3.js";import{T as R}from"./index-31d1a8ca.js";import{M as L}from"./Modal-19eb68c4.js";import{I as M}from"./index-72ee420c.js";import{_ as B,a as y}from"./index-e058a960.js";import{C as Y}from"./index-2d8ae848.js";import{o as d,x as i,bj as u,m as N,n as P,aF as m,as as a,p as e,bo as z,F as V,aD as k,ac as G,aT as v}from"./preload-helper-9e0646ca.js";import"./index-8994827d.js";import"./ck-white-7280cd79.js";import"./vue-cleave.min-9e1201c2.js";import"./transition-39b574f4.js";import"./dom-891ac6c3.js";import"./hidden-11a9ab9d.js";import"./focus-management-e6c5d1fd.js";import"./micro-task-89dcd6af.js";import"./open-closed-486d85f0.js";import"./use-outside-click-a758fdce.js";import"./iconify-4e42c13d.js";const q={components:{CFlatPickr:Y,Icon:M,Card:j,Button:I,Expansion:E,ExpansionTableRow:U,VueSelect:F,vSelect:O,Textinput:R,Modal:L,FromGroup:S},data(){return{year_create:"",year_copy:"",logOff:"",deleteTime:"",date:"",holiday:"",isEdit:!1,editID:"",isShowDialog:!1,yearList:[{id:1,title:"2564"},{id:2,title:"2565"},{id:3,title:"2566"},{id:4,title:"2567"},{id:5,title:"2568"}],filter:{year:"",only:"",eidt:""},columns:[{label:"วันที่",field:"date",width:"20%",tdClass:"text_left",thClass:"text_left"},{label:"วันหยุด",field:"name",width:"60%",tdClass:"text_left",thClass:"text_left"},{label:"จัดการ",field:"action",width:"20%"}],settings:{},advancedTable:[],advancedTableDefault:[],editList:[{id:1,title:"ห้ามแก้ไขหลัง ลงนาม/สั่งการ"},{id:2,title:"ห้ามแก้ไขหลัง ยืนยันการรับหนังสือ"}],onlyList:[{id:1,title:"ทุกวัน"},{id:2,title:"เฉพาะวันทำการ"}],paginate:{total:50,current:1,perpage:10,pageRange:5}}},async created(){var s,f,p,l;const n=await y("commonSetting","edit");this.advancedTableDefault=n.data.result.holiday_list,this.advancedTable=this.advancedTableDefault,console.log("advancedTable",this.advancedTable),this.settings=n.data.result.data,console.log("data",this.settings),this.filter.edit=((s=this.settings)==null?void 0:s.edit_document_rules)=="after_sign"?1:2,this.filter.only=((f=this.settings)==null?void 0:f.date_count_rules)=="all"?1:2,this.logOff=(p=this.settings)==null?void 0:p.session_duration.toString(),this.deleteTime=(l=this.settings)==null?void 0:l.format_bin_duration.toString()},watch:{filter:{handler(){this.filter.year||(this.advancedTable=this.advancedTableDefault)},deep:!0}},methods:{filterYear(n){console.log("dsa",n),this.advancedTable=this.advancedTableDefault.filter(s=>s.year==parseInt(n.title)-543)},async onSubmit(){this.filter.year="",setTimeout(async()=>{let n={id:1,session_duration:this.logOff,format_bin_duration:this.deleteTime,edit_document_rules:this.filter.edit==1?"after_sign":"after_submit",date_count_rules:this.filter.only==1?"all":"business_day",holiday:[...this.advancedTable]};console.log(n);const s=await y("commonSetting","store",{payload:n});if(console.log("res",s),s.status==200)return this.$router.push("/app/setting/general")},1e3)},savenNewRow(){const n=new Date(this.date);let f=new Date(this.date).toISOString().slice(0,19).replace("T"," ");const p={year:n.getFullYear(),name:this.holiday,holiday_date:f};console.log("check",p),this.advancedTable.push(p),this.clearRow()},clearRow(){this.isEdit=!1,this.editID="",this.holiday="",this.date=""},saveEditRow(){this.clearRow()},onEditRow(n){this.isEdit=!0,this.editID=n},copy(){this.isShowDialog=!0},onClose(){this.isShowDialog=!1},onDelete(n){this.advancedTable=this.advancedTable.filter(s=>s.id!==n)},async copyYear(){let n={year_copy:this.year_copy-543,year_create:this.year_create-543};console.log("dup",n),(await y("commonSetting","copy",{payload:n})).status==200&&(this.isShowDialog=!1,window.location.reload())},formatDate(n){if(n){const s=new Date(n),f=s.getDate().toString().padStart(2,"0"),p=(s.getMonth()+1).toString().padStart(2,"0"),l=s.getFullYear()+543;let o="";switch(s.getDay()){case 1:o="วันจันทร์";break;case 2:o="อังคาร";break;case 3:o="พุธ";break;case 4:o="พฤหัสบดี";break;case 5:o="ศุกร์";break;case 6:o="เสาร์";break;default:o="อาทิตย์"}return`${f}/${p}/${l} (${o})`}else return null}}},A={class:"general-setting"},H=e("div",{class:"md:flex pb-6 md:space-x-8 space-x-8 items-center"},[e("div",null,[e("span",null,"ตั้งค่าทั่วไป")])],-1),J={class:"p-4"},K={class:"bg-gray-100 flex h-[80px] items-center"},Q=e("div",{class:"sm:basis-1/3 basis-full pr-4 flex sm:justify-end justify-start mb-1 sm:mb-0 font-bold"}," ระยะเวลา Log off อัตโนมัติเมื่อไม่มีการใช้งานเป็นระยะ ",-1),W={class:"sm:basis-1/3 basis-full flex items-center"},X=e("span",{class:"pl-3"},"นาที",-1),Z={class:"flex h-[80px] items-center"},$=e("div",{class:"sm:basis-1/3 basis-full pr-4 flex sm:justify-end justify-start mb-1 sm:mb-0 font-bold"}," ระบบจะลบรายการในถังขยะถาวรหลังจาก ",-1),ee={class:"sm:basis-1/3 basis-full flex items-center"},te=e("span",{class:"pl-3"},"วัน",-1),se={class:"bg-gray-100 flex h-[80px] items-center"},le=e("div",{class:"sm:basis-1/3 basis-full pr-4 flex sm:justify-end justify-start mb-1 sm:mb-0 font-bold"}," การแก้ไขหนังสือ ",-1),ie={class:"sm:basis-1/3 basis-full flex items-center"},oe={class:"flex h-[80px] items-center"},ne=e("div",{class:"sm:basis-1/3 basis-full pr-4 flex sm:justify-end justify-start mb-1 sm:mb-0 font-bold"}," การนับวันในระบบ ",-1),ae={class:"sm:basis-1/3 basis-full flex items-center"},de={class:"mt-5"},re={class:"bg-gray-100 py-3 px-3 mt-5 mb-5 sm:px-0 h-[80px] test"},ce={class:"flex flex-wrap"},ue=e("span",{class:"font-bold mr-10 test"},"ปฏิทินวันหยุด",-1),me={class:"flex flex-wrap sm:flex-nowrap gap-3 basis-3/5"},pe={class:"basis-full test"},fe={class:"px-3 mt-5 mb-5 sm:px-0 h-[80px] test"},_e={class:"flex items-center flex-wrap"},be=e("span",{class:"font-bold mr-10 test"},"คัดลอกปฏิทิน",-1),he={class:"flex flex-wrap sm:flex-nowrap gap-3"},xe={class:"basis-full test"},ye={class:"general-setting"},ve={class:"table_expand"},ge=["width"],we={class:"flex items-center border border-gray-400 justify-between px-2 h-[40px] rounded"},Ce={key:0},Ve={class:"flex items-center border border-gray-400 justify-between px-2 h-[40px] rounded"},ke={key:1},Te={key:0},De={key:1},Se={key:0},je={class:"space-x-4 flex justify-center"},Ie={key:1},Ee={class:"space-x-4 flex justify-center"},Ue={class:"text-center mt-4 flex justify-center"},Fe=e("div",{class:"text-center"},[e("span",{class:"font-bold"},"คัดลอกปฏิทินเพื่อสร้างในปีถัดไป")],-1),Oe={class:"bg-gray-100 py-3 px-3 mt-5 sm:px-0 h-[80px]"},Re={class:"flex justify-center"},Le={class:"flex-1"},Me={class:"flex flex-wrap"},Be=e("div",{class:"sm:basis-1/3 basis-full pr-4 flex sm:justify-end justify-start mb-1 sm:mb-0 font-bold"}," ปีปฏิทินที่ต้องการคัดลอก ",-1),Ye={class:"sm:basis-1/3 basis-full"},Ne={class:"bg-gray-100 py-3 px-3 mt-5 sm:px-0 h-[80px]"},Pe={class:"flex justify-center"},ze={class:"flex-1"},Ge={class:"flex flex-wrap"},qe=e("div",{class:"sm:basis-1/3 basis-full pr-4 flex sm:justify-end justify-start mb-1 sm:mb-0 font-bold"}," ปีปฏิทินที่ต้องการสร้าง ",-1),Ae={class:"sm:basis-1/3 basis-full"},He=e("hr",{class:"mt-5 border"},null,-1),Je={class:"text-center mt-4 flex justify-center"};function Ke(n,s,f,p,l,o){const h=m("Textinput"),_=m("vSelect"),b=m("VueSelect"),g=m("Expansion"),r=m("Button"),w=m("CFlatPickr"),C=m("Icon"),T=m("Card"),D=m("Modal");return a(),d("div",A,[i(T,{noborder:""},{default:u(()=>[H,e("div",null,[e("form",{onSubmit:s[10]||(s[10]=z((...t)=>o.onSubmit&&o.onSubmit(...t),["prevent"]))},[e("div",null,[i(g,{activeItem:!0,parentClass:"space-y-5",title:"ตั้งค่าระบบ"},{default:u(()=>[e("div",J,[e("div",K,[Q,e("div",W,[i(h,{classInput:"border border-gray-400 w-[150px]",placeholder:"",modelValue:l.logOff,"onUpdate:modelValue":s[0]||(s[0]=t=>l.logOff=t)},null,8,["modelValue"]),X])]),e("div",Z,[$,e("div",ee,[i(h,{classInput:"border border-gray-400 w-[150px]",placeholder:"",modelValue:l.deleteTime,"onUpdate:modelValue":s[1]||(s[1]=t=>l.deleteTime=t)},null,8,["modelValue"]),te])]),e("div",se,[le,e("div",ie,[i(b,{classInput:"input_color"},{default:u(()=>[i(_,{modelValue:l.filter.edit,"onUpdate:modelValue":s[2]||(s[2]=t=>l.filter.edit=t),label:"title",class:"input_color border rounded w-[300px]",reduce:t=>t.id,options:l.editList},null,8,["modelValue","reduce","options"])]),_:1})])]),e("div",oe,[ne,e("div",ae,[i(b,{classInput:"input_color"},{default:u(()=>[i(_,{modelValue:l.filter.only,"onUpdate:modelValue":s[3]||(s[3]=t=>l.filter.only=t),label:"title",class:"input_color border rounded w-[300px]",reduce:t=>t.id,options:l.onlyList},null,8,["modelValue","reduce","options"])]),_:1})])])])]),_:1})]),e("div",de,[i(g,{activeItem:!0,parentClass:"space-y-5",title:"ตั้งค่าปฏิทินวันหยุด"},{default:u(()=>[e("div",re,[e("div",ce,[ue,e("div",me,[e("div",pe,[i(b,{classInput:"input_color"},{default:u(()=>[i(_,{modelValue:l.filter.year,"onUpdate:modelValue":s[4]||(s[4]=t=>l.filter.year=t),label:"title",placeholder:"ทุกปี",class:"input_color border rounded w-[300px]",reduce:t=>t.title,options:l.yearList,"onOption:selected":o.filterYear},null,8,["modelValue","reduce","options","onOption:selected"])]),_:1})])])])]),e("div",fe,[e("div",_e,[be,e("div",he,[e("div",xe,[i(r,{type:"button",text:"เลือกปฏิทิน",btnClass:"btn-primary w-32 font-medium mx-2",onClick:s[5]||(s[5]=t=>o.copy())})])])])]),e("div",ye,[e("div",ve,[e("table",null,[e("tr",null,[(a(!0),d(V,null,k(l.columns,(t,x)=>(a(),d("th",{key:x,class:G(t.thClass),width:t.width},v(t.label),11,ge))),128))]),e("tr",null,[e("td",null,[e("div",we,[i(w,{modelValue:l.date,"onUpdate:modelValue":s[6]||(s[6]=t=>l.date=t),onOnChange:s[7]||(s[7]=t=>l.date=t),class:"bg-transparent border-transparent w-full focus:outline-none focus:ring-0"},null,8,["modelValue"]),i(C,{class:"text-lg pl-1 text-gray-900",icon:"bx:calendar"})])]),e("td",null,[i(h,{modelValue:l.holiday,"onUpdate:modelValue":s[8]||(s[8]=t=>l.holiday=t)},null,8,["modelValue"])]),e("td",null,[i(r,{icon:"ic:round-save",text:"บันทึก",btnClass:"btn-primary rounded-md h-8 items-center m-2 text-sm w-[100px]",onClick:s[9]||(s[9]=t=>o.savenNewRow())})])]),(a(!0),d(V,null,k(l.advancedTable,(t,x)=>(a(),d("tr",{key:x},[e("td",null,[l.isEdit&&l.editID==t.id?(a(),d("div",Ce,[e("div",Ve,[i(w,{modelValue:t.holiday_date,"onUpdate:modelValue":c=>t.holiday_date=c,onOnChange:c=>t.holiday_date=c,class:"bg-transparent border-transparent"},null,8,["modelValue","onUpdate:modelValue","onOnChange"]),i(C,{class:"text-lg pl-1 text-gray-900",icon:"bx:calendar"})])])):(a(),d("div",ke,v(o.formatDate(t.holiday_date)),1))]),e("td",null,[l.isEdit&&l.editID==t.id?(a(),d("div",Te,[i(h,{modelValue:t.name,"onUpdate:modelValue":c=>t.name=c},null,8,["modelValue","onUpdate:modelValue"])])):(a(),d("div",De,v(t.name),1))]),e("td",null,[l.isEdit&&l.editID==t.id?(a(),d("div",Se,[e("div",je,[i(r,{icon:"ic:round-save",text:"บันทึกแก้ไข",btnClass:"btn-primary text-white w-32 h-8 items-center",onClick:c=>o.saveEditRow(t.id)},null,8,["onClick"]),i(r,{icon:"fa6-solid:trash-can",text:"ลบ",btnClass:"bg-red-600 text-white w-20 h-8 items-center",onClick:c=>o.onDelete(t.id)},null,8,["onClick"])])])):(a(),d("div",Ie,[e("div",Ee,[i(r,{icon:"bx:edit",text:"แก้ไข",btnClass:"bg-yellow-400 text-white w-20 h-8 items-center",onClick:c=>o.onEditRow(t.id)},null,8,["onClick"]),i(r,{icon:"fa6-solid:trash-can",text:"ลบ",btnClass:"bg-red-600 text-white w-20 h-8 items-center",onClick:c=>o.onDelete(t.id)},null,8,["onClick"])])]))])]))),128))])])])]),_:1})]),e("div",Ue,[i(r,{type:"submit",text:"บันทึกการแก้ไข",btnClass:"btn-primary w-32 font-medium mx-2"}),i(r,{text:"ยกเลิก",btnClass:"btn-outline-dark w-32 mx-2",link:"/app/setting/general"})])],32)])]),_:1}),l.isShowDialog?(a(),N(D,{key:0,title:"คัดลอกปฏิทิน",label:"",labelClass:"btn-outline-dark",sizeClass:"max-w-[600px]",ref:"modalDialog",centered:"",activeModal:l.isShowDialog,"onEvent:closeModal":s[15]||(s[15]=t=>o.onClose())},{default:u(()=>[Fe,e("div",null,[e("div",Oe,[e("div",Re,[e("div",Le,[e("div",Me,[Be,e("div",Ye,[i(b,{classInput:"input_color"},{default:u(()=>[i(_,{modelValue:l.year_copy,"onUpdate:modelValue":s[11]||(s[11]=t=>l.year_copy=t),label:"title",class:"input_color border rounded w-[300px]",reduce:t=>t.title,options:l.yearList},null,8,["modelValue","reduce","options"])]),_:1})])])])])]),e("div",Ne,[e("div",Pe,[e("div",ze,[e("div",Ge,[qe,e("div",Ae,[i(b,{classInput:"input_color"},{default:u(()=>[i(_,{label:"title",modelValue:l.year_create,"onUpdate:modelValue":s[12]||(s[12]=t=>l.year_create=t),class:"input_color border rounded w-[300px]",reduce:t=>t.title,options:l.yearList},null,8,["modelValue","reduce","options"])]),_:1})])])])])])]),He,e("div",Je,[i(r,{type:"submit",text:"ยืนยัน",onClick:s[13]||(s[13]=t=>o.copyYear()),btnClass:"btn-primary w-32 font-medium mx-2"}),i(r,{text:"ยกเลิก",btnClass:"btn-outline-dark w-32 mx-2",onClick:s[14]||(s[14]=t=>o.onClose())})])]),_:1},8,["activeModal"])):P("",!0)])}const xt=B(q,[["render",Ke]]);export{xt as default};
