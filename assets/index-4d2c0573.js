import{D}from"./index-976a2577.js";import{C as E}from"./index-cb5a08aa.js";import{I as A}from"./index-8d30ace7.js";import{P as M}from"./index-5ddbaceb.js";import{_ as O,g as G,a as L}from"./index-f91482a0.js";import{T as R}from"./index-b52aeb81.js";import{V as N,C as z}from"./VueSelect-403231fd.js";import{I as U}from"./index-2198f2cf.js";import{T as q}from"./index-3e8503e7.js";import{B as H}from"./index-c2d6eb9c.js";import{I as J}from"./informationCard-77ddf345.js";import{A as K}from"./AdvancedSearch-88f89aed.js";import{o as l,p as t,x as i,bj as _,n as r,m as Q,ac as y,aF as d,as as s,aT as p,F as W,aD as X}from"./preload-helper-f37a9bec.js";import"./dom-b10fc197.js";import"./focus-management-94a631f4.js";import"./open-closed-75edfb8a.js";import"./use-resolve-button-type-d7bee841.js";import"./use-outside-click-156e41c1.js";import"./iconify-2baafea4.js";import"./index-a56f86b1.js";import"./vue-cleave.min-df5c8cc9.js";import"./index-325a54cb.js";import"./ck-white-3501111f.js";import"./select-option-b2a02578.js";import"./index-8ecfca6d.js";const Y={components:{Tooltip:R,Pagination:M,Dropdown:D,Icon:A,Card:E,VueSelect:N,vSelect:z,InputGroup:U,Textinput:q,Button:H,ImformationCard:J,AdvancedSearch:K},data(){return{keyword:"",status:"",openFilter:!1,filter:null,statusList:[{id:1,title:"ปฎิบัติงานเสร็จ"},{id:2,title:"ยกเลิกหนังสือ"}],advancedTable:[],paginate:{total:50,current_page:1,perpage:10,pageRange:5},columns:[{label:"หนังสือ",field:"book",width:"11.66%",tdClass:"text_left",thClass:"text_left"},{label:"เลขที่หนังสือ",field:"document_number",width:"14.39%",tdClass:"text_left",thClass:"text_left"},{label:"เลขรับ/ส่ง",field:"initial_number_from",width:"10.79%"},{label:"เรื่อง",field:"subject",width:"28.78%",tdClass:"text_left",thClass:"text_left"},{label:"จาก",field:"from",width:"20%",tdClass:"text_left",thClass:"text_left"},{label:"สถานะ",field:"status",width:"14.39%",tdClass:"text_left",thClass:"text_left"}]}},computed:{isMobile(){return G().isMobile}},created(){this.getData(1)},watch:{status:{handler:function(a){a||this.onFilter({status:"",keyword:this.keyword})}}},methods:{async getData(a){const o=await L("documentStore","getList",{payload:{page:a,...this.filter}});o.status===200&&(this.advancedTable=o.data.result.data,this.paginate.total=o.data.result.total_page*o.data.result.per_page,this.paginate.current_page=o.data.result.current_page,this.paginate.perpage=o.data.result.per_page)},async changePage(a){this.paginate.current_page=a,await this.getData(a)},onFilter(a){this.filter=a,this.getData(1)}}},Z={class:"custom__table p-6"},$={key:0,class:"flex pb-6 space-y-0 justify-end"},ee={class:"flex flex-wrap sm:flex-nowrap gap-3 items-center"},te=t("div",{class:"text-center"},[t("div",{class:"text-gray-400"},"ไม่พบข้อมูล")],-1),oe={key:0},ne={class:"w-[100%]"},se=["onClick"],le={class:"text-gray-400 ell-1 mb-1"},re={key:0,class:"flex space-x-4"},ie=["href"],ae={class:"flex items-center bg-gray-100 border rounded-md px-2 w-[120px] h-[24px] cursor-pointer"},de={class:"ell-1"},ce={key:1},ue={key:2},_e={key:3},pe={class:"flex space-x-1"},me={class:"shrink w-[30px]"},ge={key:0},he={key:1},fe={key:2},be={class:"space-y-1"},xe={key:0},ve=t("div",{class:"bg-yellow-500 text-center rounded text-white px-2 py-1"}," ด่วน ",-1),we=[ve],ye={key:1},ke=t("div",{class:"bg-orange-500 text-center rounded text-white px-2 py-1"}," ด่วนมาก ",-1),Ce=[ke],Ie={key:2},Se=t("div",{class:"bg-red-500 text-center rounded text-white px-2 py-1"}," ด่วนที่สุด ",-1),Fe=[Se],Ve={key:3},Te=t("div",{class:"bg-white border-2 border-blue-700 text-center rounded text-black px-2"}," ลับ ",-1),Pe=[Te],je={key:4},Be=t("div",{class:"bg-white border-2 border-red-500 text-center rounded text-black px-2"}," ลับมาก ",-1),De=[Be],Ee={key:5},Ae=t("div",{class:"bg-white border-2 border-yellow-500 text-center rounded text-black px-2"}," ลับที่สุด ",-1),Me=[Ae],Oe={key:4},Ge={class:"py-4 px-3"};function Le(a,o,Re,Ne,n,u){const k=d("vSelect"),C=d("VueSelect"),I=d("InputGroup"),S=d("Button"),F=d("AdvancedSearch"),V=d("ImformationCard"),T=d("Tooltip"),m=d("Icon"),P=d("Pagination"),j=d("vue-good-table"),B=d("Card");return s(),l("div",{class:y(u.isMobile?"":"bg-white")},[t("div",Z,[u.isMobile?r("",!0):(s(),l("div",$,[t("div",ee,[t("div",null,[i(C,{classInput:"input_color"},{default:_(()=>[i(k,{modelValue:n.status,"onUpdate:modelValue":o[0]||(o[0]=e=>n.status=e),label:"title",placeholder:"สถานะทั้งหมด",class:"input_color border rounded w-[200px]",reduce:e=>e.id,options:n.statusList,"onOption:selected":o[1]||(o[1]=e=>u.onFilter({status:n.status,keyword:n.keyword}))},null,8,["modelValue","reduce","options"])]),_:1})]),t("div",null,[i(I,{modelValue:n.keyword,"onUpdate:modelValue":o[2]||(o[2]=e=>n.keyword=e),placeholder:"Search",classInputGroup:"border-gray-200",type:"text",prependIcon:"heroicons-outline:search",merged:"",inputEnter:"","onEvent:inputEnter":o[3]||(o[3]=e=>u.onFilter({status:n.status,keyword:n.keyword}))},null,8,["modelValue"])]),t("div",null,[i(S,{icon:"mdi:filter",text:"ค้นหาขั้นสูง",btnClass:"btn-primary flex items-center rounded-md h-[40px]",onClick:o[4]||(o[4]=e=>n.openFilter=!n.openFilter)})])])])),i(F,{isOpen:n.openFilter,"onEvent:close":o[5]||(o[5]=e=>n.openFilter=!1),"onEvent:submit":u.onFilter},null,8,["isOpen","onEvent:submit"]),u.isMobile?r("",!0):(s(),Q(V,{key:1})),i(B,{noborder:"",bodyClass:"p-0"},{default:_(()=>[i(j,{columns:n.columns,styleClass:" vgt-table bordered lesspadding2",rows:n.advancedTable,"pagination-options":{enabled:!0,perPage:n.paginate.perpage},"sort-options":{enabled:!1},"select-options":{enabled:!1,selectOnCheckboxOnly:!0,selectioninfoClass:"custom-class",selectionText:"rows selected",clearSelectionText:"clear"}},{emptystate:_(()=>[te]),"table-row":_(e=>{var g,h,f,b,x,v,w;return[e.column.field=="subject"?(s(),l("span",oe,[t("div",ne,[i(T,null,{base:_(()=>[t("div",{class:"ell-1 cursor-pointer hover:underline",onClick:c=>a.$router.push("/app/receive-list/receive-book/"+e.row.id)},p(e.row.subject),9,se)]),default:_(()=>[t("div",null,p(e.row.subject),1)]),_:2},1024),t("div",le,p(e.row.detail),1),(g=e.row)!=null&&g.document_attachments&&((h=e.row)==null?void 0:h.document_attachments.length)>0?(s(),l("div",re,[(s(!0),l(W,null,X(e.row.document_attachments,c=>(s(),l("div",{key:c},[t("a",{href:a.urlSarabun+(c==null?void 0:c.file_path),target:"_blank",class:""},[t("div",ae,[i(m,{icon:"ant-design:file-pdf-filled",class:"text-red-500 pr-1"}),t("div",de,p(c==null?void 0:c.file_name),1)])],8,ie)]))),128))])):r("",!0)])])):r("",!0),e.column.field=="status"?(s(),l("span",ce,[t("span",{class:y(["px-2 py-1 rounded text-white",((f=e.row)==null?void 0:f.status)=="ปฏิบัติงานเสร็จ"?"bg-green-500":"bg-red-500"])},p((b=e.row)==null?void 0:b.status),3)])):r("",!0),e.column.field=="document_number"?(s(),l("span",ue,p(e.row.document_number?e.row.document_number:(x=e.row)==null?void 0:x.book_pdf_at),1)):r("",!0),e.column.field=="book"?(s(),l("span",_e,[t("div",pe,[t("div",me,[e.row.document_type=="เอกสารทั่วไป (ส่งฉบับจริง)"?(s(),l("div",ge,[i(m,{icon:"emojione-monotone:letter-p",class:"handle text-[25px] text-yellow-500"})])):r("",!0),e.row.document_type=="เอกสารอิเล็กทรอนิกส์"?(s(),l("div",he,[i(m,{icon:"emojione-monotone:letter-e",class:"handle text-[25px] text-blue-700"})])):r("",!0),e.row.document_type=="หนังสือรับจากอีเมล"?(s(),l("div",fe,[i(m,{icon:"mdi:email",class:"handle text-[25px] text-orange-500"})])):r("",!0)]),t("div",be,[e.row.urgency_level=="ด่วน"?(s(),l("div",xe,we)):r("",!0),e.row.urgency_level=="ด่วนมาก"?(s(),l("div",ye,Ce)):r("",!0),e.row.urgency_level=="ด่วนที่สุด"?(s(),l("div",Ie,Fe)):r("",!0),e.row.secrecy_level=="ลับ"?(s(),l("div",Ve,Pe)):r("",!0),e.row.secrecy_level=="ลับมาก"?(s(),l("div",je,De)):r("",!0),e.row.secrecy_level=="ลับที่สุด"?(s(),l("div",Ee,Me)):r("",!0)])])])):r("",!0),e.column.field=="from"?(s(),l("span",Oe,p(e.row.book_type=="inside"?(v=e.row.from_data)==null?void 0:v.organization_name:(w=e.row.from_data)==null?void 0:w.name),1)):r("",!0)]}),"pagination-bottom":_(e=>[t("div",Ge,[i(P,{total:n.paginate.total,current:n.paginate.current_page,"per-page":n.paginate.perpage,pageRange:n.paginate.pageRange,onPageChanged:o[6]||(o[6]=g=>u.changePage(g)),pageChanged:e.pageChanged,perPageChanged:e.perPageChanged,textAfterInput:"ไปที่หน้า",enableSearch:"",enableInput:""},null,8,["total","current","per-page","pageRange","pageChanged","perPageChanged"])])]),_:1},8,["columns","rows","pagination-options"])]),_:1})])],2)}const pt=O(Y,[["render",Le]]);export{pt as default};
