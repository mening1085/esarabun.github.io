import{T as C}from"./index-b52aeb81.js";import{T as P}from"./index-3e8503e7.js";import{u as T,a as x}from"./vee-validate.esm-bf91438b.js";import{c as E,a as h,b as M}from"./array-6ac4c54d.js";import{aF as i,as as u,o as w,x as l,bo as A,p as e,aA as S,k as j,aT as O,bj as V,m as D,n as N,ae as q,F as U,v as R,w as b}from"./preload-helper-f37a9bec.js";import{_ as B,a as z,c as G,u as H}from"./index-f91482a0.js";import{M as W}from"./Modal-b54f1b5f.js";import{B as Y}from"./index-c2d6eb9c.js";import{I as J}from"./index-8d30ace7.js";import{p as K}from"./e-office-bg-8bf4c977.js";import{_ as L,a as Q}from"./logo-c4723144.js";import{T as X}from"./index-c09571ef.js";import{A as Z}from"./index-6ecf5774.js";import{_ as $}from"./header-logo-d21824f9.js";import"./vue-cleave.min-df5c8cc9.js";import"./transition-be7c09bc.js";import"./dom-b10fc197.js";import"./hidden-800255f5.js";import"./focus-management-94a631f4.js";import"./micro-task-89dcd6af.js";import"./open-closed-75edfb8a.js";import"./use-outside-click-156e41c1.js";import"./iconify-2baafea4.js";const oo={components:{Textinput:P},data(){return{checkbox:!1}},setup(){const r=E({password:h().required("กรุณากรอกรหัสผ่าน").min(8,"รหัสผ่านควรมีความยาว 8 ตัวอย่างต่ำ"),confirmpassword:h().required("กรุณากรอกยืนยันหรัสผ่าน").oneOf([M("password"),null],"รหัสผ่านไม่ตรงกัน")}),{handleSubmit:s}=T({validationSchema:r}),{value:c,errorMessage:o}=x("password"),{value:d,errorMessage:m}=x("confirmpassword"),a=s(()=>{});return{password:c,confirmpassword:d,confirmpasswordError:m,passwordError:o,onSubmit:a}}},eo=e("div",{class:"text-center"},[e("button",{type:"submit",class:"btn btn-primary w-5/12 text-center mr-7 mt-7"}," ตกลง "),e("button",{type:"button",onclick:"window.location.href='/'",class:"btn btn-white w-5/12 text-center border",style:{color:"rgb(177,177,182)"}},"ยกเลิก")],-1);function so(r,s,c,o,d,m){const a=i("Textinput");return u(),w("form",{onSubmit:s[2]||(s[2]=A((...t)=>o.onSubmit&&o.onSubmit(...t),["prevent"])),class:"space-y-4"},[l(a,{label:"รหัสผ่านใหม่",placeholder:"",type:"password",name:"password",hasicon:"",modelValue:o.password,"onUpdate:modelValue":s[0]||(s[0]=t=>o.password=t),error:o.passwordError,classInput:"h-[48px]"},null,8,["modelValue","error"]),l(a,{label:"ยืนยันรหัสผ่านใหม่",placeholder:"",type:"password",name:"confirmpassword",hasicon:"",modelValue:o.confirmpassword,"onUpdate:modelValue":s[1]||(s[1]=t=>o.confirmpassword=t),error:o.confirmpasswordError,classInput:"h-[48px]"},null,8,["modelValue","error"]),eo],32)}const to=B(oo,[["render",so]]);const ro={data(){return{checkbox:!1,logoWhite:L,logo:Q,pageBg:K}},components:{Avatar:Z,Tooltip:C,Modal:W,Button:Y,Icon:J,Textinput:P,ChangePassword:to,TooltipPassword:X},setup(){const r=S(!1),s=j(()=>G().userInfo);console.log("userInfo",s.value);const c=S(!1),o=S(!1),d=H(),m=E({password:h().required("กรุณากรอกรหัสผ่าน").min(6,"รหัสผ่านต้องมีอย่างน้อย 6 ตัวอักษร"),confirmpassword:h().required("กรุณากรอกยืนยันรหัสผ่าน").oneOf([M("password"),null],"รหัสผ่านไม่ตรงกัน")}),{handleSubmit:a}=T({validationSchema:m}),{value:t,errorMessage:_}=x("password"),{value:f,errorMessage:v}=x("confirmpassword"),g=a(async p=>{if(!r.value&&t.value==f.value){let I={id:s.value.id,newPassword:t.value};console.log("payload",I);const{data:Vo,status:F}=await z("authStore","changePassword",{payload:I});F==200&&(o.value=!0,console.log("both password is the same"))}});return{userInfo:s,password:t,confirmpassword:f,confirmpasswordError:v,passwordError:_,onSubmit:g,isShowDialog:o,onAccept:()=>{o.value=!1,d.push("/")},onFocusInput:p=>{c.value=p},validPassword:p=>{console.log("validPassword",p),r.value=p},showValidPassword:c,checkValid:r}}},ao=R('<nav class="flex items-center justify-between shadow-lg shadow-black-300/50 flex-wrap relative" style="background-color:white;z-index:1;"><div class="flex items-center flex-shrink-0 text-white mr-6"><img class="content-center" src="'+$+'" alt="" width="80" height="80"><div class="flex flex-col ml-2"><span class="text-l font-bold text-slate-900 dark:text-white" style="color:rgba(6, 0, 215, 1);"> สำนักงานเศรษฐกิจการเกษตร </span><span class="text-xs text-slate-900 dark:text-white" style="color:rgba(6, 0, 215, 1);"> e-Office Automation </span></div></div></nav>',1),no={class:"lg-inner-column",style:{"margin-top":"140px"}},lo={class:"lg:w-1/2 w-full flex flex-col items-center justify-center mac",style:{"margin-left":"auto","margin-right":"auto"}},io={style:{"margin-top":"-250px"}},co=e("div",{class:"text-center 2xl:mb-10 mb-5"},[e("h4",{class:"font-medium mb-4",style:{color:"rgba(6, 0, 215, 1)"}}," เปลี่ยนรหัสผ่าน "),e("div",{class:"text-slate-500 dark:text-slate-400 text-base"}," การเข้าสู่ระบบครั้งแรกต้องเปลี่ยนรหัสผ่าน เพื่อความปลอดภัย ")],-1),mo={class:"author-bio flex text-center mb-8",style:{"margin-top":"50px"}},po={class:"h-14 w-14 mx-auto rounded-full mr-5"},uo={class:"text-slate-900 dark:text-white text-base font-medium mt-4",style:{"margin-right":"auto"}},fo=e("div",{class:"text-center"},[e("button",{type:"submit",class:"btn btn-primary w-5/12 text-center mr-7 mt-7"}," ตกลง "),e("button",{type:"button",onclick:"window.location.href='/'",class:"btn btn-white w-5/12 text-center border",style:{color:"rgb(142, 142, 150)","border-color":"rgb(142, 142, 150)"}}," ยกเลิก ")],-1),wo=e("div",{class:"auth-footer3 py-5 px-5 text-l w-full",style:{color:"rgba(105, 105, 116, 1)"}},[b(" COPYRIGHT © 2023 "),e("b",null,"e-Office"),b(", All rights Reserved ")],-1),xo={class:"h-36 flex items-center justify-center"},ho={class:"text-center flex flex-row flex-wrap justify-center"},bo={class:"basis-full flex justify-center mb-5"},_o={key:0,class:"text-lg text-slate-900"},vo=e("span",{class:"text-green-500"},"สำเร็จ",-1),go={key:1,class:"text-lg text-slate-900"},yo=e("span",{class:"text-green-500"},"สำเร็จ",-1),ko={class:"flex justify-center w-full"};function So(r,s,c,o,d,m){var y,k;const a=i("Avatar"),t=i("Textinput"),_=i("TooltipPassword"),f=i("Icon"),v=i("Button"),g=i("Modal");return u(),w(U,null,[ao,e("div",{class:"loginwrapper bg-cover bg-no-repeat bg-center",style:q([{backgroundImage:"url("+d.pageBg+")"},{height:"calc(100vh - 71px)","min-height":"500px","background-color":"white"}])},[e("div",no,[e("div",lo,[e("div",io,[co,e("div",mo,[e("div",po,[l(a,{image:(y=o.userInfo)==null?void 0:y.profile_image},null,8,["image"])]),e("div",uo,O((k=o.userInfo)==null?void 0:k.full_name),1)]),e("form",{onSubmit:s[2]||(s[2]=A((...n)=>o.onSubmit&&o.onSubmit(...n),["prevent"])),class:"space-y-4"},[l(_,{isOpen:o.showValidPassword&&o.password!="",password:o.password,"onEvent:validPassword":o.validPassword},{default:V(()=>[l(t,{label:"รหัสผ่านใหม่",placeholder:"",type:"password",name:"password",hasicon:"",modelValue:o.password,"onUpdate:modelValue":s[0]||(s[0]=n=>o.password=n),focus:"",blur:"","onEvent:focus":o.onFocusInput,classInput:"h-[48px]"},null,8,["modelValue","onEvent:focus"])]),_:1},8,["isOpen","password","onEvent:validPassword"]),l(t,{label:"ยืนยันรหัสผ่านใหม่",placeholder:"",type:"password",name:"confirmpassword",hasicon:"",modelValue:o.confirmpassword,"onUpdate:modelValue":s[1]||(s[1]=n=>o.confirmpassword=n),error:o.confirmpasswordError,classInput:"h-[48px]"},null,8,["modelValue","error"]),fo],32)])]),wo]),o.isShowDialog?(u(),D(g,{key:0,title:"ตั้งค่ารหัสผ่านใหม่สำเร็จ",label:"",labelClass:"btn-outline-dark",ref:"modalDialog",centered:"",activeModal:o.isShowDialog,"onEvent:closeModal":s[4]||(s[4]=n=>o.onAccept())},{footer:V(()=>[e("div",ko,[l(v,{text:"ปิด",btnClass:"btn-white w-36 border",style:{"border-color":"#e7e7e7","border-radius":"5px"},onClick:s[3]||(s[3]=n=>o.onAccept())})])]),default:V(()=>[e("div",xo,[e("div",ho,[e("div",bo,[l(f,{icon:"icon-park-solid:protect",class:"text-5xl text-green-500"})]),r.$route.params.id?(u(),w("h4",_o,[b(" ตั้งค่ารหัสผ่านใหม่ "),vo])):(u(),w("h4",go,[b(" ตั้งค่ารหัสผ่านใหม่ "),yo]))])])]),_:1},8,["activeModal"])):N("",!0)],4)],64)}const Lo=B(ro,[["render",So]]);export{Lo as default};
