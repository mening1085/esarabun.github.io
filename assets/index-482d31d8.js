import{aA as f,al as A,k as O,be as F,aF as n,as as c,o as C,m as I,bj as v,p as e,F as q,aD as z,x as a,aT as L,ac as H,bo as J,n as K}from"./preload-helper-9e0646ca.js";import{B as Q}from"./index-441935dc.js";import{M as W}from"./Modal-19eb68c4.js";import{T as X}from"./index-31d1a8ca.js";import{T as Y}from"./index-ce9a51c5.js";import{I as Z}from"./index-72ee420c.js";import{P as $}from"./index-3e810d59.js";import{u as ee,a as M}from"./vee-validate.esm-0c282d04.js";import{T as te}from"./TextValid-100be459.js";import{c as ae,a as P}from"./array-e684e252.js";import{B as se,c as g,_ as oe,C as le,t as ne}from"./index-e058a960.js";import{R as re}from"./index-3069c0b6.js";import{l as ie,a as de,n as ce,r as ue,u as me}from"./tabs-aa384b53.js";const _e={name:"Success",props:{title:{type:String,default:""},isOpen:{type:Boolean,default:!1},item:{type:Object,default:{}},pinError:{type:String,default:""}},components:{Radio:re,Modal:W,Button:Q,Textinput:X,Icon:Z,PinInput:$,Textarea:Y,TextValid:te,VueSignaturePad:se,TabGroup:ie,TabList:de,Tab:ce,TabPanels:ue,TabPanel:me},data:()=>({orderList:[{value:"เพื่อทราบ"},{value:"ลงนาม"},{value:"สั่งการ"}],options:{penColor:"#c0f"}}),emits:["event:submit","event:closeModal","event:pincode"],setup(N,o){const u=f({}),t=f(!1),p=f(null),m=f(0),S=f([{title:"ใบรับรองอิเล็กทรอนิกส์"},{title:"วาดลายมือชื่อ"}]);A(()=>{u.value=g().userInfo,d.value||(m.value=1)});const b=ae({orderType:P().required("กรุณาเลือกคำสั่ง/คำเสนอ"),detail:P().required("กรุณากรอกรายละเอียดการปฏิบัติ"),signature:P().nullable().required("กรุณาใส่ลายเซ็น"),pincode:P().nullable().required("กรุณากรอกรหัส PIN Code ของใบอนุญาติอิเล็กทรอนิกส์")}),{handleSubmit:k,resetForm:V}=ee({validationSchema:b}),{value:h,errorMessage:y}=M("orderType"),{value:_,errorMessage:w}=M("detail"),{value:r,errorMessage:E}=M("signature"),{value:x,errorMessage:T}=M("pincode"),B=s=>{console.log("updatePin",s),x.value=s},l=O(()=>le().signature),d=O(()=>{var s,i;return(s=g().userInfo)!=null&&s.signature_path?ne+((i=g().userInfo)==null?void 0:i.signature_path):""});F(()=>x.value,s=>{o.emit("event:pincode",s)}),F(()=>l.value,s=>{r.value=s}),F(()=>m.value,s=>{var i;s==0&&(r.value=(i=g().userInfo)==null?void 0:i.signature_path)},{immediate:!0});const j=()=>{p.value.undoSignature()},R=()=>{t.value=!0,setTimeout(()=>{const{isEmpty:s,data:i}=p.value.saveSignature();r.value=i,t.value=!1},1e3)},U=()=>{r.value="",p.value.clearSignature()},D=s=>{var i;m.value=s,r.value="",s==0&&(r.value=(i=g().userInfo)==null?void 0:i.signature_path),console.log("tabtab",s)},G=k(async()=>{o.emit("event:submit",{pincode:x.value,order_type:h.value,order_detail:_.value,signature:r.value})});return{selected:m,signaturePad:p,saveSignature:t,pincode:x,pincodeError:T,tabMenu:S,signature:r,signatureError:E,detail:_,detailError:w,orderType:h,orderTypeError:y,updatePin:B,submit:G,changeTab:D,signatureImage:d,closeModal:()=>{V(),m.value=0,r.value="",m.value==1&&p.value.clearSignature(),o.emit("event:closeModal")},userInfo:u,save:R,undo:j,remove:U}}},ve={class:"px-20 list list-odd space-y-4 mb-12"},pe={class:"flex space-x-5 py-3"},be=e("div",{class:"font-bold basis-1/4 text-end"},"คำสั่งการ/คำเสนอ",-1),xe={class:"basis-3/4 space-y-1"},fe={class:"flex space-x-5"},ge=e("div",{class:"font-bold basis-1/4 text-end"},"รายละเอียดการปฏิบัติ",-1),he={class:"basis-3/4"},ye={class:"flex space-x-5 h-[50px] items-center"},Te=e("div",{class:"font-bold basis-1/4 text-end"},"ผู้ลงนาม:",-1),Ce={class:"basis-3/4"},Ie={class:"flex space-x-5"},Me=e("div",{class:"font-bold basis-1/4 text-end"},"ตำแหน่ง:",-1),Pe={class:"basis-3/4"},Se=e("div",null,null,-1),ke={class:"space-x-4"},Ve=e("div",{class:"text-gray-500 text-[20px] mb-2"},"ลงนามคำสั่งการ",-1),we={class:"text-slate-600 text-sm font-normal flex space-x-3 items-center"},Ee=["src"],Be=e("div",{class:"text-gray-500 text-[16px] basis-1/4"}," วาดลายมือชื่อ (ภาษาไทย) ",-1),je={class:"text-slate-600 text-sm font-normal"},Fe={class:"border-2"},Le={class:"container p-2 space-y-2"},Ne={class:"flex justify-between items-center gap-3"},Oe=e("div",{class:"md:text-[12px] text-[12px]"}," วาดลายมือชื่อ ",-1),qe={class:"flex gap-2"},ze={class:"p-2"},Re={class:"text-[16px] basis-1/4"},Ue=e("div",null,null,-1),De={class:"mt-3 flex"},Ge=e("div",{class:"text-gray-500 text-[16px] basis-1/4"},"รหัส PIN Code",-1),Ae={class:"basis-3/4 justify-start space-y-1"},He={class:"text-[16px] basis-1/4"},Je=e("hr",{class:"my-2"},null,-1),Ke={class:"flex justify-center w-full"};function Qe(N,o,u,t,p,m){const S=n("Radio"),b=n("TextValid"),k=n("Textarea"),V=n("Tab"),h=n("TabList"),y=n("TabPanel"),_=n("Icon"),w=n("VueSignaturePad"),r=n("TabPanels"),E=n("TabGroup"),x=n("PinInput"),T=n("Button"),B=n("Modal");return c(),C("div",null,[u.isOpen?(c(),I(B,{key:0,title:u.title,label:"",labelClass:"btn-outline-dark",sizeClass:"md:w-2/5 w-full z-[1]",ref:"modalDialog",centered:"",activeModal:u.isOpen,"onEvent:closeModal":o[4]||(o[4]=l=>t.closeModal())},{default:v(()=>[e("form",{onSubmit:o[3]||(o[3]=J((...l)=>t.submit&&t.submit(...l),["prevent"]))},[e("div",ve,[e("div",pe,[be,e("div",xe,[(c(!0),C(q,null,z(N.orderList,(l,d)=>(c(),C("div",{key:d},[a(S,{label:l.value,class:"mb-5",modelValue:t.orderType,"onUpdate:modelValue":o[0]||(o[0]=j=>t.orderType=j),activeClass:l.activeClass,value:l.value},null,8,["label","modelValue","activeClass","value"])]))),128)),a(b,{valid:t.orderTypeError},null,8,["valid"])])]),e("div",fe,[ge,e("div",he,[a(k,{placeholder:"",classInput:"border border-gray-400 text_area_bg p-3",rows:4,modelValue:t.detail,"onUpdate:modelValue":o[1]||(o[1]=l=>t.detail=l),error:t.detailError},null,8,["modelValue","error"])])]),e("div",ye,[Te,e("div",Ce,L(t.userInfo.full_name),1)]),e("div",Ie,[Me,e("div",Pe,L(t.userInfo.position),1)]),Se,e("div",ke,[Ve,a(E,{selectedIndex:t.selected,onChange:t.changeTab},{default:v(()=>[a(h,{class:"flex"},{default:v(()=>[(c(!0),C(q,null,z(t.tabMenu,(l,d)=>(c(),I(V,{as:"template",disabled:!t.signatureImage&&d==0,key:d,class:"basis-1/2"},{default:v(()=>[e("button",{class:H([[t.selected==d?"text-primary-500 before:w-full border-b-2 border-primary-500":"text-slate-500 before:w-0 dark:text-slate-300 border-b-2 border-gray-200"],"text-sm font-medium mb-2 capitalize bg-gray-200 py-2"])},L(l.title),3)]),_:2},1032,["disabled"]))),128))]),_:1}),a(r,null,{default:v(()=>[a(y,null,{default:v(()=>[e("div",we,[e("img",{src:t.signatureImage,class:"h-[80px] w-[150px] object-cover border"},null,8,Ee),Be])]),_:1}),a(y,null,{default:v(()=>[e("div",je,[e("div",Fe,[e("div",Le,[e("div",Ne,[Oe,e("div",qe,[t.saveSignature?(c(),I(_,{key:0,icon:"eos-icons:bubble-loading",class:"text-green-500 text-2xl animate-spin"})):(c(),I(_,{key:1,icon:"material-symbols:save",class:"text-green-500 text-2xl",onClick:t.save},null,8,["onClick"])),a(_,{icon:"dashicons:undo",class:"text-gray-500 text-2xl border-l pl-2",onClick:t.undo},null,8,["onClick"]),a(_,{icon:"material-symbols:delete",class:"text-red-500 text-2xl",onClick:t.remove},null,8,["onClick"])])]),e("div",ze,[a(w,{id:"signature",ref:"signaturePad"},null,512)])])])])]),_:1})]),_:1})]),_:1},8,["selectedIndex","onChange"]),e("div",Re,[a(b,{valid:t.signatureError},null,8,["valid"])])]),Ue,e("div",De,[Ge,e("div",Ae,[a(x,{"onUpdate:modelValue":t.updatePin,classInput:"border border-gray-400",placeholder:"กรอกรหัส Pin Code"},null,8,["onUpdate:modelValue"]),e("div",He,[a(b,{valid:t.pincodeError},null,8,["valid"]),a(b,{valid:u.pinError},null,8,["valid"])])])])]),Je,e("div",Ke,[a(T,{text:"ยืนยัน",type:"submit",btnClass:"btn-primary w-32 mx-2"}),a(T,{text:"ยกเลิก",btnClass:"btn-outline-dark w-32 mx-2",onClick:o[2]||(o[2]=l=>t.closeModal())})])],32)]),_:1},8,["title","activeModal"])):K("",!0)])}const dt=oe(_e,[["render",Qe]]);export{dt as M};
