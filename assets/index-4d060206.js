import{M as b}from"./Modal-b54f1b5f.js";import{T as h}from"./index-3e8503e7.js";import{B as x}from"./index-c2d6eb9c.js";import{_ as v,c as y,a as g}from"./index-f91482a0.js";import{aF as i,as as l,o as d,m as M,bj as f,p as e,x as c,aT as m,n as p}from"./preload-helper-f37a9bec.js";const E={components:{Modal:b,Textinput:h,Button:x},emits:["event:close","event:success","event:clearErrorMessage"],props:{title:{type:String,default:""},modalId:{type:[String,Number],default:""},status:{type:Boolean,default:!1},isOpen:{type:Boolean,default:!0},errorMessage:{type:String,default:""}},data(){return{password:"",passwordError:"",userInfo:y().userInfo,isSuccess:!1}},watch:{password(){this.$emit("event:clearErrorMessage"),this.password!=""?this.passwordError="":this.passwordError="กรุณากรอกรหัสผ่าน"}},methods:{async onAcceptSwitch(){if(this.password=="")this.passwordError="กรุณากรอกรหัสผ่าน";else{const r=await g("generalStore","confirmPassword",{payload:{password:this.password}});r.status==200?this.$emit("event:success",{id:this.modalId,status:this.status}):(console.log("error",r),this.passwordError=r.data.message)}},successModal(){this.password="",this.passwordError="",this.isSuccess=!0,this.$emit("event:success")},closeModal(){this.password="",this.passwordError="",this.$emit("event:close")}}},k={class:"py-6"},S={class:"flex flex-wrap items-center py-2 mb-3"},B=e("div",{class:"sm:basis-1/4 basis-full pr-5 flex sm:justify-end justify-start mb-1 sm:mb-0"}," ชื่อผู้ใช้งาน ",-1),C={class:"sm:basis-3/4 basis-full"},I={class:"flex flex-wrap py-2 mb-3"},j=e("div",{class:"sm:basis-1/4 basis-full pr-5 pt-1 flex sm:justify-end justify-start mb-1 sm:mb-0"}," รหัสผ่าน ",-1),V={class:"sm:basis-3/4 basis-full"},O={key:0,class:"mt-2 text-danger-500 block text-sm"},T={key:1,class:"mt-2 text-danger-500 block text-sm"},N={class:"text-center mt-4 flex justify-center w-full"};function A(r,s,o,D,t,n){const w=i("Textinput"),u=i("Button"),_=i("Modal");return l(),d("div",null,[o.isOpen?(l(),M(_,{key:0,title:o.title,labelClass:"btn-outline-dark",label:"",ref:"modalDialog",centered:"",activeModal:o.isOpen,"onEvent:closeModal":s[3]||(s[3]=a=>n.closeModal())},{footer:f(()=>[e("div",N,[c(u,{text:"ยืนยัน",btnClass:"btn-primary w-32 mx-2",onOnClick:s[1]||(s[1]=a=>n.onAcceptSwitch())}),c(u,{text:"ยกเลิก",btnClass:"btn-outline-dark w-32 mx-2",onOnClick:s[2]||(s[2]=a=>n.closeModal())})])]),default:f(()=>[e("div",k,[e("div",S,[B,e("div",C,m(t.userInfo.full_name),1)]),e("div",I,[j,e("div",V,[c(w,{classInput:`border border-gray-400 ${t.passwordError?"border-red-500":""}`,type:"password",modelValue:t.password,"onUpdate:modelValue":s[0]||(s[0]=a=>t.password=a)},null,8,["classInput","modelValue"]),t.passwordError?(l(),d("span",O,m(t.passwordError),1)):p("",!0),o.errorMessage?(l(),d("span",T,m(o.errorMessage),1)):p("",!0)])])])]),_:1},8,["title","activeModal"])):p("",!0)])}const G=v(E,[["render",A]]);export{G as C};
