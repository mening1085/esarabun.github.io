import{aA as i,be as _,aF as n,as as f,o as I,m as F,bj as p,p as o,x as l,F as B,aD as U,ac as Q,aT as W,bo as X,n as q}from"./preload-helper-9e0646ca.js";import{M as Y}from"./index-1b218db3.js";import{B as Z}from"./index-441935dc.js";import{T as $}from"./index-31d1a8ca.js";import{I as ee}from"./index-72ee420c.js";import{C as ae}from"./index-8994827d.js";import{R as oe}from"./index-3069c0b6.js";import{u as te,a as M}from"./vee-validate.esm-0c282d04.js";import{c as P,a as h}from"./array-e684e252.js";import{T as se}from"./index-ce9a51c5.js";import{_ as le,a as re}from"./index-e058a960.js";import{T as ne}from"./TextValid-100be459.js";import{l as ie,a as de,n as me,r as ue,u as ce}from"./tabs-aa384b53.js";const be={name:"ModalOrganizeOut",components:{Modal:Y,Button:Z,Icon:ee,TabGroup:ie,TabList:de,Tab:me,TabPanels:ue,TabPanel:ce,Checkbox:ae,TextInput:$,Radio:oe,Textarea:se,TextValid:ne},props:["tabIndex","title","isOpen","items","modalId"],setup(r,{emit:a}){console.log("props",r.tabIndex);const N=i(r.title||""),e=i(r.isOpen||!1),d=i(r.items||[]),E=i(""),m=i(r.items||[]),y=i(!1),b=i([{title:"หน่วยงานภายนอก"},{title:"เพิ่มหน่วยงานภายนอก"}]),T=i(r.tabIndex),u=i(""),c=i(""),O=/^(09|08|06|02)\d{8}$/,k=P({organizationName:h().required("กรุณาระบุชื่อหน่วยงานภายนอก"),name:h().required("กรุณาระบุชื่อผู้ติดต่อ"),address:h().required("กรุณาระบุที่อยู่"),phoneNumber:h().required("กรุณาระบุเบอร์โทร").matches(O,"กรุณากรอกเบอร์โทรให้ถูกต้อง"),email:h().required("กรุณาระบุอีเมล")});P({organization_name:h().required("กรุณาเลือกหน่วยงาน")});const v=te({validationSchema:k});_(()=>r.modalId,s=>{u.value=s||""}),_(()=>r.title,s=>{N.value=s||""}),_(()=>r.items,s=>{m.value=s||""}),_(()=>m.value,s=>{d.value=s||""}),_(()=>r.isOpen,s=>{e.value=s||!1}),_(()=>E.value,s=>{s==""&&(d.value=m.value)}),_(()=>u.value,s=>{s&&(c.value="")});const{value:w,errorMessage:z}=M("organizationName"),{value:t,errorMessage:V}=M("name"),{value:x,errorMessage:R}=M("address"),{value:C,errorMessage:j}=M("phoneNumber"),{value:S,errorMessage:L}=M("email"),D=()=>{u.value="",v.resetForm(),c.value=""},G=()=>{if(console.log("onSubmitModal"),!u.value){c.value="กรุณาเลือกหน่วยงาน";return}const s=d.value.find(g=>g.id===u.value);s&&(v.resetForm(),a("event:submit",s))},A=()=>{D(),a("event:close")},H=s=>{T.value=s,v.resetForm()},J=()=>{d.value=m.value;const s=d.value.filter(g=>g.name.includes(E.value));d.value=s},K=v.handleSubmit(async()=>{console.log("create submit");let s={name:w.value,guide_book:t.value,address:x.value,phone_number:C.value,email:S.value};const g=await re("outSideOrganizationStore","store",{payload:{data:s}});g.status===200?(m.value.push(g.data.result),v.resetForm(),T.value=0):(y.value=!0,setTimeout(()=>{y.value=!1},5e3))});return{title:N,isOpen:e,items:d,radioOptions:m,search:E,organizationName:w,organizationNameError:z,name:t,nameError:V,address:x,addressError:R,phoneNumber:C,phoneNumberError:j,email:S,emailError:L,tabs:b,selectedItem:u,selectedItemError:c,isError:y,selectedTab:T,onSubmitModal:G,closeModal:A,onSearch:J,onSubmitOrganize:K,changeTab:H}}},ve={class:""},_e={class:""},fe={class:"border rounded-lg px-4 py-2 mt-4"},pe={class:"gap-5 h-[300px] overflow-y-auto"},xe={class:"text-center my-4 flex justify-center w-full"},ge={class:"mt-4"},he={class:"py-3 flex gap-5"},ye=o("div",{class:"pt-2 basis-1/3 text-end"}," ชื่อหน่วยงานภายนอก ",-1),Te={class:"basis-1/3"},Ve={class:"py-3 flex gap-5"},Ie=o("div",{class:"basis-1/3 text-end"},"ชื่อผู้ติดต่อ",-1),Me={class:"basis-1/3"},Ee={class:"py-3 flex gap-5"},Oe=o("div",{class:"basis-1/3 text-end"},"ที่อยู่",-1),we={class:"basis-1/3"},Ne={class:"py-3 flex gap-5"},ke=o("div",{class:"basis-1/3 text-end"},"โทรศัพท์",-1),ze={class:"basis-1/3"},Ce={class:"py-3 flex gap-5"},Se=o("div",{class:"basis-1/3 text-end"},"Email Address",-1),Fe={class:"basis-1/3"},Be={key:0,class:"text-sm mt-6 text-red-500"},Ue=o("hr",{class:"mt-5 border"},null,-1),qe={class:"text-center mt-4 flex justify-center w-full"};function Pe(r,a,N,e,d,E){const m=n("Tab"),y=n("TabList"),b=n("TextInput"),T=n("Radio"),u=n("TextValid"),c=n("Button"),O=n("TabPanel"),k=n("Textarea"),v=n("TabPanels"),w=n("TabGroup"),z=n("Modal");return f(),I("div",null,[e.isOpen?(f(),F(z,{key:0,title:e.title,label:"",labelClass:"btn-outline-dark",sizeClass:"w-full max-w-[700px]",centered:"",ref:"modalDialog",activeModal:e.isOpen,"onEvent:closeModal":a[10]||(a[10]=t=>e.closeModal())},{default:p(()=>[o("div",ve,[l(w,{selectedIndex:e.selectedTab,onChange:e.changeTab},{default:p(()=>[l(y,{class:"flex justify-center border-b"},{default:p(()=>[(f(!0),I(B,null,U(e.tabs,(t,V)=>(f(),F(m,{as:"template",key:V,class:"px-3 basis-1/2"},{default:p(({selected:x})=>[o("button",{class:Q([[x?"text-primary-500 before:w-full border-b-2 pb-1 border-primary-500":"text-slate-500 before:w-0 dark:text-slate-300"],"min-w-[150px]"])},W(t.title),3)]),_:2},1024))),128))]),_:1}),l(v,null,{default:p(()=>[l(O,null,{default:p(()=>[l(b,{type:"text",classInput:"border border-gray-300 w-full mt-3",keyupEnter:"",modelValue:e.search,"onUpdate:modelValue":a[0]||(a[0]=t=>e.search=t),placeholder:"พิมพ์ชื่อพนักงานแล้วกดปุ่ม Enter","onEvent:enter":a[1]||(a[1]=t=>e.onSearch())},null,8,["modelValue"]),o("div",_e,[o("div",fe,[o("div",pe,[(f(!0),I(B,null,U(e.items,(t,V)=>(f(),I("div",{key:V},[l(T,{label:t.name,modelValue:e.selectedItem,"onUpdate:modelValue":a[2]||(a[2]=x=>e.selectedItem=x),value:t.id},null,8,["label","modelValue","value"])]))),128))])])]),l(u,{valid:e.selectedItemError},null,8,["valid"]),o("div",xe,[l(c,{type:"submit",text:"ยืนยัน",onOnClick:e.onSubmitModal,btnClass:"btn-primary w-32 mx-2"},null,8,["onOnClick"]),l(c,{text:"ยกเลิก",btnClass:"btn-outline-dark w-32 mx-2",onOnClick:a[3]||(a[3]=t=>e.closeModal())})])]),_:1}),l(O,null,{default:p(()=>[o("form",{onSubmit:a[9]||(a[9]=X((...t)=>e.onSubmitOrganize&&e.onSubmitOrganize(...t),["prevent"])),class:"overflow-y-auto"},[o("div",ge,[o("div",he,[ye,o("div",Te,[l(b,{modelValue:e.organizationName,"onUpdate:modelValue":a[4]||(a[4]=t=>e.organizationName=t),error:e.organizationNameError,classInput:"border border-gray-400"},null,8,["modelValue","error"])])]),o("div",Ve,[Ie,o("div",Me,[l(b,{modelValue:e.name,"onUpdate:modelValue":a[5]||(a[5]=t=>e.name=t),error:e.nameError,classInput:"border border-gray-400"},null,8,["modelValue","error"])])]),o("div",Ee,[Oe,o("div",we,[l(k,{modelValue:e.address,"onUpdate:modelValue":a[6]||(a[6]=t=>e.address=t),error:e.addressError,classInput:"border border-gray-400 text_area_bg",placeholder:""},null,8,["modelValue","error"])])]),o("div",Ne,[ke,o("div",ze,[l(b,{modelValue:e.phoneNumber,"onUpdate:modelValue":a[7]||(a[7]=t=>e.phoneNumber=t),error:e.phoneNumberError,classInput:"border border-gray-400"},null,8,["modelValue","error"])])]),o("div",Ce,[Se,o("div",Fe,[l(b,{modelValue:e.email,"onUpdate:modelValue":a[8]||(a[8]=t=>e.email=t),error:e.emailError,classInput:"border border-gray-400"},null,8,["modelValue","error"]),e.isError?(f(),I("div",Be," เกิดข้อผิดพลาด บักทึกข้อมูลไม่สำเร็จ ")):q("",!0)])])]),Ue,o("div",qe,[l(c,{type:"submit",text:"เพิ่มหน่วยงาน",btnClass:"btn-primary w-32 mx-2"})])],32)]),_:1})]),_:1})]),_:1},8,["selectedIndex","onChange"])])]),_:1},8,["title","activeModal"])):q("",!0)])}const Ze=le(be,[["render",Pe]]);export{Ze as M};
