import{aA as V,al as T,o as f,x as r,bj as u,aF as d,as as x,p as t,F as w,aD as k,aT as B,bo as O,w as E}from"./preload-helper-9e0646ca.js";import{E as U}from"./index-1c6333b5.js";import{C as L}from"./index-263882d1.js";import{I as R}from"./index-72ee420c.js";import{R as z}from"./index-3069c0b6.js";import{T as A}from"./index-31d1a8ca.js";import{V as N,C as j}from"./VueSelect-4c8519b3.js";import{M as D}from"./index-7dc8252b.js";import{B as q}from"./index-441935dc.js";import{_ as G,a as I}from"./index-e058a960.js";import"./iconify-4e42c13d.js";import"./vue-cleave.min-9e1201c2.js";import"./index-1b218db3.js";import"./transition-39b574f4.js";import"./dom-891ac6c3.js";import"./hidden-11a9ab9d.js";import"./focus-management-e6c5d1fd.js";import"./micro-task-89dcd6af.js";import"./open-closed-486d85f0.js";import"./use-outside-click-a758fdce.js";const H={components:{Card:L,Icon:R,Radio:z,Button:q,Expansion:U,Textinput:A,VueSelect:N,vSelect:j,ModalSuccess:D},setup(){const h=V(!1),m=V([]),p=V([]),n=[{value:!0,label:"เปิดการอัปโหลด",activeClass:"ring-primary-500 border-primary-500"},{value:!1,label:"ปิดการอัปโหลด",activeClass:"ring-primary-500 border-primary-500"}];T(async()=>{const o=await I("uploadFileStore","get");o.status===200&&o.data.result.forEach(e=>{p.value.push({id:e.id,name:e.name,file_type:e.file_type,selected:e.file.filter(s=>s.enabled==!0),file_size_limit:e.file_size_limit,enabled:!0,file:e.file.filter(s=>{if(s.enabled==!1)return{id:s.id,name:s.name,file_type:s.file_type,enabled:s.enabled}})})})});const C=async()=>{let o=p.value;(await I("uploadFileStore","store",{payload:{allow:o}})).status===200&&(h.value=!0)},g=o=>{const e=p.value.find(c=>c.file_type==o[0].file_type),s=v(e.file,o);e.file=s},S=o=>{const e=p.value.find(c=>c.file_type==o.file_type),s=y(o.id,e.file,e.selected);e.file=s.left},v=(o,e)=>{o.map(i=>i.id);const s=e.map(i=>i.id);return o.filter(i=>!s.includes(i.id))},y=(o,e,s)=>{const c=s.find(i=>i.id===o);if(c){e.push(c),e.sort(function(_,l){var b=_.id,a=l.id;return b<a?-1:b>a?1:0});const i=s.filter(_=>_.id!==o);return{left:e,right:i}}else return{left:e,right:s}};return{isSuccess:h,selectedValue:m,radioOptions:n,forms:p,onSubmit:C,fileSelected:g,removeFileSelected:S,removeFromLeft:v,moveItemToLeft:y}}},J={class:"role_managment"},K={class:"flex items-center p-2 mb-3"},P=t("div",{class:"font-mediun"},"ตั้งค่าชนิดไฟล์ที่อนุญาต",-1),Q={class:"flex space-x-6 w-100 px-5"},W={class:"w-1/4 space-y-3 my-4"},X={class:"space-y-2"},Y=t("div",{class:"text-sm font-medium text-slate-500 dark:text-slate-200 layout-flex"}," เปิด/ปิดการอัปโหลด ",-1),Z={class:"text-slate-600 dark:text-slate-400 mb-1"},$={class:"space-y-2"},ee=t("div",{class:"text-sm font-medium text-slate-500 dark:text-slate-200 layout-flex"}," ขนาดไฟล์สูงสุด/ไฟล์ ",-1),te={class:"text-slate-600 dark:text-slate-400 mb-1 flex space-x-3"},se={class:"min-w-[45%] max-w-[45%]"},oe=t("div",{class:"text-sm font-medium text-slate-900 dark:text-slate-200 flex items-center"}," MB ",-1),ae={class:"w-3/4 space-y-3 my-4"},le=t("div",{class:"text-sm font-medium text-slate-500 dark:text-slate-200 layout-flex"}," สกุลไฟล์เอกสาร ",-1),ie={class:"lowercase"},ne={class:"lowercase"},ce=t("h4",{class:"text-lg text-slate-900"},[E(" บันทึกการตั้งค่าอัปโหลดไฟล์"),t("span",{class:"text-green-500"},"สำเร็จ")],-1),re={class:"text-center mt-10 flex justify-center"};function de(h,m,p,n,C,g){const S=d("Icon"),v=d("Radio"),y=d("Textinput"),o=d("vSelect"),e=d("VueSelect"),s=d("Expansion"),c=d("ModalSuccess"),i=d("Button"),_=d("Card");return x(),f("div",J,[r(_,{noborder:"",imaClass:"space-y-3"},{default:u(()=>[t("form",{onSubmit:m[1]||(m[1]=O((...l)=>n.onSubmit&&n.onSubmit(...l),["prevent"]))},[t("div",K,[r(S,{icon:"iconamoon:file-check-fill",class:"text-2xl mr-2 text-green-800"}),P]),(x(!0),f(w,null,k(n.forms,(l,b)=>(x(),f("div",{key:b},[r(s,{parentClass:"space-y-5 mb-4",title:l.name,tabBgColor:"bg-gray-100",tabTxtColor:"text-black",activeItem:!0},{default:u(()=>[t("div",Q,[t("div",W,[t("div",X,[Y,t("div",Z,[(x(!0),f(w,null,k(n.radioOptions,(a,F)=>(x(),f("div",{key:F},[r(v,{label:a.label,class:"mb-5",modelValue:l.enabled,"onUpdate:modelValue":M=>l.enabled=M,activeClass:a.activeClass,value:a.value},null,8,["label","modelValue","onUpdate:modelValue","activeClass","value"])]))),128))])]),t("div",$,[ee,t("div",te,[t("div",se,[r(y,{classInput:"border border-gray-400",modelValue:l.file_size_limit,"onUpdate:modelValue":a=>l.file_size_limit=a},null,8,["modelValue","onUpdate:modelValue"])]),oe])])]),t("div",ae,[le,r(e,{classInput:"input_color"},{default:u(()=>[r(o,{modelValue:l.selected,"onUpdate:modelValue":a=>l.selected=a,label:"name",class:"input_color border rounded",reduce:a=>a,options:l.file,"onOption:selected":n.fileSelected,"onOption:deselecting":n.removeFileSelected,multiple:""},{"selected-option":u(({name:a})=>[t("div",ie,B(a),1)]),option:u(({name:a})=>[t("div",ne,B(a),1)]),_:2},1032,["modelValue","onUpdate:modelValue","reduce","options","onOption:selected","onOption:deselecting"])]),_:2},1024)])])]),_:2},1032,["title"])]))),128)),r(c,{title:"บันทึกการตั้งค่าอัปโหลดไฟล์",isOpen:n.isSuccess,"onEvent:closeModal":m[0]||(m[0]=l=>n.isSuccess=!1)},{default:u(()=>[ce]),_:1},8,["isOpen"]),t("div",re,[r(i,{type:"submit",text:"บันทึก",btnClass:"btn-primary w-32 font-medium mx-2"})])],32)]),_:1})])}const Te=G(H,[["render",de]]);export{Te as default};
