import{M as x}from"./Modal-19eb68c4.js";import{T as h}from"./index-31d1a8ca.js";import{B as v}from"./index-441935dc.js";import{_ as M,c as y,g as S,s as g}from"./index-e058a960.js";import{M as E}from"./index-7dc8252b.js";import{aF as a,as as c,o as p,m as k,bj as d,p as t,x as l,aT as u,n as f,w as C}from"./preload-helper-9e0646ca.js";const B={components:{Modal:x,Textinput:h,Button:v,ModalSuccess:E},props:{title:{type:String,default:""},successMessage:{type:String,default:""},modalId:{type:[String,Number],default:""},isOpen:{type:Boolean,default:!0}},data(){return{password:"",passwordError:"",userInfo:y().userInfo,isSuccess:!1}},emits:["event:close","event:success"],methods:{async onAcceptSwitch(){if(this.password=="")this.passwordError="กรุณากรอกรหัสผ่าน";else{const n=await S().confirmPassword({password:this.password});if(n.status==200){const s=await g().delete(this.modalId);console.log("resSwitch",s),s.status==200?this.successModal():this.passwordError=s.data.message}else this.passwordError=n.data.message}},successModal(){this.password="",this.passwordError="",this.isSuccess=!0,this.$emit("event:success")},closeModal(){this.password="",this.passwordError="",this.$emit("event:close")}}},I={class:"py-6"},O={class:"flex flex-wrap items-center py-2 mb-3"},V=t("div",{class:"sm:basis-1/4 basis-full pr-5 flex sm:justify-end justify-start mb-1 sm:mb-0"}," ชื่อผู้ใช้งาน ",-1),j={class:"sm:basis-3/4 basis-full"},T={class:"flex flex-wrap py-2 mb-3"},N=t("div",{class:"sm:basis-1/4 basis-full pr-5 pt-1 flex sm:justify-end justify-start mb-1 sm:mb-0"}," รหัสผ่าน ",-1),D={class:"sm:basis-3/4 basis-full"},A={key:0,class:"mt-2 text-danger-500 block text-sm"},F={class:"text-center mt-4 flex justify-center w-full"},P={class:"text-lg text-slate-900"},U=t("span",{class:"text-green-500"},"สำเร็จ",-1);function q(n,s,o,z,e,i){const w=a("Textinput"),m=a("Button"),_=a("Modal"),b=a("ModalSuccess");return c(),p("div",null,[o.isOpen?(c(),k(_,{key:0,title:o.title,labelClass:"btn-outline-dark",label:"",ref:"modalDialog",centered:"",activeModal:o.isOpen,"onEvent:closeModal":s[3]||(s[3]=r=>i.closeModal())},{footer:d(()=>[t("div",F,[l(m,{text:"ยืนยัน",btnClass:"btn-primary w-32 mx-2",onOnClick:s[1]||(s[1]=r=>i.onAcceptSwitch())}),l(m,{text:"ยกเลิก",btnClass:"btn-outline-dark w-32 mx-2",onOnClick:s[2]||(s[2]=r=>i.closeModal())})])]),default:d(()=>[t("div",I,[t("div",O,[V,t("div",j,u(e.userInfo.full_name)+" ",1)]),t("div",T,[N,t("div",D,[l(w,{classInput:`border border-gray-400 ${e.passwordError!=0&&e.passwordError?"border-red-500":""}`,type:"password",modelValue:e.password,"onUpdate:modelValue":s[0]||(s[0]=r=>e.password=r)},null,8,["classInput","modelValue"]),e.passwordError!=0&&e.passwordError?(c(),p("span",A,u(e.passwordError),1)):f("",!0)])])])]),_:1},8,["title","activeModal"])):f("",!0),l(b,{title:o.successMessage,isOpen:e.isSuccess,"onEvent:closeModal":s[4]||(s[4]=r=>e.isSuccess=!1)},{default:d(()=>[t("h4",P,[C(u(o.successMessage)+" ",1),U])]),_:1},8,["title","isOpen"])])}const R=M(B,[["render",q]]);export{R as C};
