import{_ as Ze,a as Q,u as $e}from"./index-f91482a0.js";import{C as es}from"./checkbox-12649afb.js";import{f as ss}from"./global-funcs-ef1510cf.js";import{e as ts}from"./vue3-tree-vue.esm-0dbd4492.js";import{T as os}from"./index-b52aeb81.js";import{D as as}from"./index-976a2577.js";import{I as ls}from"./index-2198f2cf.js";import{P as rs}from"./index-5ddbaceb.js";import{S as ns}from"./index-ca598517.js";import{C as is}from"./index-cb5a08aa.js";import{B as ds}from"./index-c2d6eb9c.js";import{T as cs}from"./index-3e8503e7.js";import{u as us,a as V}from"./vee-validate.esm-bf91438b.js";import{c as ms,a as j,e as _s,b as fs}from"./array-6ac4c54d.js";import{V as ps,C as vs}from"./VueSelect-403231fd.js";import{C as gs}from"./CustomVueSelect-27bb8a25.js";import{R as bs}from"./index-e163c14d.js";import{C as hs}from"./index-325a54cb.js";import{M as xs}from"./Modal-b54f1b5f.js";import{I as ys}from"./index-8d30ace7.js";import{aA as d,ay as ws,al as zs,k as ks,o as m,x as a,bj as v,m as G,n as g,aF as f,as as n,p as e,aT as I,F as le,aD as re,bo as Cs,w as Ce}from"./preload-helper-f37a9bec.js";import{M as Is}from"./index-34f621d8.js";import{M as Ms}from"./index-e1db63de.js";import{T as js}from"./TextValid-d1c607fc.js";import{N as Es}from"./index-f32159fc.js";import{A as Ss}from"./index-6ecf5774.js";import{M as Rs}from"./index-3891a0e1.js";import"./dom-b10fc197.js";import"./focus-management-94a631f4.js";import"./open-closed-75edfb8a.js";import"./use-resolve-button-type-d7bee841.js";import"./use-outside-click-156e41c1.js";import"./vue-cleave.min-df5c8cc9.js";import"./index-a56f86b1.js";import"./ck-white-3501111f.js";import"./transition-be7c09bc.js";import"./hidden-800255f5.js";import"./micro-task-89dcd6af.js";import"./iconify-2baafea4.js";import"./index-b704274e.js";const Vs={components:{CheckedBox:es,CheckBox:hs,Switch:ns,Tooltip:os,Pagination:rs,InputGroup:ls,Dropdown:as,Card:is,Textinput:cs,Button:ds,VueSelect:ps,vSelect:vs,CustomVueSelect:gs,Radio:bs,Modal:xs,Icon:ys,tree:ts,ModalOrganize:Is,NavigationPath:Es,ModalRole:Ms,TextValid:js,Avatar:Ss,ModalError:Rs},data(){return{findTreeDir:ss,columns:[{label:"ชื่อ",field:"full_name",width:"100px",tdClass:"text_left",thClass:"text_left"},{label:"เบอร์โทร",field:"mobile_phone",width:"100px",tdClass:"text_left",thClass:"text_left"},{label:"หน่วยงาน",field:"organization",width:"150px",tdClass:"text_left",thClass:"text_left"},{label:"ตำแหน่ง",field:"position",width:"100px",tdClass:"text_left",thClass:"text_left"},{label:"จัดการ",field:"action",width:"50px"}]}},async created(){},setup(){const c=d(!1),o=d(""),A=d(""),s=d(""),W=d(""),H=d([]),p=d([]),q=d(!1),J=d(null),w=d(!1),N=ws({total:50,current:1,perpage:10,pageRange:5}),z=d([]),O=d(!1),b=d([]),P=d([]),h=d([]),k=$e(),T=d(!1),F=d(!1),E=d(!1),X=d(!1),t=/^(09|08|06)\d{8}$/,D=ms({organization_id:j().nullable().required("กรุณาระบุว่าอยู่ภายใต้หน่วยงานใด"),user_sarabun_roles:_s().nullable().required("กรุณาเลือกบทบาท"),userName:j().required("กรุณาระบุชื่อ-นามสกุล"),phoneNumber:j().required("กรุณาระบุเบอร์โทร").matches(t,"กรุณากรอกเบอร์โทรให้ถูกต้อง"),position:j().required("กรุณาระบุตำแหน่ง"),adminFlag:j().required("กรุณาระบุประเภทผู้ใช้งาน"),email:j().required("กรุณากรอกอีเมล").email("กรุณากรอกอีเมลให้ถูกต้อง"),password:k.currentRoute.value.params.id?j().nullable():j().required("กรุณาระบุรหัสผ่าน").min(8,"รหัสผ่านควรมีความยาว 8 ตัวอย่างต่ำ"),confirmPassword:k.currentRoute.value.params.id?j().nullable():j().required("กรุณาระบุยืนยันรหัสผ่าน").oneOf([fs("password"),null],"รหัสผ่านไม่ตรงกัน")}),{handleSubmit:S}=us({validationSchema:D});zs(async()=>{var l,_,x,u,L,K,U,ne,ie,de,ce,ue,me,_e,fe,pe,ve,ge,be,he,xe,ye;if(N.total=b.value.length,k.currentRoute.value.params.id){const{data:r,status:ae}=await Q("usersStore","edit",{payload:k.currentRoute.value.params.id});if(ae===200){b.value=(l=r.result)==null?void 0:l.user_list,P.value=(_=r.result)==null?void 0:_.user_list;const we=parseInt(k.currentRoute.value.params.id);console.log("check id",we),console.log("check data",(x=r.result)==null?void 0:x.data),((u=r.result)==null?void 0:u.data.id)===we&&(oe.value=(L=r.result)==null?void 0:L.data.full_name,Z.value=(K=r.result)==null?void 0:K.data.email,ee.value=(U=r.result)==null?void 0:U.data.mobile_phone,$.value=(ne=r.result)==null?void 0:ne.data.position,te.value=(ie=r.result)==null?void 0:ie.data.admin_flag,console.log("test test",(de=r.result)==null?void 0:de.data.user_represent_permissions),h.value=(ce=r.result)==null?void 0:ce.data.user_represent_permissions.map(i=>({id:i.represent_user_id,full_name:i.represent_user.full_name,email:i.represent_user.email,profile_image:i.represent_user.profile_image})),console.log("cmon sir",h.value),h.value.forEach(i=>{b.value=b.value.filter(M=>M.id!=i.id)})),((ue=r.result)==null?void 0:ue.organizations_list.length)>0&&(p.value=(me=r.result)==null?void 0:me.organizations_list,p.value=p.value.map(i=>{function M(y){y.expanded=!0,y.id=y.item_id,y.children&&(y.children=y.children.map(R=>(M(R),R)))}return M(i),i})),((_e=r.result)==null?void 0:_e.sarabun_role_list.length)>0&&setTimeout(()=>{var i;H.value=(i=r.result)==null?void 0:i.sarabun_role_list.map(M=>{function y(R){R.children&&(R.children=R.children.map(ke=>(y(ke),ke)))}return y(M),M})},500);const C=(fe=r.result)==null?void 0:fe.data.organization;console.log("data organ",C),J.value=C,B.value=C==null?void 0:C.id,q.value=C==null?void 0:C.id,A.value=C==null?void 0:C.id;const ze=(pe=r.result)==null?void 0:pe.data.user_sarabun_roles;z.value=ze.map(i=>{var M,y,R;return{item_id:i.sarabun_role_id,name:(M=i==null?void 0:i.sarabun_role)==null?void 0:M.name,organization_id:(R=(y=i==null?void 0:i.sarabun_role)==null?void 0:y.organization)==null?void 0:R.id}}),ze.length>0&&(Y.value=z.value)}}else{const{data:r,status:ae}=await Q("usersStore","create");ae===200&&(b.value=(ve=r.result)==null?void 0:ve.user_list,P.value=(ge=r.result)==null?void 0:ge.user_list,console.log("advanceTable",b),console.log("res",(be=r.result)==null?void 0:be.user_list),((he=r.result)==null?void 0:he.organizations_list.length)>0&&(p.value=(xe=r.result)==null?void 0:xe.organizations_list,H.value=(ye=r.result)==null?void 0:ye.sarabun_role_list))}});const{value:B,errorMessage:Ie}=V("organization_id"),{value:Y,errorMessage:Me}=V("user_sarabun_roles"),{value:Z,errorMessage:je}=V("email"),{value:$,errorMessage:Ee}=V("position"),{value:ee,errorMessage:Se}=V("phoneNumber"),{value:se,errorMessage:Re}=V("password"),{value:Ve,errorMessage:Oe}=V("confirmPassword"),{value:te,errorMessage:Ne}=V("adminFlag"),{value:oe,errorMessage:Pe}=V("userName"),Te=ks(()=>(console.log("userRoleDisplay",z.value),z.value.reduce((_,x)=>{const u=x.organization_id,L=_.findIndex(K=>{var U;return((U=K[0])==null?void 0:U.organization_id)===u});return L!==-1?_[L].push(x):_.push([x]),_},[]))),De=S(async()=>{var _,x;let l={organization_id:A.value,full_name:oe.value,mobile_phone:ee.value,position:$.value,email:Z.value,admin_flag:te.value,user_sarabun_roles:z.value.map(u=>({id:u.item_id})),user_represent_permissions:h.value.map(u=>({id:u.id}))};for(const u of z.value)if(console.log("checlParent",u.organization_id),u.organization_id!=A.value){c.value=!0,o.value="กรุณาเลือกบทบาทให้อยู่ในหน่วยงานเดียวกัน";return}if(console.log("eiei"),k.currentRoute.value.params.id){l.id=k.currentRoute.value.params.id;const u=await Q("usersStore","update",{payload:l});u.status===200?T.value=!0:(c.value=!0,o.value=(_=u.data)==null?void 0:_.message),console.log("submit for edit",l)}else{console.log("บันทึก"),l.password=se.value;const u=await Q("usersStore","store",{payload:l});u.status===200?T.value=!0:(console.log("res",u),c.value=!0,o.value=(x=u.data)==null?void 0:x.message),console.log("submit for create",l)}T.value=!0}),Ae=l=>{console.log("onSelectedItem",l),l.have_sub_organization&&(B.value=l.item_id,A.value=l.item_id)},Fe=l=>{console.log("onSelectedItemRole",l),z.value=l,Y.value=l,E.value=!1},Be=()=>{T.value=!1,k.push("/app/user-role/user-management")},qe=()=>{console.log("open add officer modal"),F.value=!0},Le=()=>{console.log("close add officer modal"),F.value=!1},Ue=()=>{console.log("open add role modal"),E.value=!0},Ge=()=>{console.log("close add role modal"),E.value=!1},He=()=>{console.log("open add organizer modal"),O.value=!0},Je=()=>{console.log("close add organizer modal"),O.value=!1,E.value=!1,B.value=null},Ke=l=>{console.log("เลือก officer แล้ว"),h.value.push(l),console.log("officer eiei",h),console.log("filter val.id",l.id),b.value=b.value.filter(_=>_.id!=l.id),F.value=!1},Qe=l=>{console.log("ID",l),console.log("val deleteOfficer",P);let _=P.value.find(x=>x.id==l.id);console.log("advancedTableDefault",_),b.value.push(_),console.log("check officer",h),h.value=h.value.filter(x=>x.id!=l.id)},We=()=>{O.value=!1,E.value=!1},Xe=()=>{E.value=!1};console.log("testss"),console.log(se),console.log("sss");let Ye=k.currentRoute.value.params.id?{}:{password:se,passwordError:Re,confirmPassword:Ve,confirmPasswordError:Oe};return{userRoleDisplay:Te,onClosemodal:We,roleList:H,checkedItem2:w,organizeList:p,searchRole:W,searchOrganize:s,organizationIdError:Ie,selectedItem:J,checkedItem:q,paginate:N,advancedTable:b,officers:h,userSarabunRolesError:Me,phoneNumber:ee,phoneNumberError:Se,position:$,positionError:Ee,userName:oe,userNameError:Pe,email:Z,emailError:je,isShowDialog:T,officer:F,openModalRole:E,addRole:Ue,closeAddRole:Ge,organizer:X,isShowDialogOrganize:O,onSelectedItem:Ae,addOrganizer:He,closeAddOrganizer:Je,onSubmit:De,onAccept:Be,addOfficer:qe,closeAddOfficer:Le,selectOfficer:Ke,deleteOfficer:Qe,onSelectedItemRole:Fe,organization_id:B,userRole:z,...Ye,item_idOrg:A,adminFlag:te,adminFlagError:Ne,user_sarabun_roles:Y,isError:c,errorMessage:o,closeModalRole:Xe}}},Os={class:"list list-odd"},Ns={class:"py-3 px-3 sm:px-0"},Ps={class:"flex justify-center"},Ts={class:"flex-1"},Ds={class:"flex flex-wrap"},As=e("div",{class:"sm:basis-1/3 basis-full pt-2 pr-4 flex sm:justify-end justify-start mb-1 sm:mb-0"}," ชื่อ-นามสกุล ",-1),Fs={class:"sm:basis-1/3 basis-full"},Bs={class:"py-3 px-3 sm:px-0"},qs={class:"flex justify-center"},Ls={class:"flex-1"},Us={class:"flex flex-wrap"},Gs=e("div",{class:"sm:basis-1/3 basis-full pt-2 pr-4 flex sm:justify-end justify-start mb-1 sm:mb-0"}," อีเมล ",-1),Hs={class:"sm:basis-1/3 basis-full"},Js={class:"py-3 px-3 sm:px-0"},Ks={class:"flex justify-center"},Qs={class:"flex-1"},Ws={class:"flex flex-wrap"},Xs=e("div",{class:"sm:basis-1/3 basis-full pt-2 pr-4 flex sm:justify-end justify-start mb-1 sm:mb-0"}," เบอร์โทร ",-1),Ys={class:"sm:basis-1/3 basis-full"},Zs={class:"py-3 px-3 sm:px-0"},$s={class:"flex justify-center"},et={class:"flex-1"},st={class:"flex flex-wrap"},tt=e("div",{class:"sm:basis-1/3 basis-full pt-2 pr-4 flex sm:justify-end justify-start mb-1 sm:mb-0"}," ตำแหน่ง ",-1),ot={class:"sm:basis-1/3 basis-full"},at={key:0,class:"py-3 px-3 sm:px-0"},lt={class:"flex justify-center"},rt={class:"flex-1"},nt={class:"flex flex-wrap"},it=e("div",{class:"sm:basis-1/3 basis-full pt-2 pr-4 flex sm:justify-end justify-start mb-1 sm:mb-0"}," รหัสผ่าน ",-1),dt={class:"sm:basis-1/3 basis-full"},ct={key:1,class:"py-3 px-3 sm:px-0"},ut={class:"flex justify-center"},mt={class:"flex-1"},_t={class:"flex flex-wrap"},ft=e("div",{class:"sm:basis-1/3 basis-full pt-2 pr-4 flex sm:justify-end justify-start mb-1 sm:mb-0"}," ยืนยันรหัสผ่าน ",-1),pt={class:"sm:basis-1/3 basis-full"},vt={class:"py-3 px-3 sm:px-0"},gt={class:"flex justify-center"},bt={class:"flex-1"},ht={class:"flex flex-wrap"},xt=e("div",{class:"sm:basis-1/3 basis-full pr-4 flex sm:justify-end justify-start mb-1 sm:mb-0"}," ประเภทผู้ใช้งาน ",-1),yt={class:"basis-1/3 flex gap-3 flex-wrap"},wt={class:"basis-full"},zt={class:"py-3 px-3 sm:px-0"},kt={class:"flex justify-center"},Ct={class:"flex-1"},It={class:"flex flex-wrap"},Mt=e("div",{class:"sm:basis-1/3 basis-full pt-2 pr-4 flex sm:justify-end justify-start mb-1 sm:mb-0"}," หน่วยงาน ",-1),jt={class:"sm:basis-2/3 basis-full"},Et={class:"px-2 mt-3 flex"},St=e("div",{class:"shrink-0"},"หน่วยงานที่เลือก:",-1),Rt={class:"basis-full"},Vt={class:"text-left pl-3"},Ot={key:0,class:"text-danger-500 block text-sm"},Nt={class:"py-3 px-3 sm:px-0"},Pt={class:"flex justify-center"},Tt={class:"flex-1"},Dt={class:"flex flex-wrap"},At=e("div",{class:"sm:basis-1/3 basis-full pt-2 pr-4 flex sm:justify-end justify-start mb-1 sm:mb-0"}," บทบาท ",-1),Ft={class:"sm:basis-1/3 basis-full"},Bt={class:"px-2 mt-3"},qt={key:0},Lt={class:"ell-11 truncate text-left"},Ut={key:0},Gt={key:0,class:"text-danger-500 block text-sm"},Ht={class:"py-3 px-3 sm:px-0"},Jt={class:"flex justify-center"},Kt={class:"flex-1"},Qt={class:"flex flex-wrap"},Wt=e("div",{class:"sm:basis-1/3 basis-full pt-2 pr-4 flex sm:justify-end justify-start mb-1 sm:mb-0"}," เจ้าหน้าที่ปฏิบัติราชการแทนได้ ",-1),Xt={class:"sm:basis-1/3 basis-full"},Yt={key:0},Zt={class:"flex justify-between items-center"},$t={class:"flex items-center gap-3"},eo={class:"h-8 w-8"},so={class:"text-slate-900 dark:text-slate-200"},to=e("hr",{class:"mt-5 border"},null,-1),oo={class:"text-center mt-4 flex justify-center"},ao={class:"h-36 flex items-center justify-center"},lo={class:"text-center flex flex-row flex-wrap justify-center"},ro={class:"basis-full flex justify-center mb-5"},no={key:0,class:"text-lg text-slate-900"},io=e("span",{class:"text-green-500"},"สำเร็จ",-1),co={key:1,class:"text-lg text-slate-900"},uo=e("span",{class:"text-green-500"},"สำเร็จ",-1),mo={class:"flex justify-center w-full"},_o={class:"text-base text-slate-600 dark:text-slate-300"},fo={class:"row"},po={class:"col"},vo=e("span",null,"คำค้นจากชื่อ",-1),go={class:"mt-2 mb-7"},bo=e("span",null,"คำค้นจากนามสกุล",-1),ho={class:"mt-2"},xo={class:"mt-10"},yo={class:"text-center mt-4 flex justify-center w-full"},wo={class:"col col2"},zo=e("div",{class:"text-center"},[e("div",{class:"text-gray-400"},"ไม่พบข้อมูล")],-1),ko={key:0},Co={class:"truncate w-[200px] p-0 text-left"},Io={key:1},Mo={class:"text-slate-900 dark:text-slate-200"},jo={class:"truncate w-[200px] p-0 text-left"},Eo={class:"truncate w-[200px] p-0 text-left"},So={key:2},Ro={class:"flex items-center gap-3"},Vo={class:"h-8 w-8"},Oo={class:"text-left"},No={class:""},Po={key:3},To={class:"py-4 px-3"},Do={class:"text-lg text-slate-900 ell-4"};function Ao(c,o,A,s,W,H){const p=f("Textinput"),q=f("Radio"),J=f("TextValid"),w=f("Button"),N=f("NavigationPath"),z=f("Tooltip"),O=f("Card"),b=f("Avatar"),P=f("Icon"),h=f("Modal"),k=f("ModalOrganize"),T=f("ModalRole"),F=f("Pagination"),E=f("vue-good-table"),X=f("ModalError");return n(),m("div",null,[a(O,{title:c.$route.params.id?"แบบฟอร์มแก้ไขผู้ใช้งาน":"แบบฟอร์มเพิ่มผู้ใช้งาน",className:"border-secondary-500 border-1",bodyClass:"p-3",noborder:""},{default:v(()=>[e("form",{onSubmit:o[11]||(o[11]=Cs((...t)=>s.onSubmit&&s.onSubmit(...t),["prevent"])),class:"px-0 sm:px-12"},[e("div",Os,[e("div",Ns,[e("div",Ps,[e("div",Ts,[e("div",Ds,[As,e("div",Fs,[a(p,{classInput:"border border-gray-400 bg-white",placeholder:"ระบุชื่อ-นามสกุล",modelValue:s.userName,error:s.userNameError,"onUpdate:modelValue":o[0]||(o[0]=t=>s.userName=t)},null,8,["modelValue","error"])])])])])]),e("div",Bs,[e("div",qs,[e("div",Ls,[e("div",Us,[Gs,e("div",Hs,[a(p,{classInput:"border border-gray-400",placeholder:"ระบุอีเมล",type:"email",modelValue:s.email,error:s.emailError,"onUpdate:modelValue":o[1]||(o[1]=t=>s.email=t)},null,8,["modelValue","error"])])])])])]),e("div",Js,[e("div",Ks,[e("div",Qs,[e("div",Ws,[Xs,e("div",Ys,[a(p,{type:"tel",classInput:"border border-gray-400  bg-white",placeholder:"ระบุเบอร์โทร",modelValue:s.phoneNumber,error:s.phoneNumberError,"onUpdate:modelValue":o[2]||(o[2]=t=>s.phoneNumber=t)},null,8,["modelValue","error"])])])])])]),e("div",Zs,[e("div",$s,[e("div",et,[e("div",st,[tt,e("div",ot,[a(p,{classInput:"border border-gray-400",placeholder:"ระบุตำแหน่ง",modelValue:s.position,error:s.positionError,"onUpdate:modelValue":o[3]||(o[3]=t=>s.position=t)},null,8,["modelValue","error"])])])])])]),c.$route.params.id?g("",!0):(n(),m("div",at,[e("div",lt,[e("div",rt,[e("div",nt,[it,e("div",dt,[a(p,{classInput:"border border-gray-400",placeholder:"ระบุรหัสผ่าน",type:"password",hasicon:"",modelValue:c.password,error:c.passwordError,"onUpdate:modelValue":o[4]||(o[4]=t=>c.password=t)},null,8,["modelValue","error"])])])])])])),c.$route.params.id?g("",!0):(n(),m("div",ct,[e("div",ut,[e("div",mt,[e("div",_t,[ft,e("div",pt,[a(p,{classInput:"border border-gray-400",placeholder:"ระบุยืนยันรหัสผ่าน",type:"password",hasicon:"",modelValue:c.confirmPassword,error:c.confirmPasswordError,"onUpdate:modelValue":o[5]||(o[5]=t=>c.confirmPassword=t)},null,8,["modelValue","error"])])])])])])),e("div",vt,[e("div",gt,[e("div",bt,[e("div",ht,[xt,e("div",yt,[a(q,{label:"ผู้ใช้งาน",value:!1,modelValue:s.adminFlag,"onUpdate:modelValue":o[6]||(o[6]=t=>s.adminFlag=t)},null,8,["modelValue"]),a(q,{label:"ผู้ดูแลระบบ",value:!0,modelValue:s.adminFlag,"onUpdate:modelValue":o[7]||(o[7]=t=>s.adminFlag=t)},null,8,["modelValue"]),e("div",wt,[a(J,{valid:s.adminFlagError},null,8,["valid"])])])])])])]),e("div",zt,[e("div",kt,[e("div",Ct,[e("div",It,[Mt,e("div",jt,[a(w,{type:"button",icon:"ic:baseline-plus",onClick:o[8]||(o[8]=t=>s.addOrganizer()),text:"เลือกหน่วยงาน",btnClass:"btn-primary w-33 font-medium mx-2"}),e("div",Et,[St,e("div",Rt,[s.organization_id?(n(),G(z,{key:0,placement:"top",arrow:"",theme:"light"},{base:v(()=>[e("div",Vt,[a(N,{arrayItems:s.organizeList,targetId:s.organization_id,keyId:"item_id",targetName:"organization_name",typePath:"organization"},null,8,["arrayItems","targetId"])])]),default:v(()=>[a(N,{arrayItems:s.organizeList,targetId:s.organization_id,keyId:"item_id",targetName:"organization_name",typePath:"organization"},null,8,["arrayItems","targetId"])]),_:1})):g("",!0)])]),s.organizationIdError?(n(),m("span",Ot,I(s.organizationIdError),1)):g("",!0)])])])])]),e("div",Nt,[e("div",Pt,[e("div",Tt,[e("div",Dt,[At,e("div",Ft,[a(w,{type:"button",icon:"ic:baseline-plus",onClick:o[9]||(o[9]=t=>s.addRole()),text:"เลือกบทบาท",btnClass:"btn-primary w-32 font-medium mx-2"}),e("div",Bt,[(n(!0),m(le,null,re(s.userRoleDisplay,(t,D)=>(n(),G(O,{key:D},{default:v(()=>[a(z,{placement:"top",arrow:"",theme:"light"},{base:v(()=>{var S;return[t.length>0?(n(),m("div",qt,[e("div",Lt,[a(N,{arrayItems:s.roleList,targetId:(S=t[0])==null?void 0:S.organization_id,keyId:"item_id",targetName:"organization_name",typePath:"role"},null,8,["arrayItems","targetId"])])])):g("",!0)]}),default:v(()=>{var S;return[t.length>0?(n(),m("div",Ut,[a(N,{arrayItems:s.roleList,targetId:(S=t[0])==null?void 0:S.organization_id,keyId:"item_id",targetName:"organization_name",typePath:"role"},null,8,["arrayItems","targetId"])])):g("",!0)]}),_:2},1024),(n(!0),m(le,null,re(t,(S,B)=>(n(),m("div",{key:B,class:"capitalize text-slate-500 text-sm dark:text-slate-400 pl-3"},I("• "+S.name),1))),128))]),_:2},1024))),128))]),s.userSarabunRolesError?(n(),m("span",Gt,I(s.userSarabunRolesError),1)):g("",!0)])])])])]),e("div",Ht,[e("div",Jt,[e("div",Kt,[e("div",Qt,[Wt,e("div",Xt,[a(w,{type:"button",onClick:o[10]||(o[10]=t=>s.addOfficer()),text:"เพิ่มเจ้าหน้าที่",btnClass:"btn-primary w-28 font-medium mx-2"}),s.officers!=null?(n(),m("div",Yt,[(n(!0),m(le,null,re(s.officers,t=>(n(),G(O,{key:t.id,bodyClass:"bg-gray-100","card-text-class":"relative card"},{default:v(()=>[e("div",Zt,[e("div",$t,[e("div",eo,[a(b,{image:t.profile_image},null,8,["image"])]),e("div",null,[e("div",so,I(t.full_name),1),e("div",null,I(t.email),1)])]),a(P,{icon:"fa6-solid:trash-can",class:"text-red-500",onClick:D=>s.deleteOfficer(t)},null,8,["onClick"])])]),_:2},1024))),128))])):g("",!0)])])])])])]),to,e("div",oo,[a(w,{type:"submit",text:c.$route.params.id?"บันทึกการแก้ไข":"บันทึก",btnClass:"btn-primary w-32 font-medium mx-2"},null,8,["text"]),a(w,{text:"ยกเลิก",btnClass:"btn-outline-dark w-32 mx-2",link:"/app/user-role/user-management"})])],32)]),_:1},8,["title"]),s.isShowDialog?(n(),G(h,{key:0,title:"บันทึกผู้ใช้งานสำเร็จ",label:"",labelClass:"btn-outline-dark",ref:"modalDialog",centered:"",activeModal:s.isShowDialog,"onEvent:closeModal":o[13]||(o[13]=t=>s.onAccept())},{footer:v(()=>[e("div",mo,[a(w,{text:"ปิด",btnClass:"btn-primary w-36",onClick:o[12]||(o[12]=t=>s.onAccept())})])]),default:v(()=>[e("div",ao,[e("div",lo,[e("div",ro,[a(P,{icon:"icon-park-solid:protect",class:"text-5xl text-green-500"})]),c.$route.params.id?(n(),m("h4",no,[Ce(" บันทึกการแก้ไขผู้ใช้งาน "),io])):(n(),m("h4",co,[Ce(" บันทึกผู้ใช้งาน "),uo]))])])]),_:1},8,["activeModal"])):g("",!0),a(k,{isShowDialogOrganize:s.isShowDialogOrganize,items:s.organizeList,value:s.organization_id,"onEvent:closeModal":o[14]||(o[14]=t=>s.closeAddOrganizer()),"onEvent:acceptSelectOrganize":o[15]||(o[15]=t=>s.onClosemodal()),"onEvent:onSelectedItem":o[16]||(o[16]=t=>s.onSelectedItem(t))},null,8,["isShowDialogOrganize","items","value"]),a(T,{isOpen:s.openModalRole,items:s.roleList,value:s.user_sarabun_roles,"onEvent:closeModal":o[17]||(o[17]=t=>s.closeModalRole()),"onEvent:onSelectedItem":s.onSelectedItemRole},null,8,["isOpen","items","value","onEvent:onSelectedItem"]),s.officer?(n(),G(h,{key:1,title:"ค้นหารายชื่อเจ้าหน้าที่",label:"",labelClass:"btn-outline-dark",ref:"modalOfficer",sizeClass:"w-[1500px] h-[950px]",centered:"",activeModal:s.officer,"onEvent:closeModal":o[21]||(o[21]=t=>s.closeAddOfficer())},{default:v(()=>[e("div",_o,[e("div",fo,[e("div",po,[vo,e("div",go,[a(p,{name:"firstname",type:"text",classInput:"h-[48px]",placeholder:""})]),bo,e("div",ho,[a(p,{name:"lastname",type:"text",classInput:"h-[48px]",placeholder:""})]),e("div",xo,[e("div",yo,[a(w,{text:"ยืนยัน",btnClass:"btn-primary w-32 mx-2",onOnClick:o[18]||(o[18]=t=>c.onAcceptSwitch())}),a(w,{text:"ยกเลิก",btnClass:"btn-outline-dark w-32 mx-2",onOnClick:o[19]||(o[19]=t=>s.closeAddOfficer())})])])]),e("div",wo,[a(E,{columns:W.columns,styleClass:" vgt-table bordered centered",rows:s.advancedTable,"pagination-options":{enabled:!0,perPage:s.paginate.perpage},"sort-options":{enabled:!1}},{emptystate:v(()=>[zo]),"table-row":v(t=>[t.column.field=="role_name"?(n(),m("span",ko,[e("p",Co,I(t.row.role_name),1)])):g("",!0),t.column.field=="organization"?(n(),m("span",Io,[e("div",null,[e("div",Mo,[e("p",jo,I(t.row.organization.parent_organization!=null?t.row.organization.parent_organization.organization_name:t.row.organization.organization_name),1)]),e("div",null,[e("p",Eo,I(t.row.organization.parent_organization==null?"":t.row.organization.organization_name),1)])])])):g("",!0),t.column.field=="full_name"?(n(),m("span",So,[e("div",Ro,[e("div",Vo,[a(b,{image:t.row.profile_image},null,8,["image"])]),e("div",Oo,[e("div",No,I(t.row.full_name),1),e("div",null,I(t.row.email),1)])])])):g("",!0),t.column.field=="action"?(n(),m("span",Po,[a(w,{text:"เลือก",btnClass:"btn-primary w-20",onClick:D=>s.selectOfficer(t.row)},null,8,["onClick"])])):g("",!0)]),"pagination-bottom":v(t=>[e("div",To,[a(F,{total:s.paginate.total,current:s.paginate.current,"per-page":s.paginate.perpage,pageRange:s.paginate.pageRange,onPageChanged:o[20]||(o[20]=D=>c.current=D),pageChanged:t.pageChanged,perPageChanged:t.perPageChanged,textAfterInput:"ไปที่หน้า",enableSearch:"",enableInput:""},null,8,["total","current","per-page","pageRange","pageChanged","perPageChanged"])])]),_:1},8,["columns","rows","pagination-options"])])])])]),_:1},8,["activeModal"])):g("",!0),a(X,{title:"",isOpen:s.isError,"onEvent:closeModal":o[22]||(o[22]=t=>s.isError=!1)},{default:v(()=>[e("div",Do,I(s.errorMessage),1)]),_:1},8,["isOpen"])])}const Ca=Ze(Vs,[["render",Ao]]);export{Ca as default};
