import{I as Z}from"./index-72ee420c.js";import{B as It}from"./index-441935dc.js";import{D as jt}from"./index-090a8953.js";import{E as $}from"./index-1c6333b5.js";import{d as z}from"./dayjs.min-72c81edc.js";import{_ as U,g as Tt,a as Pt,t as Bt}from"./index-e058a960.js";import{aF as x,as as i,o as n,p as t,aT as o,ac as g,n as f,x as c,m as y,bj as E,F as A,aD as F,w as zt}from"./preload-helper-9e0646ca.js";import{M as St}from"./index-1b218db3.js";import{N as Et}from"./index-cc7a2b4b.js";const At={data(){return{isOpen:!1,pdfPath:"",isShowDialogPdf:!1}},components:{Icon:Z,Button:It,NavigationPath:Et,Modal:St},name:"ItemRow",props:{roleList:{type:Array,default:()=>[]},label:{type:String,required:!0,default:"Test"},value:{required:!0,default:"-"},type:{type:String,default:"text"},classValue:{type:String,default:""}},computed:{showButton(){var s;return!!((s=this.value)!=null&&s.signed_at)},isMobile(){return Tt().isMobile}},methods:{async previewPDF(s){var C,u,a,l,w;let m={document_id:s.document_id,book_pdf_attn:(C=s==null?void 0:s.attn_data)!=null&&C.full_name?(u=s==null?void 0:s.attn_data)==null?void 0:u.full_name:(a=s==null?void 0:s.attn_data)!=null&&a.name?(l=s==null?void 0:s.attn_data)==null?void 0:l.name:(w=s==null?void 0:s.attn_data)==null?void 0:w.organization_name},e=await Pt("documentSendStore","previewPDFattn",{payload:m});e.status===200?(this.pdfPath=e.data.result,this.isShowDialogPdf=!0):console.log("error"),console.log("res",e)},checkIcon(s){if(s=="users")return"mingcute:user-4-fill";if(s=="organizations")return"grommet-icons:tree"}}},Ft={class:"flex gap-5 py-3"},Ot={class:"basis-2/6 md:basis-1/4 md:text-end text-start font-bold text-[12px] md:text-[16px]"},Ht=["innerHTML"],Rt={class:"text-slate-500 text-sm pl-3 mt-2"},Vt={class:"space-y-2 pl-6 pr-6 overflow-y-auto max-h-[720px]"},Nt=t("div",{class:"text-2xl font-medium mt-6"},"เรียนภายนอก",-1),Lt={class:"overflow-scroll pb-6"},qt={class:"w-full"},Kt={class:"border p-2 w-[25%]"},Wt={class:"border p-2 w-[25%]"},Gt={class:"border p-2 w-[25%]"},Jt={class:"border p-2 w-[25%] px-2"},Qt=t("div",{class:"text-2xl font-medium my-6"},"เรียนภายใน",-1),Ut={class:"overflow-scroll pb-6 mt-4"},Xt={class:"w-full"},Zt={class:"border p-2 w-[25%]"},$t={class:"border p-2 w-[25%]"},te={class:"border p-2 w-[25%]"},ee={class:"border p-2 w-[25%] px-2"},se=["src"];function ae(s,m,e,C,u,a){var h,_,v,k,D,p,I;const l=x("Button"),w=x("NavigationPath"),d=x("Icon"),b=x("Modal");return i(),n("div",null,[t("div",Ft,[t("div",Ot,o(e.label),1),e.type==="text"?(i(),n("div",{key:0,class:g("basis-4/6 md:basis-3/4 text-[12px] md:text-[16px]  "+e.classValue)},o(e.value?e.value:"-"),3)):f("",!0),e.type==="html"?(i(),n("div",{key:1,class:g("basis-4/6 md:basis-3/4 text-[12px] md:text-[16px]   "+e.classValue),innerHTML:e.value},null,10,Ht)):f("",!0),e.type==="button"?(i(),n("div",{key:2,class:g("basis-4/6 md:basis-3/4 text-[12px] md:text-[16px]  "+e.classValue)},[c(l,{btnClass:"btn-primary",text:"รายละเอียด ("+(((h=e.value)==null?void 0:h.document_attn_inside.length)+((_=e.value)==null?void 0:_.document_attn_outside.length))+")",onClick:m[0]||(m[0]=M=>u.isOpen=!0)},null,8,["text"])],2)):f("",!0),e.type=="role"?(i(),n("div",{key:3,class:g("basis-4/6 md:basis-3/4 text-[12px] md:text-[16px]  "+e.classValue)},[c(w,{arrayItems:e.roleList,targetId:(k=(v=e.value[0])==null?void 0:v.organization)==null?void 0:k.id,keyId:"id",targetName:"organization_name"},null,8,["arrayItems","targetId"]),t("div",Rt,o("• "+((D=e.value[0])==null?void 0:D.name)),1)],2)):f("",!0)]),u.isOpen?(i(),y(b,{key:0,title:"รายละเอียด ("+(((p=e.value)==null?void 0:p.document_attn_inside.length)+((I=e.value)==null?void 0:I.document_attn_outside.length))+")",activeModal:u.isOpen,"onEvent:closeModal":m[1]||(m[1]=M=>u.isOpen=!1),sizeClass:a.isMobile?"":"w-3/4"},{default:E(()=>{var M,Y;return[t("div",Vt,[Nt,t("div",Lt,[t("table",qt,[t("thead",null,[t("tr",null,[t("th",{class:g(a.isMobile?"border h-[60px] px-3 w-[25%] text-start text-xs":"border h-[60px] px-3 w-[25%] text-start")}," หนังสือนำเรียน ",2),t("th",{class:g(a.isMobile?"border h-[60px] px-3 w-[25%] text-start text-xs":"border h-[60px] px-3 w-[25%] text-start")}," หน่วยงาน ",2),t("th",{class:g(a.isMobile?"border h-[60px] px-3 w-[25%] text-start text-xs":"border h-[60px] px-3 w-[25%] text-start")},"อีเมล",2),t("th",{class:g(a.isMobile?"border h-[60px] px-3 w-[25%] text-start text-xs":"border h-[60px] px-3 w-[25%] text-start")},null,2)])]),t("tbody",null,[(i(!0),n(A,null,F((M=e.value)==null?void 0:M.document_attn_outside,(r,j)=>{var B,T,S;return i(),n("tr",{key:j},[t("td",Kt,[t("div",{class:g(a.isMobile?"ell-1 text-xs":"ell-1")},o((B=r==null?void 0:r.attn_data)==null?void 0:B.guide_book),3)]),t("td",Wt,[t("div",{class:g(a.isMobile?"ell-1 text-xs":"ell-1")},o((T=r==null?void 0:r.attn_data)==null?void 0:T.name),3)]),t("td",Gt,[t("div",{class:g(a.isMobile?"ell-1 text-xs":"ell-1")},o((S=r==null?void 0:r.attn_data)==null?void 0:S.email),3)]),t("td",Jt,[t("div",null,[c(l,{onClick:P=>a.previewPDF(r),text:"ดู PDF",btnClass:"btn-primary basis-1/2 text-xs"},null,8,["onClick"])])])])}),128))])])]),Qt,t("div",Ut,[t("table",Xt,[t("thead",null,[t("tr",null,[t("th",{class:g(a.isMobile?"border h-[60px] px-3 w-[25%] text-start text-xs":"border h-[60px] px-3 w-[25%] text-start")},"ประเภท",2),t("th",{class:g(a.isMobile?"border h-[60px] px-3 w-[25%] text-start text-xs":"border h-[60px] px-3 w-[25%] text-start")}," ชื่อหน่วยงาน/บุคคล ",2),t("th",{class:g(a.isMobile?"border h-[60px] px-3 w-[25%] text-start text-xs":"border h-[60px] px-3 w-[25%] text-start")},"อีเมล",2),t("th",{class:g(a.isMobile?"border h-[60px] px-3 w-[25%] text-start text-xs":"border h-[60px] px-3 w-[25%] text-start")},null,2)])]),t("tbody",null,[(i(!0),n(A,null,F((Y=e.value)==null?void 0:Y.document_attn_inside,(r,j)=>{var B,T,S,P;return i(),n("tr",{key:j},[t("td",Zt,[c(d,{class:"text-2xl text-blue-500",icon:a.checkIcon(r==null?void 0:r.attn_type)},null,8,["icon"])]),t("td",$t,[t("div",{class:g(a.isMobile?"ell-1 text-xs":"ell-1")},o((B=r==null?void 0:r.attn_data)!=null&&B.full_name?(T=r==null?void 0:r.attn_data)==null?void 0:T.full_name:(S=r==null?void 0:r.attn_data)==null?void 0:S.organization_name),3)]),t("td",te,[t("div",{class:g(a.isMobile?"ell-1 text-xs":"ell-1")},o((P=r==null?void 0:r.attn_data)==null?void 0:P.email),3)]),t("td",ee,[t("div",null,[a.showButton?(i(),y(l,{key:0,onClick:O=>a.previewPDF(r),text:"ดู PDF",btnClass:"btn-primary basis-1/2 text-xs"},null,8,["onClick"])):f("",!0)])])])}),128))])])])])]}),_:1},8,["title","activeModal","sizeClass"])):f("",!0),u.isShowDialogPdf?(i(),y(b,{key:1,title:"ดูรายละเอียดเอกสาร",labelClass:"btn-outline-dark",sizeClass:"w-3/4",label:"",centered:"",activeModal:u.isShowDialogPdf,"onEvent:closeModal":m[2]||(m[2]=M=>u.isShowDialogPdf=!1)},{default:E(()=>[t("div",null,[t("iframe",{class:"w-full h-[1000px] mt-4",src:"data:application/pdf;base64, "+u.pdfPath,frameborder:"0"},null,8,se)])]),_:1},8,["activeModal"])):f("",!0)])}const Yt=U(At,[["render",ae]]),ie={name:"CoverSheet",props:{item:{type:Object,default:()=>{}},activeTab:{type:Boolean,default:!0}},components:{Icon:Z,Button:It,Dropdown:jt,Expansion:$,ItemRow:Yt},data(){return{urlSarabun:Bt}},computed:{isMobile(){return Tt().isMobile},book_pdf_path(){var s,m;return(s=this.item)!=null&&s.book_pdf_path?Bt+"/"+((m=this.item)==null?void 0:m.book_pdf_path):"#"}},methods:{downloadList(s){return s=="สั่งการแล้ว"||s=="ลงนามแล้ว"?[{label:"PDF",path:this.book_pdf_path,icon:"ant-design:file-pdf-filled",classIcon:"text-red-500"}]:[{label:"PDF",path:this.book_pdf_path,icon:"ant-design:file-pdf-filled",classIcon:"text-red-500"},{label:"Word",path:this.book_pdf_path,icon:"ant-design:file-word-filled",classIcon:"text-blue-500"}]},downloadFileDocument(s){var m;console.log(s),this.isMobile?this.$router.push("/app/issue/order/attachment-preview?link=/"+((m=this.item)==null?void 0:m.book_pdf_path)):window.open(s.path,"_blank")},convertDate(s){return s?z(s).locale("th").add(543,"year").format("DD/MM/YYYY"):"-"},convertDateTime(s){return s?z(s).locale("th").add(543,"year").format("DD MMM YYYY HH:mm"):"-"}}},le={class:"list list-odd p-4"},oe={class:"flex gap-5 py-3 flex-wrap md:flex-nowrap"},ne=t("div",{class:"basis-full md:basis-1/4 text-start md:text-end font-bold"}," เอกสารแนบ ",-1),de={class:"basis-full md:basis-3/4"},ce={key:0,class:"flex flex-wrap items-center gap-3 mb-3"},_e={class:"basis-full md:basis-3/4 border rounded bg-gray-50 px-2 py-1"},re={class:"flex justify-between items-center"},me={class:"shrink w-[20px]"},ue={class:"basis-full pl-4"},be={class:"text-md ell-1"},he={class:"text-sm text-gray-400 flex items-center mt-1"},ve={key:0,class:"basis-1/4"},xe={class:"basis-3/4"},fe={class:"basis-full md:basis-1/4 flex gap-3"},we=["href"],ye={key:1};function ge(s,m,e,C,u,a){const l=x("ItemRow"),w=x("Icon"),d=x("Button"),b=x("Dropdown"),h=x("Expansion");return i(),y(h,{title:"รายละเอียดหนังสือ",activeItem:e.activeTab,parentClass:"space-y-5 mb-6 "+(a.isMobile?"-mx-6":""),tabBgColorActive:a.isMobile?"bg-gray-100":"bg-blue-700",tabTxtColorActive:a.isMobile?"text-black":"text-white",tabBgColorInactive:a.isMobile?"bg-gray-100":"bg-gray-300",tabTxtColorInactive:(a.isMobile,"text-black")},{default:E(()=>{var _,v,k,D,p,I,M,Y,r,j,B,T,S,P,O,H,R,V,N,L,q,K,W,G,J;return[t("div",le,[c(l,{label:"เลขที่หนังสือ",value:((_=e.item)==null?void 0:_.book_pdf_number)??((v=e.item)==null?void 0:v.document_number)},null,8,["value"]),c(l,{label:"ลงวันที่",value:a.convertDate((k=e.item)==null?void 0:k.document_date)},null,8,["value"]),c(l,{label:"ถึง",value:(p=(D=e.item)==null?void 0:D.to_data)!=null&&p.full_name?(M=(I=e.item)==null?void 0:I.to_data)==null?void 0:M.full_name:((r=(Y=e.item)==null?void 0:Y.to_data)==null?void 0:r.organization_name)??((j=e.item)==null?void 0:j.from_name)},null,8,["value"]),c(l,{label:"เรื่อง",value:(B=e.item)==null?void 0:B.subject},null,8,["value"]),c(l,{label:"เรียน",value:(T=e.item)==null?void 0:T.attn},null,8,["value"]),c(l,{type:"html",label:"รายละเอียด/เนื้อหาสำคัญ",value:(S=e.item)==null?void 0:S.detail},null,8,["value"]),c(l,{label:"วัตถุประสงค์",value:((O=(P=e.item)==null?void 0:P.document_objective)==null?void 0:O.name)??((H=e.item)==null?void 0:H.document_objective)},null,8,["value"]),c(l,{label:"รูปแบบหนังสือ",value:(R=e.item)==null?void 0:R.document_format},null,8,["value"]),c(l,{label:"ชั้นความเร็ว",value:(V=e.item)==null?void 0:V.urgency_level},null,8,["value"]),t("div",oe,[ne,t("div",de,[(N=e.item)!=null&&N.book_pdf_path?(i(),n("div",ce,[t("div",_e,[t("div",re,[t("div",me,[c(w,{icon:"basil:document-solid",class:"text-blue-500 text-3xl"})]),t("div",ue,[t("div",be,o(((L=e.item)==null?void 0:L.book_pdf_subject)??((q=e.item)==null?void 0:q.subject)),1),t("div",he,[(K=e.item)!=null&&K.size?(i(),n("div",ve,o((W=e.item)==null?void 0:W.size)+" KB ",1)):f("",!0),t("div",xe," วันที่นำเข้า : "+o((G=e.item)!=null&&G.created_at?a.convertDateTime((J=e.item)==null?void 0:J.created_at):""),1)])])])]),t("div",fe,[a.isMobile?(i(),n("div",{key:1,onClick:m[0]||(m[0]=X=>{var Q;return s.$router.push("/app/issue/order/attachment-preview?link=/"+((Q=e.item)==null?void 0:Q.book_pdf_path))})},[c(d,{text:"แสดงตัวอย่าง",btnClass:"btn-primary basis-1/2"})])):(i(),n("a",{key:0,href:a.book_pdf_path,target:"_blank"},[c(d,{text:"แสดงตัวอย่าง",btnClass:"btn-primary basis-1/2"})],8,we)),c(b,{items:a.downloadList(e.item.status),classMenuItems:"left-0  w-[220px] top-[110%] ",onOnClickItem:a.downloadFileDocument},{default:E(()=>[c(d,{text:"ดาวน์โหลด",btnClass:"btn-primary",icon:"heroicons-outline:chevron-down",iconPosition:"right",div:"",iconClass:"text-lg"})]),_:1},8,["items","onOnClickItem"])])])):(i(),n("div",ye,"-"))])])])]}),_:1},8,["activeItem","parentClass","tabBgColorActive","tabTxtColorActive","tabBgColorInactive","tabTxtColorInactive"])}const Qa=U(ie,[["render",ge]]),ke={data(){return{isOpen:!1}},name:"BookDetail",props:{item:{type:Object,default:()=>{}},activeTab:{type:Boolean,default:!0}},components:{Icon:Z,Modal:St,Button:It,Expansion:$,ItemRow:Yt},computed:{isHideSpecial(){return["central/history-old"].includes(this.$route.name)},isShow(){return["issue/wait-to-send/view","issue/follow/wait-to-send/view","issue/order/wait-to-send/view","issue/history-suggestion/wait-to-send/view","issue/history-return/wait-to-send/view","issue/history-return/wait-to-send/view","central/rotate-book/wait-to-send/view","issue/pending/wait-to-send/view","issue/signed/wait-to-send/view","issue/acknowledge/wait-to-send/view","issue/history-examine/wait-to-send/view"].includes(this.$route.name)},isHide(){return!["issue/wait-to-send/view","issue/follow/wait-to-send/view","issue/order/wait-to-send/view","issue/history-suggestion/wait-to-send/view","issue/history-return/wait-to-send/view","issue/history-return/wait-to-send/view","central/rotate-book/wait-to-send/view","issue/pending/wait-to-send/view","issue/signed/wait-to-send/view","issue/acknowledge/wait-to-send/view","issue/history-examine/wait-to-send/view"].includes(this.$route.name)},isMobile(){return Tt().isMobile}},methods:{convertDate(s){return s?z(s).locale("th").add(543,"year").format("DD/MM/YYYY"):"-"},checkIcon(s){if(s=="users")return"mingcute:user-4-fill";if(s=="organizations")return"grommet-icons:tree"}}},Me={class:"space-y-2 pl-6 pr-6 overflow-y-auto max-h-[100vh]"},Ce=t("div",{class:"text-2xl font-medium my-6"},"เรียนภายนอก",-1),De={class:"overflow-scroll pb-6 mt-4 table_organize"},pe=t("tr",null,[t("th",{class:"w-[25px] text-start"},"หนังสือนำเรียน"),t("th",{class:"w-[75px] text-start"},"หน่วยงาน")],-1),Ie={class:"w-[75px]"},Be={class:"ell-1"},Te={class:"w-[75px]"},Se={class:"ell-1"},Ye={class:"w-[25px] px-2"},je=t("div",{class:"text-2xl font-medium my-6"},"เรียนภายใน",-1),Pe={class:"overflow-scroll pb-6 mt-4 table_organize"},ze={class:"w-full min-w-[600px]"},Ee=t("tr",null,[t("th",{class:"w-[25px] text-start"},"ประเภท"),t("th",{class:"w-[75px] text-start"},"ชื่อหน่วยงาน/บุคคล")],-1),Ae={class:"w-[25px]"},Fe={class:"w-[75px]"},Oe={class:"ell-1"},He={class:"w-[25px] px-2"};function Re(s,m,e,C,u,a){const l=x("ItemRow"),w=x("Expansion"),d=x("Button"),b=x("Icon"),h=x("Modal");return i(),n("div",null,[c(w,{parentClass:"space-y-5 mb-6 "+(a.isMobile?"-mx-6":""),title:"รายละเอียดเพิ่มเติม",activeItem:e.activeTab,tabBgColorActive:a.isMobile?"bg-gray-100":"bg-blue-700",tabTxtColorActive:a.isMobile?"text-black":"text-white",tabBgColorInactive:a.isMobile?"bg-gray-100":"bg-gray-300",tabTxtColorInactive:(a.isMobile,"text-black")},{default:E(()=>{var _,v,k,D,p,I,M,Y,r,j,B,T,S,P,O,H,R,V,N,L,q,K,W,G,J,X,Q,tt,et,st,at,it,lt,ot,nt,dt,ct,_t,rt,mt,ut,bt,ht,vt,xt,ft,wt,yt,gt,kt,Mt,Ct,Dt,pt;return[t("div",{class:g(a.isMobile?"p-4":"list list-odd p-4")},[a.isShow?(i(),y(l,{key:0,label:"ประเภทการสร้าง",value:(_=e.item)!=null&&_.is_draft?"ดราฟ":"ปกติ"},null,8,["value"])):f("",!0),a.isShow&&((v=e.item)!=null&&v.is_draft)?(i(),y(l,{key:1,label:"สำหรับบทบาท",roleList:(k=e.item)==null?void 0:k.sarabun_role_list,type:"role",value:(D=e.item)==null?void 0:D.draft_role_data},null,8,["roleList","value"])):f("",!0),s.$route.name!="central/history-old/view"?(i(),y(l,{key:2,label:"เส้นทางหนังสือ",value:(I=(p=e.item)==null?void 0:p.document_flow)==null?void 0:I.flow_name},null,8,["value"])):f("",!0),((M=e.item)==null?void 0:M.book_type)=="inside"&&a.isHideSpecial?(i(),y(l,{key:3,label:"ประเภทหนังสือ",value:"ภายใน"})):((Y=e.item)==null?void 0:Y.book_type)=="outside"&&a.isHideSpecial?(i(),y(l,{key:4,label:"ประเภทหนังสือ",value:"ภายนอก"})):f("",!0),!((r=e.item)!=null&&r.book_type)&&a.isHideSpecial?(i(),y(l,{key:5,label:"ประเภทหนังสือ",value:"-"})):f("",!0),c(l,{label:"ประเภทเอกสาร",value:(j=e.item)==null?void 0:j.document_type},null,8,["value"]),c(l,{label:"ปี",value:(B=e.item)==null?void 0:B.year},null,8,["value"]),c(l,{label:"เลขที่หนังสือ",value:(T=e.item)!=null&&T.document_number?(S=e.item)==null?void 0:S.document_number:(P=e.item)==null?void 0:P.book_pdf_at},null,8,["value"]),c(l,{label:"ลงวันที่",value:a.convertDate((O=e.item)==null?void 0:O.document_date)},null,8,["value"]),a.isShow?(i(),y(l,{key:6,label:"เลขทะเบียนส่ง",value:(H=e.item)!=null&&H.initial_number_from?e.item.initial_number_from:"ยังไม่ออกเลขทะเบียนส่ง",classValue:(R=e.item)!=null&&R.initial_number_from?"":"text-red-500"},null,8,["value","classValue"])):(i(),y(l,{key:7,label:"เลขรับ",value:(V=e.item)!=null&&V.initial_number_from?(N=e.item)==null?void 0:N.initial_number_from:((L=e.item)==null?void 0:L.initial_number)??"ยังไม่ออกเลขรับ",classValue:(q=e.item)!=null&&q.initial_number_from||(K=e.item)!=null&&K.initial_number?"":"text-red-500"},null,8,["value","classValue"])),c(l,{label:"จาก",value:((W=e.item)==null?void 0:W.book_type)=="outside"?(J=(G=e.item)==null?void 0:G.from_data)==null?void 0:J.name:((Q=(X=e.item)==null?void 0:X.from_data)==null?void 0:Q.name)??((et=(tt=e.item)==null?void 0:tt.from_data)==null?void 0:et.organization_name)??((st=e.item)==null?void 0:st.from_name)},null,8,["value"]),c(l,{label:"ถึง",value:(it=(at=e.item)==null?void 0:at.to_data)!=null&&it.full_name?(ot=(lt=e.item)==null?void 0:lt.to_data)==null?void 0:ot.full_name:((dt=(nt=e.item)==null?void 0:nt.to_data)==null?void 0:dt.organization_name)??((ct=e.item)==null?void 0:ct.to_name)},null,8,["value"]),c(l,{label:"เรื่อง",value:(_t=e.item)==null?void 0:_t.subject},null,8,["value"]),c(l,{label:"เรียน",type:(rt=e.item)!=null&&rt.is_circular?"button":"text",value:(mt=e.item)!=null&&mt.is_circular?e.item:(ut=e.item)==null?void 0:ut.attn},null,8,["type","value"]),a.isHide?(i(),y(l,{key:8,type:"html",label:"รายละเอียด/เนื้อหาสำคัญ",value:(bt=e.item)==null?void 0:bt.detail},null,8,["value"])):f("",!0),c(l,{label:"วัตถุประสงค์",value:((vt=(ht=e.item)==null?void 0:ht.document_objective)==null?void 0:vt.name)??((xt=e.item)==null?void 0:xt.document_objective)},null,8,["value"]),c(l,{label:"รูปแบบหนังสือ",value:(ft=e.item)==null?void 0:ft.document_format},null,8,["value"]),c(l,{label:"ชั้นความเร็ว",value:(wt=e.item)==null?void 0:wt.urgency_level},null,8,["value"]),c(l,{label:"ชั้นความลับ",value:(yt=e.item)==null?void 0:yt.secrecy_level},null,8,["value"]),a.isShow?(i(),y(l,{key:9,label:"ผู้ปฏิบัติราชการแทน",value:(kt=(gt=e.item)==null?void 0:gt.ref_user_data)==null?void 0:kt.full_name},null,8,["value"])):f("",!0),a.isShow?(i(),y(l,{key:10,label:"ผู้สร้าง",value:(Ct=(Mt=e.item)==null?void 0:Mt.created_user)==null?void 0:Ct.full_name},null,8,["value"])):f("",!0),c(l,{label:"ติดตามหนังสือ",value:(Dt=e.item)!=null&&Dt.follow_up_document?"ติดตามอีกครั้งเมื่อ "+a.convertDate((pt=e.item)==null?void 0:pt.follow_up_date):"ไม่ติดตาม"},null,8,["value"])],2)]}),_:1},8,["parentClass","activeItem","tabBgColorActive","tabTxtColorActive","tabBgColorInactive","tabTxtColorInactive"]),u.isOpen?(i(),y(h,{key:0,activeModal:u.isOpen,"onEvent:closeModal":m[0]||(m[0]=_=>u.isOpen=!1),sizeClass:"h-[720px]"},{default:E(()=>[t("div",Me,[Ce,t("div",De,[t("table",null,[pe,(i(!0),n(A,null,F(e.item,(_,v)=>(i(),n("tr",{key:v},[t("td",Ie,[t("div",Be,o(_),1)]),t("td",Te,[t("div",Se,o(_),1)]),t("td",Ye,[t("div",null,[c(d,{text:"ดู PDF",btnClass:"btn-primary basis-1/2"})])])]))),128))])]),je,t("div",Pe,[t("table",ze,[Ee,(i(!0),n(A,null,F(e.item,(_,v)=>(i(),n("tr",{key:v},[t("td",Ae,[c(b,{class:"text-2xl text-blue-500",icon:a.checkIcon(_)},null,8,["icon"])]),t("td",Fe,[t("div",Oe,o(_),1)]),t("td",He,[t("div",null,[zt(" qweqwe "),c(d,{text:"ดู PDF",btnClass:"btn-primary basis-1/2"})])])]))),128))])])])]),_:1},8,["activeModal"])):f("",!0)])}const Ua=U(ke,[["render",Re]]),Ve={name:"AttachedFile",props:{item:{type:Object,default:()=>{}},activeTab:{type:Boolean,default:!1}},components:{Icon:Z,Button:It,Expansion:$},computed:{isMobile(){return Tt().isMobile}},data(){return{urlSarabun:Bt}},methods:{convertDate(s){return s?z(s).locale("th").add(543,"year").format("DD/MM/YYYY"):"-"},convertDateTime(s){return s?z(s).locale("th").add(543,"year").format("DD MMM YYYY HH:mm"):"-"}}},Ne={class:"list list-odd p-4"},Le={class:"flex flex-wrap md:flex-nowrap gap-5 py-3 px-3 md:px-0"},qe=t("div",{class:"basis-full md:basis-1/4 text-start md:text-end font-bold"}," เอกสารแนบ ",-1),Ke={class:"basis-full md:basis-3/4 pr-3"},We={class:"basis-full md:basis-3/4 border rounded bg-gray-50 px-3 py-2"},Ge={class:"flex justify-between items-center"},Je={class:"shrink w-[20px]"},Qe={class:"basis-full pl-4"},Ue={class:"text-md ell-1"},Xe={class:"text-sm text-gray-400 flex items-center mt-1"},Ze={class:"basis-1/4"},$e={class:"basis-3/4"},ts={class:"basis-full md:basis-1/4 flex gap-3"},es=["href"],ss=["onClick"],as=["href"];function is(s,m,e,C,u,a){const l=x("Icon"),w=x("Button"),d=x("Expansion");return i(),y(d,{title:"ไฟล์แนบ/Scan",activeItem:e.activeTab,parentClass:"space-y-5 mb-6 "+(a.isMobile?"-mx-6":""),tabBgColorActive:a.isMobile?"bg-gray-100":"bg-blue-700",tabTxtColorActive:a.isMobile?"text-black":"text-white",tabBgColorInactive:a.isMobile?"bg-gray-100":"bg-gray-300",tabTxtColorInactive:(a.isMobile,"text-black")},{default:E(()=>{var b,h;return[t("div",Ne,[t("div",Le,[qe,t("div",Ke,[(i(!0),n(A,null,F(((b=e.item)==null?void 0:b.document_attachments)??((h=e.item)==null?void 0:h.old_document_attachments),(_,v)=>(i(),n("div",{class:"flex flex-wrap items-center gap-3 mb-3",key:v},[t("div",We,[t("div",Ge,[t("div",Je,[c(l,{icon:"ant-design:file-pdf-filled",class:"text-red-500 text-2xl"})]),t("div",Qe,[t("div",Ue,o(_==null?void 0:_.file_name),1),t("div",Xe,[t("div",Ze,o(_==null?void 0:_.file_size)+" KB",1),t("div",$e," วันที่นำเข้า : "+o(a.convertDate(_==null?void 0:_.created_at)),1)])])])]),t("div",ts,[a.isMobile?(i(),n("div",{key:1,onClick:k=>s.$router.push("/app/issue/order/attachment-preview?link="+(_==null?void 0:_.file_path))},[c(w,{text:"แสดงตัวอย่าง",btnClass:"btn-primary basis-1/2"})],8,ss)):(i(),n("a",{key:0,href:u.urlSarabun+_.file_path,target:"_blank"},[c(w,{text:"แสดงตัวอย่าง",btnClass:"btn-primary basis-1/2"})],8,es)),t("a",{href:u.urlSarabun+_.file_path,target:"_blank",download:""},[c(w,{text:"ดาวน์โหลด",btnClass:"btn-primary  basis-1/2"})],8,as)])]))),128))])])])]}),_:1},8,["activeItem","parentClass","tabBgColorActive","tabTxtColorActive","tabBgColorInactive","tabTxtColorInactive"])}const Xa=U(Ve,[["render",is]]),ls={name:"BookReference",props:{item:{type:Object,default:()=>{}},activeTab:{type:Boolean,default:!1}},components:{Icon:Z,Button:It,Expansion:$},data(){return{urlSarabun:Bt}}},os={class:"list list-odd p-4"},ns={class:"flex gap-5 py-3"},ds=t("div",{class:"basis-1/4 text-end font-bold"},"หนังสืออ้างถึง",-1),cs={class:"basis-3/4 pr-3"},_s={class:"basis-3/4 border rounded bg-gray-50 px-3 py-2"},rs={class:"flex justify-between items-center"},ms={class:"shrink w-[20px]"},us={class:"basis-full pl-4"},bs={class:"text-md ell-1"},hs={class:"basis-1/4 flex gap-3"},vs=["href"];function xs(s,m,e,C,u,a){const l=x("Icon"),w=x("Button"),d=x("Expansion");return i(),y(d,{parentClass:"space-y-5 mb-6",title:"หนังสืออ้างถึง",activeItem:e.activeTab},{default:E(()=>{var b;return[t("div",os,[t("div",ns,[ds,t("div",cs,[(i(!0),n(A,null,F((b=e.item)==null?void 0:b.ref_document,(h,_)=>{var v,k;return i(),n("div",{class:"flex items-center gap-3 mb-3",key:_},[t("div",_s,[t("div",rs,[t("div",ms,[c(l,{icon:"ion:document-text-sharp",class:"text-blue-700 text-4xl"})]),t("div",us,[t("div",bs,o((v=h==null?void 0:h.document)==null?void 0:v.subject),1)])])]),t("div",hs,[t("a",{href:u.urlSarabun+"/"+((k=h==null?void 0:h.document)==null?void 0:k.book_pdf_path),target:"_blank"},[c(w,{text:"แสดงตัวอย่าง",btnClass:"btn-primary basis-1/2"})],8,vs)])])}),128))])])])]}),_:1},8,["activeItem"])}const Za=U(ls,[["render",xs]]),fs={name:"Activity",props:{item:{type:Object,default:()=>{}},activeTab:{type:Boolean,default:!1}},components:{Expansion:$},data(){return{column_activity:[{label:"ลำดับ",thClass:"w-[10%]"},{label:"ข้อมูลการส่ง",thClass:"w-[45%]"},{label:"ข้อมูลการรับ",thClass:"w-[45%]"}]}},computed:{tableRow(){var s,m,e,C,u,a;return Math.max(((m=(s=this.item)==null?void 0:s.receive_flow_order)==null?void 0:m.length)??0,((C=(e=this.item)==null?void 0:e.send_flow_order)==null?void 0:C.length)??0,((a=(u=this.item)==null?void 0:u.old_docuement_flow_history)==null?void 0:a.length)??0)}},methods:{onClick(){this.$emit("event:onClick")},convertDateTime(s){return s?z(s).locale("th").add(543,"year").format("DD MMM YYYY HH:mm"):"-"}}},ws={class:"p-4 list list-odd"},ys={class:"table_activity"},gs={key:0},ks={class:"flex mb-1"},Ms=t("div",{class:"basis-1/4"},"เลขส่ง",-1),Cs={class:"basis-3/4"},Ds={class:"flex mb-1"},ps=t("div",{class:"basis-1/4"},"วัน/เวลาส่ง",-1),Is={class:"basis-3/4"},Bs={key:0,class:"text-orange-500"},Ts={key:1},Ss={class:"flex mb-1"},Ys=t("div",{class:"basis-1/4"},"ส่งจาก",-1),js={class:"basis-3/4"},Ps={class:"flex mb-1"},zs=t("div",{class:"basis-1/4"},"ผู้ส่ง",-1),Es={class:"basis-3/4"},As={class:"flex mb-1"},Fs=t("div",{class:"basis-1/4"},"คำสั่งการ/คำเสนอ",-1),Os={class:"basis-3/4"},Hs={key:1},Rs={class:"flex mb-1"},Vs=t("div",{class:"basis-1/4"},"เลขรับ",-1),Ns={class:"basis-3/4"},Ls={class:"flex mb-1"},qs=t("div",{class:"basis-1/4"},"วัน/เวลารับ",-1),Ks={class:"basis-3/4"},Ws={key:0,class:"text-orange-500"},Gs={key:1},Js={class:"flex mb-1"},Qs=t("div",{class:"basis-1/4"},"ถึง",-1),Us={class:"basis-3/4"},Xs={class:"flex mb-1"},Zs=t("div",{class:"basis-1/4"},"ผู้รับ",-1),$s={class:"basis-3/4"},ta={class:"flex mb-1"},ea=t("div",{class:"basis-1/4"},"การปฏิบัติ",-1),sa={class:"basis-3/4"},aa={key:2},ia={class:"flex mb-1"},la=t("div",{class:"basis-1/4"},"เลขส่ง",-1),oa={class:"basis-3/4"},na={class:"flex mb-1"},da={class:"basis-1/4"},ca={class:"basis-3/4"},_a={key:0,class:"text-orange-500"},ra={key:1},ma={class:"flex mb-1"},ua=t("div",{class:"basis-1/4"},"ส่งจาก",-1),ba={class:"basis-3/4"},ha={class:"flex mb-1"},va=t("div",{class:"basis-1/4"},"ผู้ส่ง",-1),xa={class:"basis-3/4"},fa={class:"flex mb-1"},wa=t("div",{class:"basis-1/4"},"คำสั่งการ/คำเสนอ",-1),ya={class:"basis-3/4"},ga={key:3},ka=t("div",{class:"flex mb-1"},[t("div",{class:"basis-1/4"},"เลขรับ"),t("div",{class:"basis-3/4"},o("-"))],-1),Ma=t("div",{class:"flex mb-1"},[t("div",{class:"basis-1/4"},"วัน/เวลารับ"),t("div",{class:"basis-3/4"},[t("div",null,o("-"))])],-1),Ca=t("div",{class:"flex mb-1"},[t("div",{class:"basis-1/4"},"ถึง"),t("div",{class:"basis-3/4"},o("-"))],-1),Da=t("div",{class:"flex mb-1"},[t("div",{class:"basis-1/4"},"ผู้รับ"),t("div",{class:"basis-3/4"},o("-"))],-1),pa=t("div",{class:"flex mb-1"},[t("div",{class:"basis-1/4"},"การปฏิบัติ"),t("div",{class:"basis-3/4"},o("-"))],-1),Ia=[ka,Ma,Ca,Da,pa];function Ba(s,m,e,C,u,a){const l=x("Expansion");return i(),y(l,{parentClass:"space-y-5 mb-6",title:"ความเคลื่อนไหว/กิจกรรม",subTitle:"ประวัติการสั่งการ/การปฏิบัติ",onClickSubTitle:a.onClick,classSubTitle:"text-blue-700 underline",activeItem:e.activeTab},{default:E(()=>[t("div",ws,[t("div",ys,[t("table",null,[t("tr",null,[(i(!0),n(A,null,F(u.column_activity,(w,d)=>(i(),n("th",{key:d,class:g(w.thClass)},o(w.label),3))),128))]),(i(!0),n(A,null,F(a.tableRow,(w,d)=>{var b,h,_,v,k,D,p,I,M,Y,r,j,B,T,S,P,O,H,R,V,N,L,q,K,W,G,J,X,Q,tt,et,st,at,it,lt,ot,nt,dt,ct,_t,rt,mt,ut,bt,ht,vt,xt,ft,wt,yt,gt,kt,Mt,Ct,Dt,pt;return i(),n("tr",{key:d},[t("td",null,o(d+1),1),(b=e.item)!=null&&b.old_docuement_flow_history?f("",!0):(i(),n("td",gs,[t("div",ks,[Ms,t("div",Cs,o(((_=(h=e.item)==null?void 0:h.send_flow_order[d])==null?void 0:_.initial_number)??"-"),1)]),t("div",Ds,[ps,t("div",Is,[((k=(v=e.item)==null?void 0:v.send_flow_order[d])==null?void 0:k.completed_date)=="รอดำเนินการ"?(i(),n("div",Bs," รอดำเนินการ ")):(i(),n("div",Ts,o((p=(D=e.item)==null?void 0:D.send_flow_order[d])!=null&&p.completed_date?a.convertDateTime((M=(I=e.item)==null?void 0:I.send_flow_order[d])==null?void 0:M.completed_date)+" น.":"-"),1))])]),t("div",Ss,[Ys,t("div",js,o(((Y=e.item)==null?void 0:Y.from_type)=="outside_organization"?(B=(j=(r=e.item)==null?void 0:r.send_flow_order[d])==null?void 0:j.from_data)==null?void 0:B.name:((P=(S=(T=e.item)==null?void 0:T.send_flow_order[d])==null?void 0:S.from_data)==null?void 0:P.organization_name)??"-"),1)]),t("div",Ps,[zs,t("div",Es,o(((H=(O=e.item)==null?void 0:O.send_flow_order[d])==null?void 0:H.action_by)??"-"),1)]),t("div",As,[Fs,t("div",Os,o(((V=(R=e.item)==null?void 0:R.send_flow_order[d])==null?void 0:V.action)??"-"),1)])])),(N=e.item)!=null&&N.old_docuement_flow_history?f("",!0):(i(),n("td",Hs,[t("div",Rs,[Vs,t("div",Ns,o(((q=(L=e.item)==null?void 0:L.receive_flow_order[d])==null?void 0:q.initial_number)??"-"),1)]),t("div",Ls,[qs,t("div",Ks,[((W=(K=e.item)==null?void 0:K.receive_flow_order[d])==null?void 0:W.completed_date)=="รอดำเนินการ"?(i(),n("div",Ws," รอดำเนินการ ")):(i(),n("div",Gs,o((J=(G=e.item)==null?void 0:G.receive_flow_order[d])!=null&&J.completed_date?a.convertDateTime((Q=(X=e.item)==null?void 0:X.receive_flow_order[d])==null?void 0:Q.completed_date)+" น.":"-"),1))])]),t("div",Js,[Qs,t("div",Us,o((et=(tt=e.item)==null?void 0:tt.receive_flow_order[d])!=null&&et.to_data?(it=(at=(st=e.item)==null?void 0:st.receive_flow_order[d])==null?void 0:at.to_data)==null?void 0:it.full_name:"-"),1)]),t("div",Xs,[Zs,t("div",$s,o((ot=(lt=e.item)==null?void 0:lt.receive_flow_order[d])!=null&&ot.action_by?(dt=(nt=e.item)==null?void 0:nt.receive_flow_order[d])==null?void 0:dt.action_by:"-"),1)]),t("div",ta,[ea,t("div",sa,o(((_t=(ct=e.item)==null?void 0:ct.receive_flow_order[d])==null?void 0:_t.action)??"-"),1)])])),(rt=e.item)!=null&&rt.old_docuement_flow_history?(i(),n("td",aa,[t("div",ia,[la,t("div",oa,o(((mt=e.item)==null?void 0:mt.document_number)??"-"),1)]),t("div",na,[t("div",da,o(((bt=(ut=e.item)==null?void 0:ut.old_docuement_flow_history[d])==null?void 0:bt.status)=="ดำเนินการเสร็จสิ้น"?"วันที่เสร็จสิ้น":"วัน/เวลาส่ง"),1),t("div",ca,[((vt=(ht=e.item)==null?void 0:ht.old_docuement_flow_history[d])==null?void 0:vt.status)=="รอดำเนินการ"?(i(),n("div",_a," รอดำเนินการ ")):(i(),n("div",ra,o((ft=(xt=e.item)==null?void 0:xt.old_docuement_flow_history[d])!=null&&ft.completed_at?a.convertDateTime((yt=(wt=e.item)==null?void 0:wt.old_docuement_flow_history[d])==null?void 0:yt.completed_at)+" น.":"-"),1))])]),t("div",ma,[ua,t("div",ba,o(((gt=e.item)==null?void 0:gt.from_name)??"-"),1)]),t("div",ha,[va,t("div",xa,o(((Mt=(kt=e.item)==null?void 0:kt.old_docuement_flow_history[d])==null?void 0:Mt.action_by)??"-"),1)]),t("div",fa,[wa,t("div",ya,o(((Dt=(Ct=e.item)==null?void 0:Ct.old_docuement_flow_history[d])==null?void 0:Dt.action_detail)??"-"),1)])])):f("",!0),(pt=e.item)!=null&&pt.old_docuement_flow_history?(i(),n("td",ga,Ia)):f("",!0)])}),128))])])])]),_:1},8,["onClickSubTitle","activeItem"])}const $a=U(fs,[["render",Ba]]),Ta={name:"RouteDetail",props:{item:{type:Object,default:()=>{}},activeTab:{type:Boolean,default:!1}},components:{Icon:Z,Expansion:$},methods:{getRoleName(s){let m=[];return console.log(s),s.forEach((e,C)=>{var u;m.push((u=e.sarabun_roles)==null?void 0:u.name)}),m.join("/")},checkDateExpired(s,m){if(!s||!m)return 0;const e=z(s);return z(m).diff(e,"day")},convertDate(s){return s?z(s).locale("th").add(543,"year").format("DD/MM/YYYY"):"-"},convertDateTime(s){return s?z(s).locale("th").add(543,"year").format("DD MMM YYYY HH:mm"):"-"}}},Sa={class:"p-4"},Ya={class:"flex justify-between"},ja={class:"basis-1/2"},Pa={class:"font-medium text-[16px]"},za={class:"basis-1/2 flex justify-end flex-wrap gap-1"},Ea={key:0,class:"basis-full flex justify-end"},Aa={class:"basis-full flex justify-end"},Fa={key:0,class:"text-orange-500"},Oa={key:1,class:"text-green-500"};function Ha(s,m,e,C,u,a){const l=x("Icon"),w=x("Expansion");return i(),y(w,{parentClass:"space-y-5 mb-6",title:"รายละเอียดเส้นทางหนังสือ",activeItem:e.activeTab},{default:E(()=>{var d;return[t("div",Sa,[(i(!0),n(A,null,F((d=e.item)==null?void 0:d.document_flow_history,(b,h)=>{var _,v,k,D,p,I;return i(),n("div",{class:"border rounded-md border-gray-200 p-3 bg-gray-50 mb-5",key:h},[t("div",Ya,[t("div",ja,[t("div",Pa,o((v=(_=b==null?void 0:b.document_flow_order)==null?void 0:_.sub_menu)==null?void 0:v.name)+" - "+o(((k=b==null?void 0:b.document_flow_order)==null?void 0:k.document_flow_order_roles.length)>0?a.getRoleName((D=b==null?void 0:b.document_flow_order)==null?void 0:D.document_flow_order_roles):""),1),(i(!0),n(A,null,F((p=b==null?void 0:b.document_flow_order)==null?void 0:p.document_flow_order_action,(M,Y)=>(i(),n("div",{class:"flex items-center text-gray-400 pl-3",key:Y},[c(l,{icon:"carbon:dot-mark",class:"text-md mr-1"}),t("div",null,o(M.action_name),1)]))),128))]),t("div",za,[h!=0?(i(),n("div",Ea," รอดำเนินการ "+o(a.checkDateExpired((I=e.item)==null?void 0:I.document_flow_history[h-1].completed_at,b.completed_at))+" วัน ",1)):f("",!0),t("div",Aa,[b.status==="รอดำเนินการ"?(i(),n("div",Fa," รอดำเนินการ - ")):(i(),n("div",Oa," ดำเนินการแล้ว "+o(a.convertDateTime(b.completed_at))+" น. ",1))])])])])}),128))])]}),_:1},8,["activeItem"])}const ti=U(Ta,[["render",Ha]]);export{Xa as A,Ua as B,Qa as C,ti as R,Za as a,$a as b};
