import{o as y,V as A,w as j,t as k,R as O,a as f,u as L}from"./dom-b10fc197.js";import{P as T,M as b}from"./focus-management-94a631f4.js";import{b as R}from"./use-resolve-button-type-d7bee841.js";import{a as W,f as $}from"./hidden-800255f5.js";import{A as I,aA as P,W as S,k as x,au as q,bf as C,F as N,al as D,aq as B,$ as G}from"./preload-helper-f37a9bec.js";import{t as M}from"./micro-task-89dcd6af.js";let U=I({props:{onFocus:{type:Function,required:!0}},setup(a){let u=P(!0);return()=>u.value?S($,{as:"button",type:"button",features:W.Focusable,onFocus(i){i.preventDefault();let s,e=50;function o(){var l;if(e--<=0){s&&cancelAnimationFrame(s);return}if((l=a.onFocus)!=null&&l.call(a)){u.value=!1,cancelAnimationFrame(s);return}s=requestAnimationFrame(o)}s=requestAnimationFrame(o)}}):null}}),E=Symbol("TabsContext");function F(a){let u=G(E,null);if(u===null){let i=new Error(`<${a} /> is missing a parent <TabGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(i,F),i}return u}let X=I({name:"TabGroup",emits:{change:a=>!0},props:{as:{type:[Object,String],default:"template"},selectedIndex:{type:[Number],default:null},defaultIndex:{type:[Number],default:0},vertical:{type:[Boolean],default:!1},manual:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(a,{slots:u,attrs:i,emit:s}){let e=P(null),o=P([]),l=P([]),p=x(()=>a.selectedIndex!==null),c=x(()=>p.value?a.selectedIndex:e.value),m={selectedIndex:e,orientation:x(()=>a.vertical?"vertical":"horizontal"),activation:x(()=>a.manual?"manual":"auto"),tabs:o,panels:l,setSelectedIndex(r){c.value!==r&&s("change",r),p.value||(e.value=r)},registerTab(r){o.value.includes(r)||o.value.push(r)},unregisterTab(r){let n=o.value.indexOf(r);n!==-1&&o.value.splice(n,1)},registerPanel(r){l.value.includes(r)||l.value.push(r)},unregisterPanel(r){let n=l.value.indexOf(r);n!==-1&&l.value.splice(n,1)}};return q(E,m),C(()=>{var r;if(m.tabs.value.length<=0||a.selectedIndex===null&&e.value!==null)return;let n=m.tabs.value.map(g=>y(g)).filter(Boolean),d=n.filter(g=>!g.hasAttribute("disabled")),h=(r=a.selectedIndex)!=null?r:a.defaultIndex;if(h<0)e.value=n.indexOf(d[0]);else if(h>m.tabs.value.length)e.value=n.indexOf(d[d.length-1]);else{let g=n.slice(0,h),t=[...n.slice(h),...g].find(v=>d.includes(v));if(!t)return;e.value=n.indexOf(t)}}),()=>{let r={selectedIndex:e.value};return S(N,[o.value.length<=0&&S(U,{onFocus:()=>{for(let n of o.value){let d=y(n);if((d==null?void 0:d.tabIndex)===0)return d.focus(),!0}return!1}}),A({theirProps:{...i,...j(a,["selectedIndex","defaultIndex","manual","vertical","onChange"])},ourProps:{},slot:r,slots:u,attrs:i,name:"TabGroup"})])}}}),Y=I({name:"TabList",props:{as:{type:[Object,String],default:"div"}},setup(a,{attrs:u,slots:i}){let s=F("TabList");return()=>{let e={selectedIndex:s.selectedIndex.value},o={role:"tablist","aria-orientation":s.orientation.value};return A({ourProps:o,theirProps:a,slot:e,attrs:u,slots:i,name:"TabList"})}}}),Z=I({name:"Tab",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1}},setup(a,{attrs:u,slots:i,expose:s}){let e=F("Tab"),o=`headlessui-tabs-tab-${k()}`,l=P(null);s({el:l,$el:l}),D(()=>e.registerTab(l)),B(()=>e.unregisterTab(l));let p=x(()=>e.tabs.value.indexOf(l)),c=x(()=>p.value===e.selectedIndex.value);function m(t){let v=e.tabs.value.map(w=>y(w)).filter(Boolean);if(t.key===f.Space||t.key===f.Enter){t.preventDefault(),t.stopPropagation(),e.setSelectedIndex(p.value);return}switch(t.key){case f.Home:case f.PageUp:return t.preventDefault(),t.stopPropagation(),T(v,b.First);case f.End:case f.PageDown:return t.preventDefault(),t.stopPropagation(),T(v,b.Last)}if(L(e.orientation.value,{vertical(){if(t.key===f.ArrowUp)return T(v,b.Previous|b.WrapAround);if(t.key===f.ArrowDown)return T(v,b.Next|b.WrapAround)},horizontal(){if(t.key===f.ArrowLeft)return T(v,b.Previous|b.WrapAround);if(t.key===f.ArrowRight)return T(v,b.Next|b.WrapAround)}}))return t.preventDefault()}function r(){var t;(t=y(l))==null||t.focus()}let n=P(!1);function d(){var t;n.value||(n.value=!0,!a.disabled&&((t=y(l))==null||t.focus(),e.setSelectedIndex(p.value),M(()=>{n.value=!1})))}function h(t){t.preventDefault()}let g=R(x(()=>({as:a.as,type:u.type})),l);return()=>{var t;let v={selected:c.value},w={ref:l,onKeydown:m,onFocus:e.activation.value==="manual"?r:d,onMousedown:h,onClick:d,id:o,role:"tab",type:g.value,"aria-controls":(t=y(e.panels.value[p.value]))==null?void 0:t.id,"aria-selected":c.value,tabIndex:c.value?0:-1,disabled:a.disabled?!0:void 0};return A({ourProps:w,theirProps:a,slot:v,attrs:u,slots:i,name:"Tab"})}}}),_=I({name:"TabPanels",props:{as:{type:[Object,String],default:"div"}},setup(a,{slots:u,attrs:i}){let s=F("TabPanels");return()=>{let e={selectedIndex:s.selectedIndex.value};return A({theirProps:a,ourProps:{},slot:e,attrs:i,slots:u,name:"TabPanels"})}}}),ee=I({name:"TabPanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0}},setup(a,{attrs:u,slots:i,expose:s}){let e=F("TabPanel"),o=`headlessui-tabs-panel-${k()}`,l=P(null);s({el:l,$el:l}),D(()=>e.registerPanel(l)),B(()=>e.unregisterPanel(l));let p=x(()=>e.panels.value.indexOf(l)),c=x(()=>p.value===e.selectedIndex.value);return()=>{var m;let r={selected:c.value},n={ref:l,id:o,role:"tabpanel","aria-labelledby":(m=y(e.tabs.value[p.value]))==null?void 0:m.id,tabIndex:c.value?0:-1};return!c.value&&a.unmount?S($,{as:"span",...n}):A({ourProps:n,theirProps:a,slot:r,attrs:u,slots:i,features:O.Static|O.RenderStrategy,visible:c.value,name:"TabPanel"})}}});export{Y as a,X as l,Z as n,_ as r,ee as u};
