import{I as Ie}from"./informationCard-77ddf345.js";import{I as N}from"./index-8d30ace7.js";import{B as te}from"./index-c2d6eb9c.js";import{I as Oe}from"./index-2198f2cf.js";import{S as Ve}from"./index-a56f86b1.js";import{V as Re,C as Ee}from"./VueSelect-403231fd.js";import{M as ce}from"./index-b704274e.js";import{d as X}from"./dayjs.min-472eb357.js";import{t as G,a as H,_ as U,u as Ce,g as he,c as Se}from"./index-f91482a0.js";import{A as He}from"./AdvancedSearch-88f89aed.js";import{D as W}from"./index-976a2577.js";import{C as L}from"./index-cb5a08aa.js";import{P as q}from"./index-5ddbaceb.js";import{I as Me}from"./itemOrder-5d510f83.js";import{M as me}from"./Modal-b54f1b5f.js";import{M as Be}from"./index-41156f18.js";import{T as Pe}from"./index-3e8503e7.js";import{T as se}from"./index-78f015fc.js";import{R as De}from"./index-e163c14d.js";import{P as Te}from"./index-e68945de.js";import{T as ne}from"./TextValid-d1c607fc.js";import{u as Ye,a as ke}from"./vee-validate.esm-bf91438b.js";import{c as Ae,a as $e}from"./array-6ac4c54d.js";import{T as J}from"./index-b52aeb81.js";import{M as le}from"./index-3891a0e1.js";import{l as ze,a as Fe,n as Ze,r as Ne,u as Ue}from"./tabs-cf3e0d3b.js";import{aA as E,ay as _e,k as re,be as ue,al as je,aF as _,as as t,o,m as I,bj as u,x as l,p as e,n as s,aT as g,F,aD as Z,w as R,ac as ge,b as Le}from"./preload-helper-f37a9bec.js";import{M as xe}from"./index-8e7d66d6.js";import{O as Ge}from"./index-45e9fb95.js";import"./iconify-2baafea4.js";import"./vue-cleave.min-df5c8cc9.js";import"./transition-be7c09bc.js";import"./dom-b10fc197.js";import"./hidden-800255f5.js";import"./focus-management-94a631f4.js";import"./micro-task-89dcd6af.js";import"./open-closed-75edfb8a.js";import"./use-outside-click-156e41c1.js";import"./index-325a54cb.js";import"./ck-white-3501111f.js";import"./select-option-b2a02578.js";import"./index-8ecfca6d.js";import"./use-resolve-button-type-d7bee841.js";const We={components:{Pagination:q,Dropdown:W,Icon:N,Card:L,ItemOrder:Me,Modal:me,Textinput:Pe,Textarea:se,Radio:De,PinInput:Te,Button:te,TextValid:ne,TabGroup:ze,TabList:Fe,Tab:Ze,TabPanels:Ne,TabPanel:Ue,ModalError:le,SignedModal:Be,Tooltip:J},data(){return{urlSarabun:G}},props:["filter"],setup(a){const n=E(!1),V=E(""),p=E(!1);Ce();const d=E(!1),v=E(!1),b=E(null),y=E(null),T=E(0),D=E(null),j=_e({total:50,current_page:1,perpage:10,pageRange:5}),r=[{label:"หนังสือ",field:"book",width:"2.19%",tdClass:"text_left",thClass:"text_left"},{label:"เลขที่หนังสือ",field:"document_number",width:"10.93%",tdClass:"text_left",thClass:"text_left"},{label:"เลขรับ/ส่ง",field:"initial_number_from",width:"8.20%"},{label:"เรื่อง",field:"subject",width:"21.86%",tdClass:"text_left",thClass:"text_left"},{label:"จาก",field:"from",width:"21.86%",tdClass:"text_left",thClass:"text_left"},{label:"ถึง",field:"to",width:"21.86%",tdClass:"text_left",thClass:"text_left"},{label:"สถานะ",field:"status",width:"7.65%",tdClass:"text_left",thClass:"text_left"},{label:"จัดการ",field:"action",width:"5.46%"}],C=E([]),h=_e({position:"",signature:"",pincode:""}),i=re(()=>he().isMobile),k=re(()=>Se().userInfo),m=Ae({signature:$e().required("กรุณาใส่ลายเซ็น"),pincode:$e().required("กรุณากรอกรหัส PIN Code ของใบอนุญาติอิเล็กทรอนิกส์")});Ye({validationSchema:m}),ke("signature"),ke("pincode"),ue(()=>a.filter,w=>{x(1)}),je(async()=>{await x(1)});const x=async w=>{const P=await H("signedStore","get",{payload:{page:w,...a.filter}});P.status===200&&(C.value=P.data.result.data,D.value=P.data.result.permission,j.total=P.data.result.total_page*P.data.result.per_page,j.current_page=P.data.result.current_page,j.perpage=P.data.result.per_page)};return{userInfo:k,modalSigned:d,paginate:j,columns:r,items:C,isMobile:i,itemModal:b,formModal:h,selected:T,isSuccess:v,errorMessage:V,isError:p,modalImplement:n,permission:D,changePage:async w=>{j.current_page=w,await x(w)},handleSubmitOrder:w=>{console.log("handleSubmitOrder",w),b.value=w,d.value=!0},handleImplement:w=>{y.value={...w,order:w==null?void 0:w.order,detail:w==null?void 0:w.detail,full_name:w==null?void 0:w.full_name,position:w==null?void 0:w.position},n.value=!0},handleCancelSigned:async w=>{console.log("delete")}}}},qe={class:"custom__table"},Je=e("div",{class:"text-center"},[e("div",{class:"text-gray-400"},"ไม่พบข้อมูล")],-1),Ke={key:0},Qe={class:"flex space-x-1"},Xe={class:"shrink w-[30px]"},et={key:0},tt={key:1},ot={key:2},st={class:"space-y-1"},nt={key:0},lt=e("div",{class:"bg-yellow-500 text-center rounded text-white px-2 py-1"}," ด่วน ",-1),at=[lt],it={key:1},dt=e("div",{class:"bg-orange-500 text-center rounded text-white px-2 py-1"}," ด่วนมาก ",-1),rt=[dt],ct={key:2},_t=e("div",{class:"bg-red-500 text-center rounded text-white px-2 py-1"}," ด่วนที่สุด ",-1),ut=[_t],gt={key:3},ht=e("div",{class:"bg-white border-2 border-blue-700 text-center rounded text-black px-2"}," ลับ ",-1),mt=[ht],xt={key:4},pt=e("div",{class:"bg-white border-2 border-red-500 text-center rounded text-black px-2"}," ลับมาก ",-1),bt=[pt],ft={key:5},wt=e("div",{class:"bg-white border-2 border-yellow-500 text-center rounded text-black px-2"}," ลับที่สุด ",-1),vt=[wt],yt={key:1},kt={class:"w-[450px]"},$t={class:"ell-1"},Ct={class:"text-gray-400 ell-1 mb-1"},St={key:0,class:"flex space-x-4"},Mt=["href"],Pt={class:"flex items-center bg-gray-100 border rounded-md px-2 w-[120px] h-[24px] cursor-pointer"},Dt={class:"ell-1"},Tt={key:2},jt={key:3},It={key:4},Ot={key:5},Vt={class:"text-center rounded w-[100px]",style:{"background-color":"#ffb822",color:"#fff"}},Rt={key:6},Et={class:"w-full"},Ht={class:"p-2 flex items-center hover:bg-gray-50 cursor-pointer"},Bt={key:0},Yt=["onClick"],At={key:1},zt=["onClick"],Ft={class:"py-4 px-3"},Zt={key:1,class:"-mx-4 -mt-6"},Nt=e("div",{class:"px-3 py-1 text-[10px] bg-gray-300 -mx-[23px] -mt-[2.5rem]"}," รายการหนังสือรอลงนาม ",-1),Ut={key:0,class:"list list-odd mb-3 -mx-5"},Lt={key:1},Gt=e("div",{class:"mt-3 border rounded bg-gray-50 px-3 py-2 text-center text-gray-400 text-[12px]"}," ไม่พบข้อมูล ",-1),Wt=[Gt],qt={class:"h-[180px] flex items-center justify-center"},Jt={class:"text-center flex flex-row flex-wrap justify-center"},Kt={class:"basis-full flex justify-center mb-5"},Qt=e("div",null,[e("h4",{class:"text-lg text-slate-900"},[R(" ลงนามเอกสารอิเล็กทรอนิกส์ "),e("span",{class:"text-green-500"},"สำเร็จ")])],-1),Xt=e("hr",null,null,-1),eo={class:"flex justify-center mt-4"},to={class:"list list-odd px-28"},oo={class:"flex p-2"},so=e("div",{class:"basis-1/3 text-end pr-3 text-slate-900 font-medium"}," คำสั่งการ/คำเสนอ ",-1),no={class:"basis-2/3"},lo={class:"flex p-2"},ao=e("div",{class:"basis-1/3 text-end pr-3 text-slate-900 font-medium"}," คำสั่งการ/คำเสนอ ",-1),io={class:"basis-2/3"},ro={class:"flex p-2"},co=e("div",{class:"basis-1/3 text-end pr-3 text-slate-900 font-medium"}," ผู้ลงนาม ",-1),_o={class:"basis-2/3"},uo={class:"flex p-2"},go=e("div",{class:"basis-1/3 text-end pr-3 text-slate-900 font-medium"}," ตำแหน่ง ",-1),ho={class:"basis-2/3"},mo=e("hr",{class:"mt-4"},null,-1),xo={class:"flex justify-center mt-4"},po={class:"text-lg text-slate-900"};function bo(a,n,V,p,d,v){const b=_("Icon"),y=_("Tooltip"),T=_("router-link"),D=_("Dropdown"),j=_("Pagination"),r=_("vue-good-table"),C=_("Card"),h=_("ItemOrder"),i=_("Button"),k=_("Modal"),m=_("Radio"),x=_("Textarea"),M=_("Textinput"),f=_("ModalError");return t(),o("div",qe,[p.isMobile?(t(),o("div",Zt,[Nt,p.items.length>0?(t(),o("div",Ut,[(t(!0),o(F,null,Z(p.items,(c,S)=>(t(),I(h,{key:S,item:c,itemType:"signed"},null,8,["item"]))),128))])):(t(),o("div",Lt,Wt))])):(t(),I(C,{key:0,noborder:"",bodyClass:"p-0"},{default:u(()=>[l(r,{columns:p.columns,styleClass:" vgt-table bordered lesspadding2",rows:p.items,"pagination-options":{enabled:!0,perPage:p.paginate.perpage},"sort-options":{enabled:!1},"select-options":{enabled:!1,selectOnCheckboxOnly:!0,selectioninfoClass:"custom-class",selectionText:"rows selected",clearSelectionText:"clear"}},{emptystate:u(()=>[Je]),"table-row":u(c=>{var S,w,P,$,Y;return[c.column.field=="book"?(t(),o("span",Ke,[e("div",Qe,[e("div",Xe,[c.row.document_type=="เอกสารทั่วไป (ส่งฉบับจริง)"?(t(),o("div",et,[l(b,{icon:"emojione-monotone:letter-p",class:"handle text-[25px] text-yellow-500"})])):s("",!0),c.row.document_type=="เอกสารอิเล็กทรอนิกส์"?(t(),o("div",tt,[l(b,{icon:"emojione-monotone:letter-e",class:"handle text-[25px] text-blue-700"})])):s("",!0),c.row.document_type=="หนังสือรับจากอีเมล"?(t(),o("div",ot,[l(b,{icon:"mdi:email",class:"handle text-[25px] text-orange-500"})])):s("",!0)]),e("div",st,[c.row.urgency_level=="ด่วน"?(t(),o("div",nt,at)):s("",!0),c.row.urgency_level=="ด่วนมาก"?(t(),o("div",it,rt)):s("",!0),c.row.urgency_level=="ด่วนที่สุด"?(t(),o("div",ct,ut)):s("",!0),c.row.secrecy_level=="ลับ"?(t(),o("div",gt,mt)):s("",!0),c.row.secrecy_level=="ลับมาก"?(t(),o("div",xt,bt)):s("",!0),c.row.secrecy_level=="ลับที่สุด"?(t(),o("div",ft,vt)):s("",!0)])])])):s("",!0),c.column.field=="subject"?(t(),o("span",yt,[e("div",kt,[l(y,null,{base:u(()=>[e("div",$t,g(c.row.subject),1)]),default:u(()=>[e("div",null,g(c.row.subject),1)]),_:2},1024),e("div",Ct,g(c.row.detail),1),(S=c.row)!=null&&S.document_attachments&&((w=c.row)==null?void 0:w.document_attachments.length)>0?(t(),o("div",St,[(t(!0),o(F,null,Z(c.row.document_attachments,O=>(t(),o("div",{key:O},[e("a",{href:d.urlSarabun+(O==null?void 0:O.file_path),target:"_blank",class:""},[e("div",Pt,[l(b,{icon:"ant-design:file-pdf-filled",class:"text-red-500 pr-1"}),e("div",Dt,g(O==null?void 0:O.file_name),1)])],8,Mt)]))),128))])):s("",!0)])])):s("",!0),c.column.field=="from"?(t(),o("span",Tt,g(c.row.book_type=="inside"?(P=c.row.from_data)==null?void 0:P.organization_name:($=c.row.from_data)==null?void 0:$.name),1)):s("",!0),c.column.field=="document_number"?(t(),o("span",jt,g(c.row.document_number?c.row.document_number:c.row.book_pdf_at),1)):s("",!0),c.column.field=="to"?(t(),o("span",It,g((Y=c.row.to_data)==null?void 0:Y.full_name),1)):s("",!0),c.column.field=="status"?(t(),o("span",Ot,[e("div",Vt,g(c.row.status),1)])):s("",!0),c.column.field=="action"?(t(),o("span",Rt,[l(D,{classMenuItems:"right-full  w-[220px] top-[110%] "},{menus:u(()=>{var O,A,B,z;return[e("ul",Et,[e("li",null,[l(T,{to:c.row.doc_pickup_type=="หนังสือส่ง"?"signed/wait-to-send/"+c.row.id+"?type=signed":"signed/wait-to-receive/"+c.row.id+"?type=signed"},{default:u(()=>{var Q,ee;return[e("div",Ht,[l(b,{icon:"grommet-icons:document-text",class:"text-xl mr-2"}),R(" "+g((ee=(Q=p.permission)==null?void 0:Q.sub_menu)!=null&&ee.sign?"ดูรายละเอียด":"ดำเนินการส่งหนังสือ"),1)])]}),_:2},1032,["to"])]),(A=(O=p.permission)==null?void 0:O.sub_menu)!=null&&A.sign?s("",!0):(t(),o("li",Bt,[e("div",null,[e("div",{class:"p-2 flex items-center hover:bg-gray-50 cursor-pointer",onClick:Q=>p.handleImplement(c.row)},[l(b,{icon:"heroicons:information-circle-20-solid",class:"text-xl mr-2"}),R(" ดูคำสั่งการ/คำเสนอ ")],8,Yt)])])),(z=(B=p.permission)==null?void 0:B.sub_menu)!=null&&z.sign?s("",!0):(t(),o("li",At,[e("div",{class:"p-2 flex items-center hover:bg-gray-50 cursor-pointer text-red-500",onClick:Q=>p.handleCancelSigned(c.row)},[l(b,{icon:"material-symbols:delete",class:"text-xl mr-2"}),R(" ยกเลิกหนังสือ ")],8,zt)]))])]}),default:u(()=>[l(b,{icon:"pepicons-pencil:dots-x",class:"text-gray-400 text-4xl"})]),_:2},1024)])):s("",!0)]}),"pagination-bottom":u(c=>[e("div",Ft,[l(j,{total:p.paginate.total,current:p.paginate.current_page,"per-page":p.paginate.perpage,pageRange:p.paginate.pageRange,onPageChanged:n[0]||(n[0]=S=>p.changePage(S)),pageChanged:c.pageChanged,perPageChanged:c.perPageChanged,textAfterInput:"ไปที่หน้า",enableSearch:"",enableInput:""},null,8,["total","current","per-page","pageRange","pageChanged","perPageChanged"])])]),_:1},8,["columns","rows","pagination-options"])]),_:1})),p.isSuccess?(t(),I(k,{key:2,title:"ลงนามเอกสารอิเล็กทรอนิกส์",activeModal:p.isSuccess,"onEvent:closeModal":n[3]||(n[3]=c=>p.isSuccess=!1),label:"",labelClass:"btn-outline-dark",sizeClass:"w-full",centered:""},{default:u(()=>[e("div",qt,[e("div",Jt,[e("div",Kt,[l(b,{icon:"icon-park-solid:protect",class:"text-6xl text-green-500"})]),Qt])]),Xt,e("div",eo,[l(i,{text:"ไปหน้ารายการ",btnClass:"btn-primary  w-32 mx-2",onClick:n[1]||(n[1]=c=>a.$router.push("/app/issue/signed"))}),l(i,{text:"ปิด",btnClass:"btn-outline-dark w-32 mx-2",onClick:n[2]||(n[2]=c=>p.isSuccess=!1)})])]),_:1},8,["activeModal"])):s("",!0),p.modalImplement?(t(),I(k,{key:3,title:"",activeModal:p.modalImplement,"onEvent:closeModal":n[10]||(n[10]=c=>p.modalImplement=!1),label:"",labelClass:"btn-outline-dark",sizeClass:"w-full max-w-[700px]",centered:""},{default:u(()=>{var c,S,w,P;return[e("div",to,[e("div",oo,[so,e("div",no,[l(m,{label:"เพื่อทราบ",modelValue:a.itemModalSigned.order,"onUpdate:modelValue":n[4]||(n[4]=$=>a.itemModalSigned.order=$),value:"เพื่อทราบ",labelClass:"text-[16px]",disabled:""},null,8,["modelValue"]),l(m,{label:"ลงนาม",modelValue:a.itemModalSigned.order,"onUpdate:modelValue":n[5]||(n[5]=$=>a.itemModalSigned.order=$),value:"ลงนาม",labelClass:"text-[16px]",disabled:""},null,8,["modelValue"]),l(m,{label:"สั่งการ",modelValue:a.itemModalSigned.order_type,"onUpdate:modelValue":n[6]||(n[6]=$=>a.itemModalSigned.order_type=$),value:"สั่งการ",labelClass:"text-[16px]",disabled:""},null,8,["modelValue"])])]),e("div",lo,[ao,e("div",io,[l(x,{modelValue:a.itemModalSigned.order_detail,"onUpdate:modelValue":n[7]||(n[7]=$=>a.itemModalSigned.order_detail=$),classInput:"border border-gray-400 text_area_bg",rows:3,placeholder:"",disabled:""},null,8,["modelValue"])])]),e("div",ro,[co,e("div",_o,[l(M,{modelValue:(S=(c=a.itemModalSigned)==null?void 0:c.signed_by_data)==null?void 0:S.full_name,disabled:""},null,8,["modelValue"])])]),e("div",uo,[go,e("div",ho,[l(M,{modelValue:(P=(w=a.itemModalSigned)==null?void 0:w.signed_by_data)==null?void 0:P.position,disabled:""},null,8,["modelValue"])])])]),mo,e("div",xo,[l(i,{text:"ดำเนินการส่งหนังสือ",btnClass:"btn-primary w-32 mx-2",onClick:n[8]||(n[8]=$=>{var Y,O,A;return a.$router.push(((Y=a.itemModalSigned)==null?void 0:Y.doc_pickup_type)=="หนังสือส่ง"?"/app/issue/signed/wait-to-send/"+((O=p.itemModal)==null?void 0:O.id)+"?type=signed":"/app/issue/signed/wait-to-receive/"+((A=p.itemModal)==null?void 0:A.id)+"?type=signed")})}),l(i,{text:"ปิด",btnClass:"btn-outline-dark w-32 mx-2",onClick:n[9]||(n[9]=$=>p.modalImplement=!1)})])]}),_:1},8,["activeModal"])):s("",!0),l(f,{title:"",isOpen:p.isError,"onEvent:closeModal":n[11]||(n[11]=c=>p.isError=!1)},{default:u(()=>[e("div",po,g(p.errorMessage),1)]),_:1},8,["isOpen"])])}const fo=U(We,[["render",bo]]);const wo={props:{filter:{type:Object,default:()=>({})}},components:{apiFire:H,Tooltip:J,Pagination:q,Dropdown:W,Icon:N,Card:L},data(){return{urlSarabun:G,advancedTable:[],paginate:{total:50,current_page:1,perpage:10,pageRange:5},columns:[{label:"หนังสือ",field:"book",width:"3.36%",tdClass:"text_left",thClass:"text_left"},{label:"เลขที่หนังสือ",field:"document_number",width:"16.81%",tdClass:"text_left",thClass:"text_left"},{label:"เลขรับ/ส่ง",field:"initial_number_from",width:"12.61%"},{label:"เรื่อง",field:"subject",width:"33.61%",tdClass:"text_left",thClass:"text_left"},{label:"สถานะการติดตาม",field:"returned_reason",width:"33.61%",tdClass:"text_left",thClass:"text_left"}]}},created(){this.getData(1)},watch:{filter:{handler:function(a){this.getData(1)},deep:!0}},methods:{async getData(a){const n=await H("followStore","get",{payload:{page:a,...this.filter}});n.status===200&&(this.advancedTable=n.data.result.data,this.paginate.total=n.data.result.total_page*n.data.result.per_page,this.paginate.current_page=n.data.result.current_page,this.paginate.perpage=n.data.result.per_page)},async changePage(a){this.paginate.current_page=a,await this.getData(a)}}},vo={class:"custom__table"},yo=e("div",{class:"text-center"},[e("div",{class:"text-gray-400"},"ไม่พบข้อมูล")],-1),ko={key:0},$o={class:"w-[100%]"},Co=["onClick"],So={class:"text-gray-400 ell-1 mb-1"},Mo={key:0,class:"flex space-x-4"},Po=["href"],Do={class:"flex items-center bg-gray-100 border rounded-md px-2 w-[120px] h-[24px] cursor-pointer"},To={class:"ell-1"},jo={key:1},Io={key:2},Oo={key:0},Vo={key:1},Ro={key:2},Eo={key:3},Ho={class:"flex space-x-1"},Bo={class:"shrink w-[30px]"},Yo={key:0},Ao={key:1},zo={key:2},Fo={class:"space-y-1"},Zo={key:0},No=e("div",{class:"bg-yellow-500 text-center rounded text-white px-2 py-1"}," ด่วน ",-1),Uo=[No],Lo={key:1},Go=e("div",{class:"bg-orange-500 text-center rounded text-white px-2 py-1"}," ด่วนมาก ",-1),Wo=[Go],qo={key:2},Jo=e("div",{class:"bg-red-500 text-center rounded text-white px-2 py-1"}," ด่วนที่สุด ",-1),Ko=[Jo],Qo={key:3},Xo=e("div",{class:"bg-white border-2 border-blue-700 text-center rounded text-black px-2"}," ลับ ",-1),es=[Xo],ts={key:4},os=e("div",{class:"bg-white border-2 border-red-500 text-center rounded text-black px-2"}," ลับมาก ",-1),ss=[os],ns={key:5},ls=e("div",{class:"bg-white border-2 border-yellow-500 text-center rounded text-black px-2"}," ลับที่สุด ",-1),as=[ls],is={key:4},ds={key:5},rs={class:"py-4 px-3"};function cs(a,n,V,p,d,v){const b=_("Tooltip"),y=_("Icon"),T=_("Pagination"),D=_("vue-good-table"),j=_("Card");return t(),o("div",vo,[l(j,{noborder:"",bodyClass:"p-0"},{default:u(()=>[l(D,{columns:d.columns,styleClass:" vgt-table bordered lesspadding2",rows:d.advancedTable,"pagination-options":{enabled:!0,perPage:d.paginate.perpage},"sort-options":{enabled:!1},"select-options":{enabled:!1,selectOnCheckboxOnly:!0,selectioninfoClass:"custom-class",selectionText:"rows selected",clearSelectionText:"clear"}},{emptystate:u(()=>[yo]),"table-row":u(r=>{var C,h,i,k;return[r.column.field=="subject"?(t(),o("span",ko,[e("div",$o,[l(b,null,{base:u(()=>[e("div",{onClick:m=>r.row.doc_pickup_type=="หนังสือส่ง"?a.$router.push("follow/wait-to-send/"+r.row.id):a.$router.push("follow/wait-to-receive/"+r.row.id),class:"ell-1 hover:underline pointer cursor-pointer"},g(r.row.subject),9,Co)]),default:u(()=>[e("div",null,g(r.row.subject),1)]),_:2},1024),e("div",So,g(r.row.detail),1),(C=r.row)!=null&&C.document_attachments&&((h=r.row)==null?void 0:h.document_attachments.length)>0?(t(),o("div",Mo,[(t(!0),o(F,null,Z(r.row.document_attachments,m=>(t(),o("div",{key:m},[e("a",{href:d.urlSarabun+(m==null?void 0:m.file_path),target:"_blank",class:""},[e("div",Do,[l(y,{icon:"ant-design:file-pdf-filled",class:"text-red-500 pr-1"}),e("div",To,g(m==null?void 0:m.file_name),1)])],8,Po)]))),128))])):s("",!0)])])):s("",!0),r.column.field=="document_number"?(t(),o("span",jo,g(r.row.document_number?r.row.document_number:r.row.book_pdf_at),1)):s("",!0),r.column.field=="returned_reason"?(t(),o("span",Io,[r.row.status==="ปฏิบัติงานเสร็จ"?(t(),o("div",Oo,g("ปิดเรื่องแล้ว"))):s("",!0),r.row.status!=="ปฏิบัติงานเสร็จ"&&Date.parse(r.row.follow_up_date)>Date.parse(new Date)?(t(),o("div",Vo,g("อยู่ระหว่างดำเนินการ"))):s("",!0),r.row.status!=="ปฏิบัติงานเสร็จ"&&Date.parse(r.row.follow_up_date)<Date.parse(new Date)?(t(),o("div",Ro,g("เกินกำหนด"))):s("",!0)])):s("",!0),r.column.field=="book"?(t(),o("span",Eo,[e("div",Ho,[e("div",Bo,[r.row.document_type=="เอกสารทั่วไป (ส่งฉบับจริง)"?(t(),o("div",Yo,[l(y,{icon:"emojione-monotone:letter-p",class:"handle text-[25px] text-yellow-500"})])):s("",!0),r.row.document_type=="เอกสารอิเล็กทรอนิกส์"?(t(),o("div",Ao,[l(y,{icon:"emojione-monotone:letter-e",class:"handle text-[25px] text-blue-700"})])):s("",!0),r.row.document_type=="หนังสือรับจากอีเมล"?(t(),o("div",zo,[l(y,{icon:"mdi:email",class:"handle text-[25px] text-orange-500"})])):s("",!0)]),e("div",Fo,[r.row.urgency_level=="ด่วน"?(t(),o("div",Zo,Uo)):s("",!0),r.row.urgency_level=="ด่วนมาก"?(t(),o("div",Lo,Wo)):s("",!0),r.row.urgency_level=="ด่วนที่สุด"?(t(),o("div",qo,Ko)):s("",!0),r.row.secrecy_level=="ลับ"?(t(),o("div",Qo,es)):s("",!0),r.row.secrecy_level=="ลับมาก"?(t(),o("div",ts,ss)):s("",!0),r.row.secrecy_level=="ลับที่สุด"?(t(),o("div",ns,as)):s("",!0)])])])):s("",!0),r.column.field=="initial_number_from"?(t(),o("span",is,g(r.row.initial_number_from),1)):s("",!0),r.column.field=="from"?(t(),o("span",ds,g(r.row.book_type=="inside"?(i=r.row.from_data)==null?void 0:i.organization_name:(k=r.row.from_data)==null?void 0:k.name),1)):s("",!0)]}),"pagination-bottom":u(r=>[e("div",rs,[l(T,{total:d.paginate.total,current:d.paginate.current_page,"per-page":d.paginate.perpage,pageRange:d.paginate.pageRange,onPageChanged:n[0]||(n[0]=C=>v.changePage(C)),pageChanged:r.pageChanged,perPageChanged:r.perPageChanged,textAfterInput:"ไปที่หน้า",enableSearch:"",enableInput:""},null,8,["total","current","per-page","pageRange","pageChanged","perPageChanged"])])]),_:1},8,["columns","rows","pagination-options"])]),_:1})])}const _s=U(wo,[["render",cs]]);const us={props:{filter:{type:Object,default:()=>{}}},components:{Pagination:q,Dropdown:W,Icon:N,Card:L,ModalError:le,Tooltip:J},data(){return{urlSarabun:G,isError:!1,errorMessage:"",advancedTable:[],paginate:{total:50,current_page:1,perpage:10,pageRange:5},columns:[{label:"หนังสือ",field:"book",width:"2.88%",tdClass:"text_left",thClass:"text_left"},{label:"เลขที่หนังสือ",field:"document_number",width:"14.39%",tdClass:"text_left",thClass:"text_left"},{label:"เลขรับ/ส่ง",field:"initial_number_from",width:"10.79%"},{label:"เรื่อง",field:"subject",width:"28.78%",tdClass:"text_left",thClass:"text_left"},{label:"สาเหตุการดึงกลับ",field:"returned_reason",width:"28.78%",tdClass:"text_left",thClass:"text_left"},{label:"จัดการ",field:"action",width:"14.39%",tdClass:"text_center",thClass:"text_center"}]}},created(){this.getData(1)},watch:{filter:{handler:function(a){this.getData(1)},deep:!0}},methods:{async getData(a){const n=await H("pullbackStore","get",{payload:{page:a,...this.filter}});n.status===200&&(this.advancedTable=n.data.result.data,this.paginate.total=n.data.result.total_page*n.data.result.per_page,this.paginate.current_page=n.data.result.current_page,this.paginate.perpage=n.data.result.per_page)},async changePage(a){this.paginate.current_page=a,await this.getData(a)}}},gs={class:"custom__table"},hs=e("div",{class:"text-center"},[e("div",{class:"text-gray-400"},"ไม่พบข้อมูล")],-1),ms={key:0},xs={key:1},ps={class:"flex space-x-1"},bs={class:"shrink w-[30px]"},fs={key:0},ws={key:1},vs={key:2},ys={class:"space-y-1"},ks={key:0},$s=e("div",{class:"bg-yellow-500 text-center rounded text-white px-2 py-1"}," ด่วน ",-1),Cs=[$s],Ss={key:1},Ms=e("div",{class:"bg-orange-500 text-center rounded text-white px-2 py-1"}," ด่วนมาก ",-1),Ps=[Ms],Ds={key:2},Ts=e("div",{class:"bg-red-500 text-center rounded text-white px-2 py-1"}," ด่วนที่สุด ",-1),js=[Ts],Is={key:3},Os=e("div",{class:"bg-white border-2 border-blue-700 text-center rounded text-black px-2"}," ลับ ",-1),Vs=[Os],Rs={key:4},Es=e("div",{class:"bg-white border-2 border-red-500 text-center rounded text-black px-2"}," ลับมาก ",-1),Hs=[Es],Bs={key:5},Ys=e("div",{class:"bg-white border-2 border-yellow-500 text-center rounded text-black px-2"}," ลับที่สุด ",-1),As=[Ys],zs={key:2},Fs={class:"w-[450px]"},Zs={class:"ell-1"},Ns={class:"text-gray-400 ell-1 mb-1"},Us={key:0,class:"flex space-x-4"},Ls=["href"],Gs={class:"flex items-center bg-gray-100 border rounded-md px-2 w-[120px] h-[24px] cursor-pointer"},Ws={class:"ell-1"},qs={key:3},Js={key:4},Ks={class:"w-full"},Qs={class:"p-2 flex items-center hover:bg-gray-50 cursor-pointer"},Xs={class:"p-2 flex items-center hover:bg-gray-50 cursor-pointer"},en={class:"py-4 px-3"},tn={class:"text-lg text-slate-900"};function on(a,n,V,p,d,v){const b=_("Icon"),y=_("Tooltip"),T=_("router-link"),D=_("Dropdown"),j=_("Pagination"),r=_("vue-good-table"),C=_("Card"),h=_("ModalError");return t(),o("div",gs,[l(C,{noborder:"",bodyClass:"p-0"},{default:u(()=>[l(r,{columns:d.columns,styleClass:" vgt-table bordered lesspadding2",rows:d.advancedTable,"pagination-options":{enabled:!0,perPage:d.paginate.perpage},"sort-options":{enabled:!1},"select-options":{enabled:!1,selectOnCheckboxOnly:!0,selectioninfoClass:"custom-class",selectionText:"rows selected",clearSelectionText:"clear"}},{emptystate:u(()=>[hs]),"table-row":u(i=>{var k,m,x;return[i.column.field=="document_number"?(t(),o("span",ms,g(i.row.document_number?i.row.document_number:i.row.book_pdf_at),1)):s("",!0),i.column.field=="book"?(t(),o("span",xs,[e("div",ps,[e("div",bs,[i.row.document_type=="เอกสารทั่วไป (ส่งฉบับจริง)"?(t(),o("div",fs,[l(b,{icon:"emojione-monotone:letter-p",class:"handle text-[25px] text-yellow-500"})])):s("",!0),i.row.document_type=="เอกสารอิเล็กทรอนิกส์"?(t(),o("div",ws,[l(b,{icon:"emojione-monotone:letter-e",class:"handle text-[25px] text-blue-700"})])):s("",!0),i.row.document_type=="หนังสือรับจากอีเมล"?(t(),o("div",vs,[l(b,{icon:"mdi:email",class:"handle text-[25px] text-orange-500"})])):s("",!0)]),e("div",ys,[i.row.urgency_level=="ด่วน"?(t(),o("div",ks,Cs)):s("",!0),i.row.urgency_level=="ด่วนมาก"?(t(),o("div",Ss,Ps)):s("",!0),i.row.urgency_level=="ด่วนที่สุด"?(t(),o("div",Ds,js)):s("",!0),i.row.secrecy_level=="ลับ"?(t(),o("div",Is,Vs)):s("",!0),i.row.secrecy_level=="ลับมาก"?(t(),o("div",Rs,Hs)):s("",!0),i.row.secrecy_level=="ลับที่สุด"?(t(),o("div",Bs,As)):s("",!0)])])])):s("",!0),i.column.field=="subject"?(t(),o("span",zs,[e("div",Fs,[l(y,null,{base:u(()=>[e("div",Zs,g(i.row.subject),1)]),default:u(()=>[e("div",null,g(i.row.subject),1)]),_:2},1024),e("div",Ns,g(i.row.detail),1),(k=i.row)!=null&&k.document_attachments&&((m=i.row)==null?void 0:m.document_attachments.length)>0?(t(),o("div",Us,[(t(!0),o(F,null,Z(i.row.document_attachments,M=>(t(),o("div",{key:M},[e("a",{href:d.urlSarabun+(M==null?void 0:M.file_path),target:"_blank",class:""},[e("div",Gs,[l(b,{icon:"ant-design:file-pdf-filled",class:"text-red-500 pr-1"}),e("div",Ws,g(M==null?void 0:M.file_name),1)])],8,Ls)]))),128))])):s("",!0)])])):s("",!0),i.column.field=="reason"?(t(),o("span",qs,g((x=i.row)==null?void 0:x.reason),1)):s("",!0),i.column.field=="action"?(t(),o("span",Js,[l(D,{classMenuItems:"right-full  w-[220px] top-[110%] "},{menus:u(()=>[e("ul",Ks,[e("li",null,[l(T,{to:i.row.doc_pickup_type=="หนังสือส่ง"?"pull-back/wait-to-send/"+i.row.id:"pull-back/wait-to-receive/"+i.row.id},{default:u(()=>[e("div",Qs,[l(b,{icon:"bx:edit",class:"text-xl mr-2"}),R(" แก้ไข ")])]),_:2},1032,["to"])]),e("li",null,[l(T,{to:"/app/issue/pull-back/"+i.row.id},{default:u(()=>[e("div",Xs,[l(b,{icon:"grommet-icons:document-text",class:"text-xl mr-2"}),R(" ดูรายละเอียด ")])]),_:2},1032,["to"])])])]),default:u(()=>[l(b,{icon:"pepicons-pencil:dots-x",class:"text-gray-400 text-4xl"})]),_:2},1024)])):s("",!0)]}),"pagination-bottom":u(i=>[e("div",en,[l(j,{total:d.paginate.total,current:d.paginate.current_page,"per-page":d.paginate.perpage,pageRange:d.paginate.pageRange,onPageChanged:n[0]||(n[0]=k=>v.changePage(k)),pageChanged:i.pageChanged,perPageChanged:i.perPageChanged,textAfterInput:"ไปที่หน้า",enableSearch:"",enableInput:""},null,8,["total","current","per-page","pageRange","pageChanged","perPageChanged"])])]),_:1},8,["columns","rows","pagination-options"])]),_:1}),l(h,{title:"",isOpen:d.isError,"onEvent:closeModal":n[1]||(n[1]=i=>d.isError=!1)},{default:u(()=>[e("div",tn,g(d.errorMessage),1)]),_:1},8,["isOpen"])])}const sn=U(us,[["render",on]]);const nn={props:{filter:{type:Object,default:()=>({})}},components:{Button:te,Modal:ce,Pagination:q,Dropdown:W,Icon:N,Card:L,Textarea:se,Tooltip:J,TextValid:ne},data(){return{urlSarabun:G,isShowSuggestion:!1,returnSuggestion:"",paginate:{total:50,current_page:1,perpage:10,pageRange:5},row:[],columns:[{label:"หนังสือ",field:"book",width:"2.88%",tdClass:"text_left",thClass:"text_left"},{label:"เลขที่หนังสือ",field:"document_number",width:"14.39%",tdClass:"text_left",thClass:"text_left"},{label:"เลขรับ/ส่ง",field:"initial_number_from",width:"10.79%"},{label:"เรื่อง",field:"subject",width:"28.78%",tdClass:"text_left",thClass:"text_left"},{label:"วัน/เวลานำเข้า",field:"created_at",width:"14.39%",tdClass:"text_left",thClass:"text_left"},{label:"สาเหตุการคืนเรื่อง",field:"returned_reason",width:"28.78%",tdClass:"text_left",thClass:"text_left"}]}},watch:{filter:{handler:function(a){this.getData(1)},deep:!0}},created(){this.getData(1)},methods:{convertDateTime(a){return a?X(a).locale("th").add(543,"year").format("DD MMM YYYY HH:mm"):"-"},async getData(a){console.log("getdata");const n=await H("sendBackStore","getHistory",{payload:{page:a,...this.filter}});n.status===200&&(console.log("res naja",n),this.row=n.data.result.data,this.paginate.total=n.data.result.total_page*n.data.result.per_page,this.paginate.current_page=n.data.result.current_page,this.paginate.perpage=n.data.result.per_page,this.returnSuggestion=n.data.result.data.suggestion_reason)},async changePage(a){this.paginate.current_page=a,await this.getData(a)},openModalSuggestion(){this.isShowSuggestion=!0},closeModal(){this.isShowSuggestion=!1,this.returnSuggestion=""}}},ln={class:"custom__table"},an=e("div",{class:"text-center"},[e("div",{class:"text-gray-400"},"ไม่พบข้อมูล")],-1),dn={key:0},rn={key:1},cn={class:"w-[100%]"},_n=["onClick"],un={class:"text-gray-400 ell-1 mb-1"},gn={key:0,class:"flex space-x-4"},hn=["href"],mn={class:"flex items-center bg-gray-100 border rounded-md px-2 w-[120px] h-[24px] cursor-pointer"},xn={class:"ell-1"},pn={key:2},bn={class:"flex space-x-1"},fn={class:"shrink w-[30px]"},wn={key:0},vn={key:1},yn={key:2},kn={class:"space-y-1"},$n={key:0},Cn=e("div",{class:"bg-yellow-500 text-center rounded text-white px-2 py-1"}," ด่วน ",-1),Sn=[Cn],Mn={key:1},Pn=e("div",{class:"bg-orange-500 text-center rounded text-white px-2 py-1"}," ด่วนมาก ",-1),Dn=[Pn],Tn={key:2},jn=e("div",{class:"bg-red-500 text-center rounded text-white px-2 py-1"}," ด่วนที่สุด ",-1),In=[jn],On={key:3},Vn=e("div",{class:"bg-white border-2 border-blue-700 text-center rounded text-black px-2"}," ลับ ",-1),Rn=[Vn],En={key:4},Hn=e("div",{class:"bg-white border-2 border-red-500 text-center rounded text-black px-2"}," ลับมาก ",-1),Bn=[Hn],Yn={key:5},An=e("div",{class:"bg-white border-2 border-yellow-500 text-center rounded text-black px-2"}," ลับที่สุด ",-1),zn=[An],Fn={key:3},Zn={key:4},Nn={key:0},Un={key:5},Ln={class:"py-4 px-3"};function Gn(a,n,V,p,d,v){const b=_("Tooltip"),y=_("Icon"),T=_("Pagination"),D=_("vue-good-table"),j=_("Card");return t(),o("div",ln,[l(j,{noborder:"",bodyClass:"p-0"},{default:u(()=>[l(D,{columns:d.columns,styleClass:" vgt-table bordered lesspadding2",rows:d.row,"pagination-options":{enabled:!0,perPage:d.paginate.perpage},"sort-options":{enabled:!1},"select-options":{enabled:!1,selectOnCheckboxOnly:!0,selectioninfoClass:"custom-class",selectionText:"rows selected",clearSelectionText:"clear"}},{emptystate:u(()=>[an]),"table-row":u(r=>{var C,h,i,k;return[r.column.field=="created_at"?(t(),o("span",dn,g(r.row.created_at?v.convertDateTime(r.row.created_at)+" น.":"-"),1)):s("",!0),r.column.field=="subject"?(t(),o("span",rn,[e("div",cn,[l(b,null,{base:u(()=>[e("div",{onClick:m=>r.row.doc_pickup_type=="หนังสือส่ง"?a.$router.push("history-return/wait-to-send/"+r.row.id):a.$router.push("history-return/wait-to-receive/"+r.row.id),class:"ell-1 hover:underline pointer cursor-pointer"},g(r.row.subject),9,_n)]),default:u(()=>[e("div",null,g(r.row.subject),1)]),_:2},1024),e("div",un,g(r.row.detail),1),(C=r.row)!=null&&C.document_attachments&&((h=r.row)==null?void 0:h.document_attachments.length)>0?(t(),o("div",gn,[(t(!0),o(F,null,Z((i=r.row)==null?void 0:i.document_attachments,m=>(t(),o("div",{key:m},[e("a",{href:d.urlSarabun+(m==null?void 0:m.file_path),target:"_blank",class:""},[e("div",mn,[l(y,{icon:"ant-design:file-pdf-filled",class:"text-red-500 pr-1"}),e("div",xn,g(m==null?void 0:m.file_name),1)])],8,hn)]))),128))])):s("",!0)])])):s("",!0),r.column.field=="book"?(t(),o("span",pn,[e("div",bn,[e("div",fn,[((k=r.row)==null?void 0:k.document_type)=="เอกสารทั่วไป (ส่งฉบับจริง)"?(t(),o("div",wn,[l(y,{icon:"emojione-monotone:letter-p",class:"handle text-[25px] text-yellow-500"})])):s("",!0),r.row.document_type=="เอกสารอิเล็กทรอนิกส์"?(t(),o("div",vn,[l(y,{icon:"emojione-monotone:letter-e",class:"handle text-[25px] text-blue-700"})])):s("",!0),r.row.document_type=="หนังสือรับจากอีเมล"?(t(),o("div",yn,[l(y,{icon:"mdi:email",class:"handle text-[25px] text-orange-500"})])):s("",!0)]),e("div",kn,[r.row.urgency_level=="ด่วน"?(t(),o("div",$n,Sn)):s("",!0),r.row.urgency_level=="ด่วนมาก"?(t(),o("div",Mn,Dn)):s("",!0),r.row.urgency_level=="ด่วนที่สุด"?(t(),o("div",Tn,In)):s("",!0),r.row.secrecy_level=="ลับ"?(t(),o("div",On,Rn)):s("",!0),r.row.secrecy_level=="ลับมาก"?(t(),o("div",En,Bn)):s("",!0),r.row.secrecy_level=="ลับที่สุด"?(t(),o("div",Yn,zn)):s("",!0)])])])):s("",!0),r.column.field=="document_number"?(t(),o("span",Fn,g(r.row.document_number?r.row.document_number:r.row.book_pdf_at),1)):s("",!0),r.column.field=="initial_number_from"?(t(),o("span",Zn,[r.row.initial_number_from?(t(),o("div",Nn,g(r.row.initial_number_from),1)):s("",!0)])):s("",!0),r.column.field=="reason"?(t(),o("span",Un,g(r.row.pullback_reason),1)):s("",!0)]}),"pagination-bottom":u(r=>[e("div",Ln,[l(T,{total:d.paginate.total,current:d.paginate.current_page,"per-page":d.paginate.perpage,pageRange:d.paginate.pageRange,onPageChanged:n[0]||(n[0]=C=>v.changePage(C)),pageChanged:r.pageChanged,perPageChanged:r.perPageChanged,textAfterInput:"ไปที่หน้า",enableSearch:"",enableInput:""},null,8,["total","current","per-page","pageRange","pageChanged","perPageChanged"])])]),_:1},8,["columns","rows","pagination-options"])]),_:1})])}const Wn=U(nn,[["render",Gn]]);const qn={props:{filter:{type:Object,default:()=>({})}},components:{Button:te,Modal:ce,Pagination:q,Dropdown:W,Icon:N,Card:L,Textarea:se,Tooltip:J,TextValid:ne},data(){return{urlSarabun:G,isShowSuggestion:!1,returnSuggestion:"",paginate:{total:50,current_page:1,perpage:10,pageRange:5},row:[],columns:[{label:"หนังสือ",field:"book",width:"2.88%",tdClass:"text_left",thClass:"text_left"},{label:"เลขที่หนังสือ",field:"document_number",width:"14.39%",tdClass:"text_left",thClass:"text_left"},{label:"เลขรับ/ส่ง",field:"initial_number_from",width:"10.79%"},{label:"เรื่อง",field:"subject",width:"28.78%",tdClass:"text_left",thClass:"text_left"},{label:"จาก",field:"from",width:"28.78%",tdClass:"text_left",thClass:"text_left"},{label:"วัน/เวลานำเข้า",field:"created_at",width:"14.39%",tdClass:"text_left",thClass:"text_left"}]}},watch:{filter:{handler:function(a){this.getData(1)},deep:!0}},created(){this.getData(1)},watch:{filter:{handler:function(a){this.getData(1)},deep:!0}},methods:{convertDateTime(a){return a?X(a).locale("th").add(543,"year").format("DD MMM YYYY HH:mm"):"-"},async getData(a){console.log("getdata");const n=await H("examineStore","getHistory",{payload:{page:a,...this.filter}});n.status===200&&(console.log("res naja",n),this.row=n.data.result.data,this.paginate.total=n.data.result.total_page*n.data.result.per_page,this.paginate.current_page=n.data.result.current_page,this.paginate.perpage=n.data.result.per_page,this.returnSuggestion=n.data.result.data.suggestion_reason)},async changePage(a){this.paginate.current_page=a,await this.getData(a)},openModalSuggestion(){this.isShowSuggestion=!0},closeModal(){this.isShowSuggestion=!1,this.returnSuggestion=""}}},Jn={class:"custom__table"},Kn=e("div",{class:"text-center"},[e("div",{class:"text-gray-400"},"ไม่พบข้อมูล")],-1),Qn={key:0},Xn={key:1},el={class:"w-[100%]"},tl=["onClick"],ol={class:"text-gray-400 ell-1 mb-1"},sl={key:0,class:"flex space-x-4"},nl=["href"],ll={class:"flex items-center bg-gray-100 border rounded-md px-2 w-[120px] h-[24px] cursor-pointer"},al={class:"ell-1"},il={key:2},dl={class:"flex space-x-1"},rl={class:"shrink w-[30px]"},cl={key:0},_l={key:1},ul={key:2},gl={class:"space-y-1"},hl={key:0},ml=e("div",{class:"bg-yellow-500 text-center rounded text-white px-2 py-1"}," ด่วน ",-1),xl=[ml],pl={key:1},bl=e("div",{class:"bg-orange-500 text-center rounded text-white px-2 py-1"}," ด่วนมาก ",-1),fl=[bl],wl={key:2},vl=e("div",{class:"bg-red-500 text-center rounded text-white px-2 py-1"}," ด่วนที่สุด ",-1),yl=[vl],kl={key:3},$l=e("div",{class:"bg-white border-2 border-blue-700 text-center rounded text-black px-2"}," ลับ ",-1),Cl=[$l],Sl={key:4},Ml=e("div",{class:"bg-white border-2 border-red-500 text-center rounded text-black px-2"}," ลับมาก ",-1),Pl=[Ml],Dl={key:5},Tl=e("div",{class:"bg-white border-2 border-yellow-500 text-center rounded text-black px-2"}," ลับที่สุด ",-1),jl=[Tl],Il={key:3},Ol={key:4},Vl={key:0},Rl={key:5},El={class:"py-4 px-3"},Hl={class:"list space-y-1"},Bl=e("div",{class:"text-sm font-medium text-slate-500 dark:text-slate-200"}," เหตุผลในการคืนเรื่อง ",-1),Yl={class:"text-slate-600 dark:text-slate-400 mb-1"},Al={class:"text-center mt-4 flex justify-center w-full"};function zl(a,n,V,p,d,v){const b=_("Tooltip"),y=_("Icon"),T=_("Pagination"),D=_("vue-good-table"),j=_("Card"),r=_("Textarea"),C=_("Button"),h=_("Modal");return t(),o("div",Jn,[l(j,{noborder:"",bodyClass:"p-0"},{default:u(()=>[l(D,{columns:d.columns,styleClass:" vgt-table bordered lesspadding2",rows:d.row,"pagination-options":{enabled:!0,perPage:d.paginate.perpage},"sort-options":{enabled:!1},"select-options":{enabled:!1,selectOnCheckboxOnly:!0,selectioninfoClass:"custom-class",selectionText:"rows selected",clearSelectionText:"clear"}},{emptystate:u(()=>[Kn]),"table-row":u(i=>{var k,m,x,M,f,c,S,w;return[i.column.field=="created_at"?(t(),o("span",Qn,g(i.row.created_at?v.convertDateTime(i.row.created_at)+" น.":"-"),1)):s("",!0),i.column.field=="subject"?(t(),o("span",Xn,[e("div",el,[l(b,null,{base:u(()=>[e("div",{onClick:P=>i.row.doc_pickup_type=="หนังสือส่ง"?a.$router.push("history-examine/wait-to-send/"+i.row.id):a.$router.push("history-examine/wait-to-receive/"+i.row.id),class:"ell-1 hover:underline pointer cursor-pointer"},g(i.row.subject),9,tl)]),default:u(()=>[e("div",null,g(i.row.subject),1)]),_:2},1024),e("div",ol,g(i.row.detail),1),(k=i.row)!=null&&k.document_attachments&&((m=i.row)==null?void 0:m.document_attachments.length)>0?(t(),o("div",sl,[(t(!0),o(F,null,Z((x=i.row)==null?void 0:x.document_attachments,P=>(t(),o("div",{key:P},[e("a",{href:d.urlSarabun+(P==null?void 0:P.file_path),target:"_blank",class:""},[e("div",ll,[l(y,{icon:"ant-design:file-pdf-filled",class:"text-red-500 pr-1"}),e("div",al,g(P==null?void 0:P.file_name),1)])],8,nl)]))),128))])):s("",!0)])])):s("",!0),i.column.field=="book"?(t(),o("span",il,[e("div",dl,[e("div",rl,[((M=i.row)==null?void 0:M.document_type)=="เอกสารทั่วไป (ส่งฉบับจริง)"?(t(),o("div",cl,[l(y,{icon:"emojione-monotone:letter-p",class:"handle text-[25px] text-yellow-500"})])):s("",!0),i.row.document_type=="เอกสารอิเล็กทรอนิกส์"?(t(),o("div",_l,[l(y,{icon:"emojione-monotone:letter-e",class:"handle text-[25px] text-blue-700"})])):s("",!0),i.row.document_type=="หนังสือรับจากอีเมล"?(t(),o("div",ul,[l(y,{icon:"mdi:email",class:"handle text-[25px] text-orange-500"})])):s("",!0)]),e("div",gl,[i.row.urgency_level=="ด่วน"?(t(),o("div",hl,xl)):s("",!0),i.row.urgency_level=="ด่วนมาก"?(t(),o("div",pl,fl)):s("",!0),i.row.urgency_level=="ด่วนที่สุด"?(t(),o("div",wl,yl)):s("",!0),i.row.secrecy_level=="ลับ"?(t(),o("div",kl,Cl)):s("",!0),i.row.secrecy_level=="ลับมาก"?(t(),o("div",Sl,Pl)):s("",!0),i.row.secrecy_level=="ลับที่สุด"?(t(),o("div",Dl,jl)):s("",!0)])])])):s("",!0),i.column.field=="document_number"?(t(),o("span",Il,g(i.row.document_number?i.row.document_number:i.row.book_pdf_at),1)):s("",!0),i.column.field=="initial_number_from"?(t(),o("span",Ol,[i.row.initial_number_from?(t(),o("div",Vl,g(i.row.initial_number_from),1)):s("",!0)])):s("",!0),i.column.field=="from"?(t(),o("span",Rl,g(i.row.book_type=="inside"?(c=(f=i.row)==null?void 0:f.from_data)==null?void 0:c.organization_name:(w=(S=i.row)==null?void 0:S.from_data)==null?void 0:w.name),1)):s("",!0)]}),"pagination-bottom":u(i=>[e("div",El,[l(T,{total:d.paginate.total,current:d.paginate.current_page,"per-page":d.paginate.perpage,pageRange:d.paginate.pageRange,onPageChanged:n[0]||(n[0]=k=>v.changePage(k)),pageChanged:i.pageChanged,perPageChanged:i.perPageChanged,textAfterInput:"ไปที่หน้า",enableSearch:"",enableInput:""},null,8,["total","current","per-page","pageRange","pageChanged","perPageChanged"])])]),_:1},8,["columns","rows","pagination-options"])]),_:1}),d.isShowSuggestion?(t(),I(h,{key:0,title:"เสนอแนะ",activeModal:d.isShowSuggestion,"onEvent:closeModal":n[3]||(n[3]=i=>d.isShowSuggestion=!1),label:"",labelClass:"btn-outline-dark",sizeClass:"w-full max-w-[700px]",centered:""},{footer:u(()=>[e("div",Al,[l(C,{text:"ยกเลิก",btnClass:"btn-outline-dark w-32 mx-2",onOnClick:n[2]||(n[2]=i=>v.closeModal())})])]),default:u(()=>[e("div",Hl,[Bl,e("div",Yl,[l(r,{isReadonly:"",placeholder:"",name:"detail",rows:4,modelValue:d.returnSuggestion,"onUpdate:modelValue":n[1]||(n[1]=i=>d.returnSuggestion=i)},null,8,["modelValue"])])])]),_:1},8,["activeModal"])):s("",!0)])}const Fl=U(qn,[["render",zl]]);const Zl={props:{filter:{type:Object,default:()=>({})}},components:{Pagination:q,Dropdown:W,Icon:N,Card:L,ModalError:le,Tooltip:J},data(){return{urlSarabun:G,isError:!1,errorMessage:"",advancedTable:[],paginate:{total:1,current_page:1,perpage:10,pageRange:5},columns:[{label:"หนังสือ",field:"book",width:"2.88%",tdClass:"text_left",thClass:"text_left"},{label:"เลขที่หนังสือ",field:"document_number",width:"14.39%",tdClass:"text_left",thClass:"text_left"},{label:"เลขรับ/ส่ง",field:"initial_number_from",width:"10.79%"},{label:"เรื่อง",field:"subject",width:"28.78%",tdClass:"text_left",thClass:"text_left"},{label:"สาเหตุตีกลับแก้ไข",field:"returned_reason",width:"28.78%",tdClass:"text_left",thClass:"text_left"},{label:"จัดการ",field:"action",width:"14.39%",tdClass:"text_center",thClass:"text_center"}]}},watch:{filter:{handler:function(a){this.getData(1)},deep:!0}},created(){this.getData(1)},methods:{async getData(a){const n=await H("sendBackStore","get",{payload:{page:a,...this.filter}});n.status===200&&(this.advancedTable=n.data.result.data,this.paginate.total=n.data.result.total_page*n.data.result.per_page,this.paginate.current_page=n.data.result.current_page,this.paginate.perpage=n.data.result.per_page)},async changePage(a){this.paginate.current_page=a,await this.getData(a)}}},Nl={class:"custom__table"},Ul=e("div",{class:"text-center"},[e("div",{class:"text-gray-400"},"ไม่พบข้อมูล")],-1),Ll={key:0},Gl={class:"flex space-x-1"},Wl={class:"shrink w-[30px]"},ql={key:0},Jl={key:1},Kl={key:2},Ql={class:"space-y-1"},Xl={key:0},ea=e("div",{class:"bg-yellow-500 text-center rounded text-white px-2 py-1"}," ด่วน ",-1),ta=[ea],oa={key:1},sa=e("div",{class:"bg-orange-500 text-center rounded text-white px-2 py-1"}," ด่วนมาก ",-1),na=[sa],la={key:2},aa=e("div",{class:"bg-red-500 text-center rounded text-white px-2 py-1"}," ด่วนที่สุด ",-1),ia=[aa],da={key:3},ra=e("div",{class:"bg-white border-2 border-blue-700 text-center rounded text-black px-2"}," ลับ ",-1),ca=[ra],_a={key:4},ua=e("div",{class:"bg-white border-2 border-red-500 text-center rounded text-black px-2"}," ลับมาก ",-1),ga=[ua],ha={key:5},ma=e("div",{class:"bg-white border-2 border-yellow-500 text-center rounded text-black px-2"}," ลับที่สุด ",-1),xa=[ma],pa={key:1},ba={class:"w-[100%]"},fa={class:"ell-1"},wa={class:"text-gray-400 ell-1 mb-1"},va={key:0,class:"flex space-x-4"},ya=["href"],ka={class:"flex items-center bg-gray-100 border rounded-md px-2 w-[120px] h-[24px] cursor-pointer"},$a={class:"ell-1"},Ca={key:2},Sa={class:"w-full"},Ma={class:"p-2 flex items-center hover:bg-gray-50 cursor-pointer"},Pa={class:"py-4 px-3"},Da={class:"text-lg text-slate-900"};function Ta(a,n,V,p,d,v){const b=_("Icon"),y=_("Tooltip"),T=_("router-link"),D=_("Dropdown"),j=_("Pagination"),r=_("vue-good-table"),C=_("Card"),h=_("ModalError");return t(),o("div",Nl,[l(C,{noborder:"",bodyClass:"p-0"},{default:u(()=>[l(r,{columns:d.columns,styleClass:" vgt-table bordered lesspadding2",rows:d.advancedTable,"pagination-options":{enabled:!0,perPage:d.paginate.perpage},"sort-options":{enabled:!1},"select-options":{enabled:!1,selectOnCheckboxOnly:!0,selectioninfoClass:"custom-class",selectionText:"rows selected",clearSelectionText:"clear"}},{emptystate:u(()=>[Ul]),"table-row":u(i=>{var k,m;return[i.column.field=="book"?(t(),o("span",Ll,[e("div",Gl,[e("div",Wl,[i.row.document_type=="เอกสารทั่วไป (ส่งฉบับจริง)"?(t(),o("div",ql,[l(b,{icon:"emojione-monotone:letter-p",class:"handle text-[25px] text-yellow-500"})])):s("",!0),i.row.document_type=="เอกสารอิเล็กทรอนิกส์"?(t(),o("div",Jl,[l(b,{icon:"emojione-monotone:letter-e",class:"handle text-[25px] text-blue-700"})])):s("",!0),i.row.document_type=="หนังสือรับจากอีเมล"?(t(),o("div",Kl,[l(b,{icon:"mdi:email",class:"handle text-[25px] text-orange-500"})])):s("",!0)]),e("div",Ql,[i.row.urgency_level=="ด่วน"?(t(),o("div",Xl,ta)):s("",!0),i.row.urgency_level=="ด่วนมาก"?(t(),o("div",oa,na)):s("",!0),i.row.urgency_level=="ด่วนที่สุด"?(t(),o("div",la,ia)):s("",!0),i.row.secrecy_level=="ลับ"?(t(),o("div",da,ca)):s("",!0),i.row.secrecy_level=="ลับมาก"?(t(),o("div",_a,ga)):s("",!0),i.row.secrecy_level=="ลับที่สุด"?(t(),o("div",ha,xa)):s("",!0)])])])):s("",!0),i.column.field=="subject"?(t(),o("span",pa,[e("div",ba,[l(y,null,{base:u(()=>[e("div",fa,g(i.row.subject),1)]),default:u(()=>[e("div",null,g(i.row.subject),1)]),_:2},1024),e("div",wa,g(i.row.detail),1),(k=i.row)!=null&&k.document_attachments&&((m=i.row)==null?void 0:m.document_attachments.length)>0?(t(),o("div",va,[(t(!0),o(F,null,Z(i.row.document_attachments,x=>(t(),o("div",{key:x},[e("a",{href:d.urlSarabun+(x==null?void 0:x.file_path),target:"_blank",class:""},[e("div",ka,[l(b,{icon:"ant-design:file-pdf-filled",class:"text-red-500 pr-1"}),e("div",$a,g(x==null?void 0:x.file_name),1)])],8,ya)]))),128))])):s("",!0)])])):s("",!0),i.column.field=="action"?(t(),o("span",Ca,[l(D,{classMenuItems:"right-full  w-[220px] top-[110%] "},{menus:u(()=>{var x;return[e("ul",Sa,[e("li",null,[l(T,{to:((x=i.row)==null?void 0:x.doc_pickup_type)=="หนังสือส่ง"?"/app/issue/sent-back/send/"+i.row.id:"/app/issue/sent-back/receive/"+i.row.id},{default:u(()=>[e("div",Ma,[l(b,{icon:"bx:edit",class:"text-xl mr-2"}),R(" รายละเอียด ")])]),_:2},1032,["to"])])])]}),default:u(()=>[l(b,{icon:"pepicons-pencil:dots-x",class:"text-gray-400 text-4xl"})]),_:2},1024)])):s("",!0)]}),"pagination-bottom":u(i=>[e("div",Pa,[l(j,{total:d.paginate.total,current:d.paginate.current_page,"per-page":d.paginate.perpage,pageRange:d.paginate.pageRange,onPageChanged:n[0]||(n[0]=k=>v.changePage(k)),pageChanged:i.pageChanged,perPageChanged:i.perPageChanged,textAfterInput:"ไปที่หน้า",enableSearch:"",enableInput:""},null,8,["total","current","per-page","pageRange","pageChanged","perPageChanged"])])]),_:1},8,["columns","rows","pagination-options"])]),_:1}),l(h,{title:"",isOpen:d.isError,"onEvent:closeModal":n[1]||(n[1]=i=>d.isError=!1)},{default:u(()=>[e("div",Da,g(d.errorMessage),1)]),_:1},8,["isOpen"])])}const ja=U(Zl,[["render",Ta]]);const Ia={props:{filter:{type:Object,default:()=>({})}},components:{Tooltip:J,Pagination:q,Dropdown:W,Icon:N,Card:L},data(){return{urlSarabun:G,advancedTable:[],paginate:{total:50,current_page:1,perpage:10,pageRange:5},columns:[{label:"หนังสือ",field:"book",width:"11.66%",tdClass:"text_left",thClass:"text_left"},{label:"เลขที่หนังสือ",field:"document_number",width:"14.39%",tdClass:"text_left",thClass:"text_left"},{label:"เลขรับ/ส่ง",field:"initial_number_from",width:"10.79%"},{label:"เรื่อง",field:"subject",width:"28.78%",tdClass:"text_left",thClass:"text_left"},{label:"ถึง",field:"to",width:"20%",tdClass:"text_left",thClass:"text_left"},{label:"สถานะ",field:"status",width:"14.39%",tdClass:"text_left",thClass:"text_left"}]}},watch:{filter:{handler:function(a){this.getData(1)},deep:!0}},created(){this.getData(1)},methods:{async getData(a){const n=await H("documentSendStore","getList",{payload:{page:a,...this.filter}});n.status===200&&(this.advancedTable=n.data.result.data,this.paginate.total=n.data.result.total_page*n.data.result.per_page,this.paginate.current_page=n.data.result.current_page,this.paginate.perpage=n.data.result.per_page)},async changePage(a){this.paginate.current_page=a,await this.getData(a)}}},Oa={class:"custom__table"},Va=e("div",{class:"text-center"},[e("div",{class:"text-gray-400"},"ไม่พบข้อมูล")],-1),Ra={key:0},Ea={class:"w-[100%]"},Ha=["onClick"],Ba={class:"text-gray-400 ell-1 mb-1"},Ya={key:0,class:"flex space-x-4"},Aa=["href"],za={class:"flex items-center bg-gray-100 border rounded-md px-2 w-[120px] h-[24px] cursor-pointer"},Fa={class:"ell-1"},Za={key:1},Na={key:2},Ua={class:"flex space-x-1"},La={class:"shrink w-[30px]"},Ga={key:0},Wa={key:1},qa={key:2},Ja={class:"space-y-1"},Ka={key:0},Qa=e("div",{class:"bg-yellow-500 text-center rounded text-white px-2 py-1"}," ด่วน ",-1),Xa=[Qa],ei={key:1},ti=e("div",{class:"bg-orange-500 text-center rounded text-white px-2 py-1"}," ด่วนมาก ",-1),oi=[ti],si={key:2},ni=e("div",{class:"bg-red-500 text-center rounded text-white px-2 py-1"}," ด่วนที่สุด ",-1),li=[ni],ai={key:3},ii=e("div",{class:"bg-white border-2 border-blue-700 text-center rounded text-black px-2"}," ลับ ",-1),di=[ii],ri={key:4},ci=e("div",{class:"bg-white border-2 border-red-500 text-center rounded text-black px-2"}," ลับมาก ",-1),_i=[ci],ui={key:5},gi=e("div",{class:"bg-white border-2 border-yellow-500 text-center rounded text-black px-2"}," ลับที่สุด ",-1),hi=[gi],mi={key:3},xi={class:"py-4 px-3"};function pi(a,n,V,p,d,v){const b=_("Tooltip"),y=_("Icon"),T=_("Pagination"),D=_("vue-good-table"),j=_("Card");return t(),o("div",Oa,[l(j,{noborder:"",bodyClass:"p-0"},{default:u(()=>[l(D,{columns:d.columns,styleClass:" vgt-table bordered lesspadding2",rows:d.advancedTable,"pagination-options":{enabled:!0,perPage:d.paginate.perpage},"sort-options":{enabled:!1},"select-options":{enabled:!1,selectOnCheckboxOnly:!0,selectioninfoClass:"custom-class",selectionText:"rows selected",clearSelectionText:"clear"}},{emptystate:u(()=>[Va]),"table-row":u(r=>{var C,h,i,k,m;return[r.column.field=="subject"?(t(),o("span",Ra,[e("div",Ea,[l(b,null,{base:u(()=>[e("div",{onClick:x=>a.$router.push("sent-book/"+r.row.id),class:"ell-1 hover:underline pointer cursor-pointer"},g(r.row.subject),9,Ha)]),default:u(()=>[e("div",null,g(r.row.subject),1)]),_:2},1024),e("div",Ba,g(r.row.detail),1),(C=r.row)!=null&&C.document_attachments&&((h=r.row)==null?void 0:h.document_attachments.length)>0?(t(),o("div",Ya,[(t(!0),o(F,null,Z(r.row.document_attachments,x=>(t(),o("div",{key:x},[e("a",{href:d.urlSarabun+(x==null?void 0:x.file_path),target:"_blank",class:""},[e("div",za,[l(y,{icon:"ant-design:file-pdf-filled",class:"text-red-500 pr-1"}),e("div",Fa,g(x==null?void 0:x.file_name),1)])],8,Aa)]))),128))])):s("",!0)])])):s("",!0),r.column.field=="status"?(t(),o("span",Za,[e("span",{class:ge(["px-2 py-1 rounded text-white",((i=r.row)==null?void 0:i.status)=="ปฏิบัติงานเสร็จ"?"bg-green-500":"bg-red-500"])},g((k=r.row)==null?void 0:k.status),3)])):s("",!0),r.column.field=="book"?(t(),o("span",Na,[e("div",Ua,[e("div",La,[r.row.document_type=="เอกสารทั่วไป (ส่งฉบับจริง)"?(t(),o("div",Ga,[l(y,{icon:"emojione-monotone:letter-p",class:"handle text-[25px] text-yellow-500"})])):s("",!0),r.row.document_type=="เอกสารอิเล็กทรอนิกส์"?(t(),o("div",Wa,[l(y,{icon:"emojione-monotone:letter-e",class:"handle text-[25px] text-blue-700"})])):s("",!0),r.row.document_type=="หนังสือรับจากอีเมล"?(t(),o("div",qa,[l(y,{icon:"mdi:email",class:"handle text-[25px] text-orange-500"})])):s("",!0)]),e("div",Ja,[r.row.urgency_level=="ด่วน"?(t(),o("div",Ka,Xa)):s("",!0),r.row.urgency_level=="ด่วนมาก"?(t(),o("div",ei,oi)):s("",!0),r.row.urgency_level=="ด่วนที่สุด"?(t(),o("div",si,li)):s("",!0),r.row.secrecy_level=="ลับ"?(t(),o("div",ai,di)):s("",!0),r.row.secrecy_level=="ลับมาก"?(t(),o("div",ri,_i)):s("",!0),r.row.secrecy_level=="ลับที่สุด"?(t(),o("div",ui,hi)):s("",!0)])])])):s("",!0),r.column.field=="to"?(t(),o("span",mi,g((m=r.row.to_data)==null?void 0:m.full_name),1)):s("",!0)]}),"pagination-bottom":u(r=>[e("div",xi,[l(T,{total:d.paginate.total,current:d.paginate.current_page,"per-page":d.paginate.perpage,pageRange:d.paginate.pageRange,onPageChanged:n[0]||(n[0]=C=>v.changePage(C)),pageChanged:r.pageChanged,perPageChanged:r.perPageChanged,textAfterInput:"ไปที่หน้า",enableSearch:"",enableInput:""},null,8,["total","current","per-page","pageRange","pageChanged","perPageChanged"])])]),_:1},8,["columns","rows","pagination-options"])]),_:1})])}const bi=U(Ia,[["render",pi]]);const fi={props:{filter:{type:Object,default:()=>{}}},components:{Pagination:q,Dropdown:W,Icon:N,Card:L,ModalSuccess:xe,Tooltip:J},data(){return{urlSarabun:G,paginate:{total:1,current_page:1,perpage:10,pageRange:5},rows:[],columns:[{label:"หนังสือ",field:"book",width:"2.61%",tdClass:"text_left",thClass:"text_left"},{label:"เลขที่หนังสือ",field:"document_number",width:"13.07%",tdClass:"text_left",thClass:"text_left"},{label:"เลขรับ/ส่ง",field:"initial_number_from",width:"9.80%"},{label:"เรื่อง",field:"subject",width:"26.144%",tdClass:"text_left",thClass:"text_left"},{label:"จาก",field:"from",width:"26.14%",tdClass:"text_left",thClass:"text_left"},{label:"วัน/เวลานำเข้า",field:"created_at",width:"13.07%",tdClass:"text_left",thClass:"text_left"},{label:"จัดการ",field:"action",width:"9.15%",tdClass:"text_center",thClass:"text_center"}]}},created(){this.getData(1)},watch:{filter:{handler:function(a){this.getData(1)},deep:!0}},methods:{async getData(a){console.log("getdata");const n=await H("suggestionStore","get",{payload:{page:a,...this.filter}});n.status===200&&(this.rows=n.data.result.data,this.paginate.total=n.data.result.total_page*n.data.result.per_page,this.paginate.current_page=n.data.result.current_page,this.paginate.perpage=n.data.result.per_page)},convertDateTime(a){return X(a).locale("th").add(543,"year").format("DD MMM YYYY HH:mm")},copyInitialNumber(a){navigator.clipboard.writeText(a).then(function(){alert("คัดลอกเลขรับ/ส่งเรียบร้อยแล้ว")},function(n){console.error("Async: Could not copy text: ",n)})},async changePage(a){this.paginate.current_page=a,await this.getData(a)}}},wi={class:"custom__table"},vi=e("div",{class:"text-center"},[e("div",{class:"text-gray-400"},"ไม่พบข้อมูล")],-1),yi={key:0},ki={class:"flex space-x-1"},$i={class:"shrink w-[30px]"},Ci={key:0},Si={key:1},Mi={key:2},Pi={class:"space-y-1"},Di={key:0},Ti=e("div",{class:"bg-yellow-500 text-center rounded text-white px-2 py-1"}," ด่วน ",-1),ji=[Ti],Ii={key:1},Oi=e("div",{class:"bg-orange-500 text-center rounded text-white px-2 py-1"}," ด่วนมาก ",-1),Vi=[Oi],Ri={key:2},Ei=e("div",{class:"bg-red-500 text-center rounded text-white px-2 py-1"}," ด่วนที่สุด ",-1),Hi=[Ei],Bi={key:3},Yi=e("div",{class:"bg-white border-2 border-blue-700 text-center rounded text-black px-2"}," ลับ ",-1),Ai=[Yi],zi={key:4},Fi=e("div",{class:"bg-white border-2 border-red-500 text-center rounded text-black px-2"}," ลับมาก ",-1),Zi=[Fi],Ni={key:5},Ui=e("div",{class:"bg-white border-2 border-yellow-500 text-center rounded text-black px-2"}," ลับที่สุด ",-1),Li=[Ui],Gi={key:1},Wi={class:"w-[450px]"},qi={class:"ell-1"},Ji={class:"text-gray-400 ell-1 mb-1"},Ki={key:0,class:"flex space-x-4"},Qi=["href"],Xi={class:"flex items-center bg-gray-100 border rounded-md px-2 w-[120px] h-[24px] cursor-pointer"},ed={class:"ell-1"},td={key:2},od={key:3},sd={key:4},nd={class:"w-full"},ld=e("div",{class:"p-2 flex items-center hover:bg-gray-50 cursor-pointer"}," รายละเอียดหนังสือ ",-1),ad={class:"py-4 px-3"};function id(a,n,V,p,d,v){const b=_("Icon"),y=_("Tooltip"),T=_("router-link"),D=_("Dropdown"),j=_("Pagination"),r=_("vue-good-table"),C=_("Card");return t(),o("div",wi,[l(C,{noborder:"",bodyClass:"p-0"},{default:u(()=>[l(r,{columns:d.columns,styleClass:" vgt-table bordered lesspadding2",rows:d.rows,"pagination-options":{enabled:!0,perPage:d.paginate.perpage},"sort-options":{enabled:!1},"select-options":{enabled:!1,selectOnCheckboxOnly:!0,selectioninfoClass:"custom-class",selectionText:"rows selected",clearSelectionText:"clear"}},{emptystate:u(()=>[vi]),"table-row":u(h=>{var i,k,m,x;return[h.column.field=="book"?(t(),o("span",yi,[e("div",ki,[e("div",$i,[h.row.document_type=="เอกสารทั่วไป (ส่งฉบับจริง)"?(t(),o("div",Ci,[l(b,{icon:"emojione-monotone:letter-p",class:"handle text-[25px] text-yellow-500"})])):s("",!0),h.row.document_type=="เอกสารอิเล็กทรอนิกส์"?(t(),o("div",Si,[l(b,{icon:"emojione-monotone:letter-e",class:"handle text-[25px] text-blue-700"})])):s("",!0),h.row.document_type=="หนังสือรับจากอีเมล"?(t(),o("div",Mi,[l(b,{icon:"mdi:email",class:"handle text-[25px] text-orange-500"})])):s("",!0)]),e("div",Pi,[h.row.urgency_level=="ด่วน"?(t(),o("div",Di,ji)):s("",!0),h.row.urgency_level=="ด่วนมาก"?(t(),o("div",Ii,Vi)):s("",!0),h.row.urgency_level=="ด่วนที่สุด"?(t(),o("div",Ri,Hi)):s("",!0),h.row.secrecy_level=="ลับ"?(t(),o("div",Bi,Ai)):s("",!0),h.row.secrecy_level=="ลับมาก"?(t(),o("div",zi,Zi)):s("",!0),h.row.secrecy_level=="ลับที่สุด"?(t(),o("div",Ni,Li)):s("",!0)])])])):s("",!0),h.column.field=="subject"?(t(),o("span",Gi,[e("div",Wi,[l(y,null,{base:u(()=>[e("div",qi,g(h.row.subject),1)]),default:u(()=>[e("div",null,g(h.row.subject),1)]),_:2},1024),e("div",Ji,g(h.row.detail),1),(i=h.row)!=null&&i.document_attachments&&((k=h.row)==null?void 0:k.document_attachments.length)>0?(t(),o("div",Ki,[(t(!0),o(F,null,Z(h.row.document_attachments,M=>(t(),o("div",{key:M},[e("a",{href:d.urlSarabun+(M==null?void 0:M.file_path),target:"_blank",class:""},[e("div",Xi,[l(b,{icon:"ant-design:file-pdf-filled",class:"text-red-500 pr-1"}),e("div",ed,g(M==null?void 0:M.file_name),1)])],8,Qi)]))),128))])):s("",!0)])])):s("",!0),h.column.field=="from"?(t(),o("span",td,g(h.row.book_type==="inside"?(m=h.row.from_data)==null?void 0:m.organization_name:(x=h.row.from_data)==null?void 0:x.name),1)):s("",!0),h.column.field=="created_at"?(t(),o("span",od,g(h.row.created_at?v.convertDateTime(h.row.created_at)+" น.":"-"),1)):s("",!0),h.column.field=="action"?(t(),o("span",sd,[l(D,{classMenuItems:"right-full  w-[220px] top-[110%] "},{menus:u(()=>[e("ul",nd,[e("li",null,[l(T,{to:"/app/issue/suggestion/"+h.row.id},{default:u(()=>[ld]),_:2},1032,["to"])])])]),default:u(()=>[l(b,{icon:"pepicons-pencil:dots-x",class:"text-gray-400 text-4xl"})]),_:2},1024)])):s("",!0)]}),"pagination-bottom":u(h=>[e("div",ad,[l(j,{total:d.paginate.total,current:d.paginate.current_page,"per-page":d.paginate.perpage,pageRange:d.paginate.pageRange,onPageChanged:n[0]||(n[0]=i=>v.changePage(i)),pageChanged:h.pageChanged,perPageChanged:h.perPageChanged,textAfterInput:"ไปที่หน้า",enableSearch:"",enableInput:""},null,8,["total","current","per-page","pageRange","pageChanged","perPageChanged"])])]),_:1},8,["columns","rows","pagination-options"])]),_:1})])}const dd=U(fi,[["render",id]]);const rd={props:{filter:{type:Object,default:()=>({})}},components:{Button:te,Modal:ce,Pagination:q,Dropdown:W,Icon:N,Card:L,Textarea:se,Tooltip:J,TextValid:ne},data(){return{urlSarabun:G,isShowSuggestion:!1,returnSuggestion:"",paginate:{total:1,current_page:1,perpage:10,pageRange:5},row:[],columns:[{label:"หนังสือ",field:"book",width:"2.61%",tdClass:"text_left",thClass:"text_left"},{label:"เลขที่หนังสือ",field:"document_number",width:"13.07%",tdClass:"text_left",thClass:"text_left"},{label:"เลขรับ/ส่ง",field:"initial_number_from",width:"9.80%"},{label:"เรื่อง",field:"subject",width:"26.14%",tdClass:"text_left",thClass:"text_left"},{label:"จาก",field:"from",width:"26.14%",tdClass:"text_left",thClass:"text_left"},{label:"วัน/เวลานำเข้า",field:"created_at",width:"13.07%",tdClass:"text_left",thClass:"text_left"},{label:"จัดการ",field:"action",width:"9.15%",tdClass:"text_center",thClass:"text_center"}]}},watch:{filter:{handler:function(a){this.getData(1)},deep:!0}},created(){this.getData(1)},methods:{convertDateTime(a){return a?X(a).locale("th").add(543,"year").format("DD MMM YYYY HH:mm"):"-"},async getData(a){console.log("getdata");const n=await H("suggestionStore","getHistory",{payload:{page:a,...this.filter}});n.status===200&&(console.log("res naja",n),this.row=n.data.result.data,this.paginate.total=n.data.result.total_page*n.data.result.per_page,this.paginate.current_page=n.data.result.current_page,this.paginate.perpage=n.data.result.per_page)},async changePage(a){this.paginate.current_page=a,await this.getData(a)},openModalSuggestion(a){this.isShowSuggestion=!0,this.returnSuggestion=a.suggesttion},closeModal(){this.isShowSuggestion=!1,this.returnSuggestion=""},changePage(a){this.paginate.current_page=a,this.getData(a)}}},cd={class:"custom__table"},_d=e("div",{class:"text-center"},[e("div",{class:"text-gray-400"},"ไม่พบข้อมูล")],-1),ud={key:0},gd={class:"w-[100%]"},hd=["onClick"],md={class:"text-gray-400 ell-1 mb-1"},xd={key:0,class:"flex space-x-4"},pd=["href"],bd={class:"flex items-center bg-gray-100 border rounded-md px-2 w-[120px] h-[24px] cursor-pointer"},fd={class:"ell-1"},wd={key:1},vd={class:"w-full"},yd=e("div",{class:"p-2 flex items-center hover:bg-gray-50 cursor-pointer"}," รายละเอียดหนังสือ ",-1),kd=["onClick"],$d={key:2},Cd={class:"flex space-x-1"},Sd={class:"shrink w-[30px]"},Md={key:0},Pd={key:1},Dd={key:2},Td={class:"space-y-1"},jd={key:0},Id=e("div",{class:"bg-yellow-500 text-center rounded text-white px-2 py-1"}," ด่วน ",-1),Od=[Id],Vd={key:1},Rd=e("div",{class:"bg-orange-500 text-center rounded text-white px-2 py-1"}," ด่วนมาก ",-1),Ed=[Rd],Hd={key:2},Bd=e("div",{class:"bg-red-500 text-center rounded text-white px-2 py-1"}," ด่วนที่สุด ",-1),Yd=[Bd],Ad={key:3},zd=e("div",{class:"bg-white border-2 border-blue-700 text-center rounded text-black px-2"}," ลับ ",-1),Fd=[zd],Zd={key:4},Nd=e("div",{class:"bg-white border-2 border-red-500 text-center rounded text-black px-2"}," ลับมาก ",-1),Ud=[Nd],Ld={key:5},Gd=e("div",{class:"bg-white border-2 border-yellow-500 text-center rounded text-black px-2"}," ลับที่สุด ",-1),Wd=[Gd],qd={key:3},Jd={key:4},Kd={key:0},Qd={key:5},Xd={key:6},er={class:"py-4 px-3"},tr={class:"list space-y-1"},or=e("div",{class:"text-sm font-medium text-slate-500 dark:text-slate-200"}," เหตุผลในการเสนอแนะ ",-1),sr={class:"text-slate-600 dark:text-slate-400 mb-1"},nr={class:"text-center mt-4 flex justify-center w-full"};function lr(a,n,V,p,d,v){const b=_("Tooltip"),y=_("Icon"),T=_("router-link"),D=_("Dropdown"),j=_("Pagination"),r=_("vue-good-table"),C=_("Card"),h=_("Textarea"),i=_("Button"),k=_("Modal");return t(),o("div",cd,[l(C,{noborder:"",bodyClass:"p-0"},{default:u(()=>[l(r,{columns:d.columns,styleClass:" vgt-table bordered lesspadding2",rows:d.row,"pagination-options":{enabled:!0,perPage:d.paginate.perpage},"sort-options":{enabled:!1},"select-options":{enabled:!1,selectOnCheckboxOnly:!0,selectioninfoClass:"custom-class",selectionText:"rows selected",clearSelectionText:"clear"}},{emptystate:u(()=>[_d]),"table-row":u(m=>{var x,M,f,c,S,w,P;return[m.column.field=="subject"?(t(),o("span",ud,[e("div",gd,[l(b,null,{base:u(()=>[e("div",{onClick:$=>m.row.doc_pickup_type=="หนังสือส่ง"?a.$router.push("history-suggestion/wait-to-send/"+m.row.id):a.$router.push("history-suggestion/wait-to-receive/"+m.row.id),class:"ell-1 hover:underline pointer cursor-pointer"},g(m.row.subject),9,hd)]),default:u(()=>[e("div",null,g(m.row.subject),1)]),_:2},1024),e("div",md,g(m.row.detail),1),(x=m.row)!=null&&x.document_attachments&&((M=m.row)==null?void 0:M.document_attachments.length)>0?(t(),o("div",xd,[(t(!0),o(F,null,Z((f=m.row)==null?void 0:f.document_attachments,$=>(t(),o("div",{key:$},[e("a",{href:d.urlSarabun+($==null?void 0:$.file_path),target:"_blank",class:""},[e("div",bd,[l(y,{icon:"ant-design:file-pdf-filled",class:"text-red-500 pr-1"}),e("div",fd,g($==null?void 0:$.file_name),1)])],8,pd)]))),128))])):s("",!0)])])):s("",!0),m.column.field=="action"?(t(),o("span",wd,[l(D,{classMenuItems:"right-full  w-[220px] top-[110%] "},{menus:u(()=>[e("ul",vd,[e("li",null,[l(T,{to:m.row.doc_pickup_type=="หนังสือส่ง"?"history-suggestion/wait-to-send/"+m.row.id:"history-suggestion/wait-to-receive/"+m.row.id},{default:u(()=>[yd]),_:2},1032,["to"])]),e("li",null,[e("div",{class:"p-2 flex items-center hover:bg-gray-50 cursor-pointer",onClick:$=>v.openModalSuggestion(m.row)}," การเสนอแนะ ",8,kd)])])]),default:u(()=>[l(y,{icon:"pepicons-pencil:dots-x",class:"text-gray-400 text-4xl"})]),_:2},1024)])):s("",!0),m.column.field=="book"?(t(),o("span",$d,[e("div",Cd,[e("div",Sd,[((c=m.row)==null?void 0:c.document_type)=="เอกสารทั่วไป (ส่งฉบับจริง)"?(t(),o("div",Md,[l(y,{icon:"emojione-monotone:letter-p",class:"handle text-[25px] text-yellow-500"})])):s("",!0),m.row.document_type=="เอกสารอิเล็กทรอนิกส์"?(t(),o("div",Pd,[l(y,{icon:"emojione-monotone:letter-e",class:"handle text-[25px] text-blue-700"})])):s("",!0),m.row.document_type=="หนังสือรับจากอีเมล"?(t(),o("div",Dd,[l(y,{icon:"mdi:email",class:"handle text-[25px] text-orange-500"})])):s("",!0)]),e("div",Td,[m.row.urgency_level=="ด่วน"?(t(),o("div",jd,Od)):s("",!0),m.row.urgency_level=="ด่วนมาก"?(t(),o("div",Vd,Ed)):s("",!0),m.row.urgency_level=="ด่วนที่สุด"?(t(),o("div",Hd,Yd)):s("",!0),m.row.secrecy_level=="ลับ"?(t(),o("div",Ad,Fd)):s("",!0),m.row.secrecy_level=="ลับมาก"?(t(),o("div",Zd,Ud)):s("",!0),m.row.secrecy_level=="ลับที่สุด"?(t(),o("div",Ld,Wd)):s("",!0)])])])):s("",!0),m.column.field=="document_number"?(t(),o("span",qd,g(m.row.document_number?m.row.document_number:(S=m.row)==null?void 0:S.book_pdf_at),1)):s("",!0),m.column.field=="initial_number_from"?(t(),o("span",Jd,[m.row.initial_number_from?(t(),o("div",Kd,g(m.row.initial_number_from),1)):s("",!0)])):s("",!0),m.column.field=="from"?(t(),o("span",Qd,g(m.row.book_type=="inside"?(w=m.row.from_data)==null?void 0:w.organization_name:(P=m.row.from_data)==null?void 0:P.name),1)):s("",!0),m.column.field=="created_at"?(t(),o("span",Xd,g(m.row.created_at?v.convertDateTime(m.row.created_at)+" น.":"-"),1)):s("",!0)]}),"pagination-bottom":u(m=>[e("div",er,[l(j,{total:d.paginate.total,current:d.paginate.current_page,"per-page":d.paginate.perpage,pageRange:d.paginate.pageRange,onPageChanged:n[0]||(n[0]=x=>v.changePage(x)),pageChanged:m.pageChanged,perPageChanged:m.perPageChanged,textAfterInput:"ไปที่หน้า",enableSearch:"",enableInput:""},null,8,["total","current","per-page","pageRange","pageChanged","perPageChanged"])])]),_:1},8,["columns","rows","pagination-options"])]),_:1}),d.isShowSuggestion?(t(),I(k,{key:0,title:"เสนอแนะ",activeModal:d.isShowSuggestion,"onEvent:closeModal":n[3]||(n[3]=m=>d.isShowSuggestion=!1),label:"",labelClass:"btn-outline-dark",sizeClass:"w-full max-w-[700px]",centered:""},{footer:u(()=>[e("div",nr,[l(i,{text:"ยกเลิก",btnClass:"btn-outline-dark w-32 mx-2",onOnClick:n[2]||(n[2]=m=>v.closeModal())})])]),default:u(()=>[e("div",tr,[or,e("div",sr,[l(h,{disabled:"",placeholder:"",name:"detail",rows:4,modelValue:d.returnSuggestion,"onUpdate:modelValue":n[1]||(n[1]=m=>d.returnSuggestion=m)},null,8,["modelValue"])])])]),_:1},8,["activeModal"])):s("",!0)])}const ar=U(rd,[["render",lr]]);const ir={props:{filter:{type:Object,default:()=>({})}},components:{Pagination:q,Dropdown:W,Icon:N,Card:L,Tooltip:J},data(){return{urlSarabun:G,advancedTable:[],paginate:{total:50,current_page:1,perpage:10,pageRange:5},columns:[{label:"หนังสือ",field:"book",width:"2.80%",tdClass:"text_left",thClass:"text_left"},{label:"เลขที่หนังสือ",field:"document_number",width:"13.99%",tdClass:"text_left",thClass:"text_left"},{label:"เลขรับ/ส่ง",field:"initial_number_from",width:"10.49%"},{label:"เรื่อง",field:"subject",width:"27.97%",tdClass:"text_left",thClass:"text_left"},{label:"จาก",field:"from",width:"27.97%",tdClass:"text_left",thClass:"text_left"},{label:"สถานะ",field:"status",width:"9.79%",tdClass:"text_left",thClass:"text_left"},{label:"จัดการ",field:"action",width:"6.99%"}]}},watch:{filter:{handler:function(a){this.getData(1)},deep:!0}},created(){this.getData(1)},methods:{async getData(a){const n=await H("pendingStore","get",{payload:{page:a,...this.filter}});n.status===200&&(this.advancedTable=n.data.result.data,this.paginate.total=n.data.result.total_page*n.data.result.per_page,this.paginate.current_page=n.data.result.current_page,this.paginate.perpage=n.data.result.per_page)},async changePage(a){this.paginate.current_page=a,await this.getData(a)}}},dr={class:"custom__table"},rr=e("div",{class:"text-center"},[e("div",{class:"text-gray-400"},"ไม่พบข้อมูล")],-1),cr={key:0},_r={class:"flex space-x-1"},ur={class:"shrink w-[30px]"},gr={key:0},hr={key:1},mr={key:2},xr={class:"space-y-1"},pr={key:0},br=e("div",{class:"bg-yellow-500 text-center rounded text-white px-2 py-1"}," ด่วน ",-1),fr=[br],wr={key:1},vr=e("div",{class:"bg-orange-500 text-center rounded text-white px-2 py-1"}," ด่วนมาก ",-1),yr=[vr],kr={key:2},$r=e("div",{class:"bg-red-500 text-center rounded text-white px-2 py-1"}," ด่วนที่สุด ",-1),Cr=[$r],Sr={key:3},Mr=e("div",{class:"bg-white border-2 border-blue-700 text-center rounded text-black px-2"}," ลับ ",-1),Pr=[Mr],Dr={key:4},Tr=e("div",{class:"bg-white border-2 border-red-500 text-center rounded text-black px-2"}," ลับมาก ",-1),jr=[Tr],Ir={key:5},Or=e("div",{class:"bg-white border-2 border-yellow-500 text-center rounded text-black px-2"}," ลับที่สุด ",-1),Vr=[Or],Rr={key:1},Er={key:2},Hr={class:"w-[100%]"},Br={class:"ell-1"},Yr={class:"text-gray-400 ell-1 mb-1"},Ar={key:0,class:"flex space-x-4"},zr=["href"],Fr={class:"flex items-center bg-gray-100 border rounded-md px-2 w-[120px] h-[24px] cursor-pointer"},Zr={class:"ell-1"},Nr={key:3},Ur={key:4},Lr={key:0},Gr={class:"text-green-500"},Wr={key:1},qr={class:"text-orange-500"},Jr={key:5},Kr={class:"w-full"},Qr={key:0},Xr={class:"p-2 flex items-center hover:bg-gray-50 cursor-pointer"},ec={class:"p-2 flex items-center hover:bg-gray-50 cursor-pointer"},tc={class:"py-4 px-3"};function oc(a,n,V,p,d,v){const b=_("Icon"),y=_("Tooltip"),T=_("router-link"),D=_("Dropdown"),j=_("Pagination"),r=_("vue-good-table"),C=_("Card");return t(),o("div",dr,[l(C,{noborder:"",bodyClass:"p-0"},{default:u(()=>[l(r,{columns:d.columns,styleClass:" vgt-table bordered lesspadding2",rows:d.advancedTable,"pagination-options":{enabled:!0,perPage:d.paginate.perpage},"sort-options":{enabled:!1},"select-options":{enabled:!1,selectOnCheckboxOnly:!0,selectioninfoClass:"custom-class",selectionText:"rows selected",clearSelectionText:"clear"}},{emptystate:u(()=>[rr]),"table-row":u(h=>{var i,k,m,x,M,f,c,S,w,P;return[h.column.field=="book"?(t(),o("span",cr,[e("div",_r,[e("div",ur,[h.row.document_type=="เอกสารทั่วไป (ส่งฉบับจริง)"?(t(),o("div",gr,[l(b,{icon:"emojione-monotone:letter-p",class:"handle text-[25px] text-yellow-500"})])):s("",!0),h.row.document_type=="เอกสารอิเล็กทรอนิกส์"?(t(),o("div",hr,[l(b,{icon:"emojione-monotone:letter-e",class:"handle text-[25px] text-blue-700"})])):s("",!0),h.row.document_type=="หนังสือรับจากอีเมล"?(t(),o("div",mr,[l(b,{icon:"mdi:email",class:"handle text-[25px] text-orange-500"})])):s("",!0)]),e("div",xr,[h.row.urgency_level=="ด่วน"?(t(),o("div",pr,fr)):s("",!0),h.row.urgency_level=="ด่วนมาก"?(t(),o("div",wr,yr)):s("",!0),h.row.urgency_level=="ด่วนที่สุด"?(t(),o("div",kr,Cr)):s("",!0),h.row.secrecy_level=="ลับ"?(t(),o("div",Sr,Pr)):s("",!0),h.row.secrecy_level=="ลับมาก"?(t(),o("div",Dr,jr)):s("",!0),h.row.secrecy_level=="ลับที่สุด"?(t(),o("div",Ir,Vr)):s("",!0)])])])):s("",!0),h.column.field=="document_number"?(t(),o("span",Rr,g((i=h.row)!=null&&i.document_number?(k=h.row)==null?void 0:k.document_number:(m=h.row)==null?void 0:m.book_pdf_at),1)):s("",!0),h.column.field=="subject"?(t(),o("span",Er,[e("div",Hr,[l(y,null,{base:u(()=>[e("div",Br,g(h.row.subject),1)]),default:u(()=>[e("div",null,g(h.row.subject),1)]),_:2},1024),e("div",Yr,g(h.row.detail),1),(x=h.row)!=null&&x.document_attachments&&((M=h.row)==null?void 0:M.document_attachments.length)>0?(t(),o("div",Ar,[(t(!0),o(F,null,Z(h.row.document_attachments,$=>(t(),o("div",{key:$},[e("a",{href:d.urlSarabun+($==null?void 0:$.file_path),target:"_blank",class:""},[e("div",Fr,[l(b,{icon:"ant-design:file-pdf-filled",class:"text-red-500 pr-1"}),e("div",Zr,g($==null?void 0:$.file_name),1)])],8,zr)]))),128))])):s("",!0)])])):s("",!0),h.column.field=="from"?(t(),o("span",Nr,g(h.row.book_type=="inside"?(f=h.row.from_data)==null?void 0:f.organization_name:(c=h.row.from_data)==null?void 0:c.name),1)):s("",!0),h.column.field=="status"?(t(),o("span",Ur,[((S=h.row)==null?void 0:S.status)=="รอดำเนินการ"?(t(),o("div",Lr,[e("span",Gr,g((w=h.row)==null?void 0:w.status),1)])):(t(),o("div",Wr,[e("span",qr,g((P=h.row)==null?void 0:P.status),1)]))])):s("",!0),h.column.field=="action"?(t(),o("span",Jr,[l(D,{classMenuItems:"right-full  w-[220px] top-[110%] "},{menus:u(()=>{var $;return[e("ul",Kr,[(($=h.row)==null?void 0:$.status)=="รอดำเนินการ"?(t(),o("li",Qr,[l(T,{to:h.row.doc_pickup_type=="หนังสือส่ง"?"pending/wait-to-send/edit/"+h.row.id:"pending/wait-to-receive/edit/"+h.row.id},{default:u(()=>[e("div",Xr,[l(b,{icon:"bx:edit",class:"text-xl mr-2"}),R(" แก้ไข ")])]),_:2},1032,["to"])])):s("",!0),e("li",null,[l(T,{to:h.row.doc_pickup_type=="หนังสือส่ง"?"pending/wait-to-send/"+h.row.id:"pending/wait-to-receive/"+h.row.id},{default:u(()=>[e("div",ec,[l(b,{icon:"grommet-icons:document-text",class:"text-xl mr-2"}),R(" ดูรายละเอียด ")])]),_:2},1032,["to"])])])]}),default:u(()=>[l(b,{icon:"pepicons-pencil:dots-x",class:"text-gray-400 text-4xl"})]),_:2},1024)])):s("",!0)]}),"pagination-bottom":u(h=>[e("div",tc,[l(j,{total:d.paginate.total,current:d.paginate.current_page,"per-page":d.paginate.perpage,pageRange:d.paginate.pageRange,onPageChanged:n[0]||(n[0]=i=>v.changePage(i)),pageChanged:h.pageChanged,perPageChanged:h.perPageChanged,textAfterInput:"ไปที่หน้า",enableSearch:"",enableInput:""},null,8,["total","current","per-page","pageRange","pageChanged","perPageChanged"])])]),_:1},8,["columns","rows","pagination-options"])]),_:1})])}const sc=U(ir,[["render",oc]]);const nc={components:{Pagination:q,Dropdown:W,Icon:N,Card:L,ItemOrder:Me,Modal:me,Radio:De,Button:te,TextValid:ne,Textarea:se,Textinput:Pe,PinInput:Te,Text:Le,Tooltip:J,ModalError:le,ModalSuccess:xe,OrderMobile:Ge},data(){return{urlSarabun:G}},props:["filter"],setup(a){Ce();const n=E([]),V=E(!1),p=E(!1),d=E(""),v=E(!1),b=E(!1),y=E(null);E(!0);const T=E(null),D=_e({total:50,current_page:1,perpage:10,pageRange:5}),j=re(()=>he().isMobile),r=re(()=>Se().userInfo),C=re(()=>[{label:"หนังสือ",field:"book",width:"2%",tdClass:"text_left",thClass:"text_left"},{label:"เลขที่หนังสือ",field:"document_number",width:"10%",tdClass:"text_left",thClass:"text_left"},{label:"เลขรับ/ส่ง",field:"initial_number_from",width:"6%"},{label:"เรื่อง",field:"subject",width:"20%",tdClass:"text_left",thClass:"text_left"},{label:"จาก",field:"from",width:"20%",tdClass:"text_left",thClass:"text_left"},{label:"ถึง",field:"to",width:"20%",tdClass:"text_left",thClass:"text_left"},{label:"วัน/เวลานำเข้า",field:"created_at",width:"10%",tdClass:"text_left",thClass:"text_left"},{label:"สถานะ",field:"status",width:"7%",tdClass:"text_left",thClass:"text_left"},{label:"จัดการ",field:"action",width:"5%"}]);ue(()=>r.value,f=>{var c;console.log("newUserInfo",f),position.value=(c=f==null?void 0:f.organization)==null?void 0:c.organization_name}),ue(()=>a.filter,f=>{h(1)}),je(async()=>{console.log("mounted"),await h(1)});const h=async f=>{console.log(a.filter);const{data:c,status:S}=await H("orderStore","get",{payload:{page:f,...a.filter}});S===200&&(console.log(c),n.value=c.result.data,T.value=c.result.permission,D.total=c.result.total_page*c.result.per_page,D.current_page=c.result.current_page,D.perpage=c.result.per_page)};return{items:n,modalSubmitOrder:v,modalImplement:b,itemModal:y,paginate:D,userInfo:r,isError:p,errorMessage:d,permission:T,isOrderSuccess:V,isMobile:j,columns:C,submitOrderModal:async f=>{console.log("payload",f);const{status:c,data:S}=await H("orderStore","store",{payload:f});console.log("data",c,S),c===200?(V.value=!0,h(1)):(p.value=!0,d.value=S==null?void 0:S.message)},convertDateTime:f=>f?X(f).locale("th").add(543,"year").format("DD MMM YYYY HH:mm"):"-",handleImplement:f=>{console.log("handleImplement",f),y.value={...f,order:f==null?void 0:f.order,detail:f==null?void 0:f.detail,full_name:f==null?void 0:f.full_name,position:f==null?void 0:f.position},b.value=!0},handleCancelOrder:async f=>{console.log("handleCancelOrder",f);const{data:c,status:S}=await H("orderStore","cancel",{payload:[{id:f.id}]});S===200?(console.log(c),h(1)):(p.value=!0,d.value=c==null?void 0:c.message)},changePage:async f=>{D.current=f,await h(f)}}}},lc={class:"custom__table"},ac=e("div",{class:"text-center"},[e("div",{class:"text-gray-400"},"ไม่พบข้อมูล")],-1),ic={key:0},dc={class:"flex space-x-1"},rc={class:"shrink w-[30px]"},cc={key:0},_c={key:1},uc={key:2},gc={class:"space-y-1"},hc={key:0},mc=e("div",{class:"bg-yellow-500 text-center rounded text-white px-2 py-1"}," ด่วน ",-1),xc=[mc],pc={key:1},bc=e("div",{class:"bg-orange-500 text-center rounded text-white px-2 py-1"}," ด่วนมาก ",-1),fc=[bc],wc={key:2},vc=e("div",{class:"bg-red-500 text-center rounded text-white px-2 py-1"}," ด่วนที่สุด ",-1),yc=[vc],kc={key:3},$c=e("div",{class:"bg-white border-2 border-blue-700 text-center rounded text-black px-2"}," ลับ ",-1),Cc=[$c],Sc={key:4},Mc=e("div",{class:"bg-white border-2 border-red-500 text-center rounded text-black px-2"}," ลับมาก ",-1),Pc=[Mc],Dc={key:5},Tc=e("div",{class:"bg-white border-2 border-yellow-500 text-center rounded text-black px-2"}," ลับที่สุด ",-1),jc=[Tc],Ic={key:1},Oc={class:"w-[100%]"},Vc={class:"ell-1"},Rc={class:"text-gray-400 ell-1 mb-1"},Ec={key:0,class:"flex space-x-4"},Hc=["href"],Bc={class:"flex items-center bg-gray-100 border rounded-md px-2 w-[120px] h-[24px] cursor-pointer"},Yc={class:"ell-1"},Ac={key:2},zc={key:3},Fc={key:4},Zc={key:5},Nc={key:6},Uc={key:0},Lc={class:"text-green-500"},Gc={key:1},Wc={class:"text-orange-500"},qc={key:7},Jc={class:"w-full"},Kc={class:"p-2 flex items-center hover:bg-gray-50 cursor-pointer"},Qc={key:0},Xc=["onClick"],e_={key:1},t_=["onClick"],o_={class:"py-4 px-3"},s_={key:1,class:"-mx-4 -mt-6"},n_=e("div",{class:"px-3 py-1 text-[10px] bg-gray-300 -mx-[23px] -mt-[2.5rem]"}," รายการหนังสือรอสั่งการ ",-1),l_={key:0,class:"list list-odd mb-3 -mx-5"},a_={key:1},i_=e("div",{class:"mt-3 border rounded bg-gray-50 px-3 py-2 text-center text-gray-400 text-[12px]"}," ไม่พบข้อมูล ",-1),d_=[i_],r_={class:"list list-odd px-28"},c_={class:"flex p-2"},__=e("div",{class:"basis-1/3 text-end pr-3 text-slate-900 font-medium"}," คำสั่งการ/คำเสนอ ",-1),u_={class:"basis-2/3"},g_={class:"flex p-2"},h_=e("div",{class:"basis-1/3 text-end pr-3 text-slate-900 font-medium"}," คำสั่งการ/คำเสนอ ",-1),m_={class:"basis-2/3"},x_={class:"flex p-2"},p_=e("div",{class:"basis-1/3 text-end pr-3 text-slate-900 font-medium"}," ผู้ลงนาม ",-1),b_={class:"basis-2/3"},f_={class:"flex p-2"},w_=e("div",{class:"basis-1/3 text-end pr-3 text-slate-900 font-medium"}," ตำแหน่ง ",-1),v_={class:"basis-2/3"},y_=e("hr",{class:"mt-4"},null,-1),k_={class:"flex justify-center mt-4"},$_={class:"text-lg text-slate-900"},C_={class:"h-[250px] flex items-center justify-center"},S_={class:"text-center flex flex-row flex-wrap justify-center"},M_={class:"basis-full flex justify-center mb-5"},P_=e("div",null,[e("h4",{class:"text-lg text-slate-900"},[R(" ลงนามคำสั่งการ "),e("span",{class:"text-green-500"},"สำเร็จ")])],-1),D_=e("hr",null,null,-1),T_={class:"flex justify-center mt-4"};function j_(a,n,V,p,d,v){const b=_("Icon"),y=_("Tooltip"),T=_("router-link"),D=_("Dropdown"),j=_("Pagination"),r=_("vue-good-table"),C=_("Card"),h=_("ItemOrder"),i=_("Radio"),k=_("Textarea"),m=_("Textinput"),x=_("Button"),M=_("Modal"),f=_("ModalError");return t(),o("div",lc,[p.isMobile?(t(),o("div",s_,[n_,p.items.length>0?(t(),o("div",l_,[(t(!0),o(F,null,Z(p.items,(c,S)=>(t(),I(h,{key:S,item:c},null,8,["item"]))),128))])):(t(),o("div",a_,d_))])):(t(),I(C,{key:0,noborder:"",bodyClass:"p-0"},{default:u(()=>[l(r,{columns:p.columns,styleClass:" vgt-table bordered lesspadding2",rows:p.items,"pagination-options":{enabled:!0,perPage:p.paginate.perpage},"sort-options":{enabled:!1},"select-options":{enabled:!1,selectOnCheckboxOnly:!0,selectioninfoClass:"custom-class",selectionText:"rows selected",clearSelectionText:"clear"}},{emptystate:u(()=>[ac]),"table-row":u(c=>{var S,w,P,$,Y,O,A,B;return[c.column.field=="book"?(t(),o("span",ic,[e("div",dc,[e("div",rc,[c.row.document_type=="เอกสารทั่วไป (ส่งฉบับจริง)"?(t(),o("div",cc,[l(b,{icon:"emojione-monotone:letter-p",class:"handle text-[25px] text-yellow-500"})])):s("",!0),c.row.document_type=="เอกสารอิเล็กทรอนิกส์"?(t(),o("div",_c,[l(b,{icon:"emojione-monotone:letter-e",class:"handle text-[25px] text-blue-700"})])):s("",!0),c.row.document_type=="หนังสือรับจากอีเมล"?(t(),o("div",uc,[l(b,{icon:"mdi:email",class:"handle text-[25px] text-orange-500"})])):s("",!0)]),e("div",gc,[c.row.urgency_level=="ด่วน"?(t(),o("div",hc,xc)):s("",!0),c.row.urgency_level=="ด่วนมาก"?(t(),o("div",pc,fc)):s("",!0),c.row.urgency_level=="ด่วนที่สุด"?(t(),o("div",wc,yc)):s("",!0),c.row.secrecy_level=="ลับ"?(t(),o("div",kc,Cc)):s("",!0),c.row.secrecy_level=="ลับมาก"?(t(),o("div",Sc,Pc)):s("",!0),c.row.secrecy_level=="ลับที่สุด"?(t(),o("div",Dc,jc)):s("",!0)])])])):s("",!0),c.column.field=="subject"?(t(),o("span",Ic,[e("div",Oc,[l(y,null,{base:u(()=>[e("div",Vc,g(c.row.subject),1)]),default:u(()=>[e("div",null,g(c.row.subject),1)]),_:2},1024),e("div",Rc,g(c.row.detail),1),(S=c.row)!=null&&S.document_attachments&&((w=c.row)==null?void 0:w.document_attachments.length)>0?(t(),o("div",Ec,[(t(!0),o(F,null,Z(c.row.document_attachments,z=>(t(),o("div",{key:z},[e("a",{href:d.urlSarabun+(z==null?void 0:z.file_path),target:"_blank",class:""},[e("div",Bc,[l(b,{icon:"ant-design:file-pdf-filled",class:"text-red-500 pr-1"}),e("div",Yc,g(z==null?void 0:z.file_name),1)])],8,Hc)]))),128))])):s("",!0)])])):s("",!0),c.column.field=="document_number"?(t(),o("span",Ac,g(c.row.document_number?c.row.document_number:c.row.book_pdf_at),1)):s("",!0),c.column.field=="from"?(t(),o("span",zc,g(c.row.book_type=="inside"?(P=c.row.from_data)==null?void 0:P.organization_name:($=c.row.from_data)==null?void 0:$.name),1)):s("",!0),c.column.field=="to"?(t(),o("span",Fc,g((Y=c.row.to_data)==null?void 0:Y.full_name),1)):s("",!0),c.column.field=="created_at"?(t(),o("span",Zc,g(c.row.created_at?p.convertDateTime(c.row.created_at)+" น.":"-"),1)):s("",!0),c.column.field=="status"?(t(),o("span",Nc,[((O=c.row)==null?void 0:O.status)=="สั่งการแล้ว"?(t(),o("div",Uc,[e("span",Lc,g((A=c.row)==null?void 0:A.status),1)])):(t(),o("div",Gc,[e("span",Wc,g((B=c.row)==null?void 0:B.status),1)]))])):s("",!0),c.column.field=="action"?(t(),o("span",qc,[l(D,{classMenuItems:"right-full  w-[220px] top-[110%] "},{menus:u(()=>{var z,Q,ee,ae;return[e("ul",Jc,[e("li",null,[l(T,{to:c.row.doc_pickup_type=="หนังสือส่ง"?"order/wait-to-send/"+c.row.id+"?type=order":"order/wait-to-receive/"+c.row.id+"?type=order"},{default:u(()=>{var oe,ie;return[e("div",Kc,[l(b,{icon:"grommet-icons:document-text",class:"text-xl mr-2"}),R(" "+g((ie=(oe=p.permission)==null?void 0:oe.sub_menu)!=null&&ie.sign?"ดูรายละเอียด":"ดำเนินการส่งหนังสือ"),1)])]}),_:2},1032,["to"])]),(Q=(z=p.permission)==null?void 0:z.sub_menu)!=null&&Q.sign?s("",!0):(t(),o("li",Qc,[e("div",null,[e("div",{class:"p-2 flex items-center hover:bg-gray-50 cursor-pointer",onClick:oe=>p.handleImplement(c.row)},[l(b,{icon:"heroicons:information-circle-20-solid",class:"text-xl mr-2"}),R(" ดูคำสั่งการ/คำเสนอ ")],8,Xc)])])),(ae=(ee=p.permission)==null?void 0:ee.sub_menu)!=null&&ae.sign?s("",!0):(t(),o("li",e_,[e("div",{class:"p-2 flex items-center hover:bg-gray-50 cursor-pointer text-red-500",onClick:oe=>p.handleCancelOrder(c.row)},[l(b,{icon:"material-symbols:delete",class:"text-xl mr-2"}),R(" ยกเลิกหนังสือ ")],8,t_)]))])]}),default:u(()=>[l(b,{icon:"pepicons-pencil:dots-x",class:"text-gray-400 text-4xl"})]),_:2},1024)])):s("",!0)]}),"pagination-bottom":u(c=>[e("div",o_,[l(j,{total:p.paginate.total,current:p.paginate.current_page,"per-page":p.paginate.perpage,pageRange:p.paginate.pageRange,onPageChanged:n[0]||(n[0]=S=>p.changePage(S)),pageChanged:c.pageChanged,perPageChanged:c.perPageChanged,textAfterInput:"ไปที่หน้า",enableSearch:"",enableInput:""},null,8,["total","current","per-page","pageRange","pageChanged","perPageChanged"])])]),_:1},8,["columns","rows","pagination-options"])]),_:1})),p.modalImplement?(t(),I(M,{key:2,title:"",activeModal:p.modalImplement,"onEvent:closeModal":n[7]||(n[7]=c=>p.modalImplement=!1),label:"",labelClass:"btn-outline-dark",sizeClass:"w-full max-w-[700px]",centered:""},{default:u(()=>{var c,S,w,P;return[e("div",r_,[e("div",c_,[__,e("div",u_,[l(i,{label:"เพื่อทราบ",modelValue:p.itemModal.order,"onUpdate:modelValue":n[1]||(n[1]=$=>p.itemModal.order=$),value:"เพื่อทราบ",labelClass:"text-[16px]",disabled:""},null,8,["modelValue"]),l(i,{label:"ลงนาม",modelValue:p.itemModal.order,"onUpdate:modelValue":n[2]||(n[2]=$=>p.itemModal.order=$),value:"ลงนาม",labelClass:"text-[16px]",disabled:""},null,8,["modelValue"]),l(i,{label:"สั่งการ",modelValue:p.itemModal.order_type,"onUpdate:modelValue":n[3]||(n[3]=$=>p.itemModal.order_type=$),value:"สั่งการ",labelClass:"text-[16px]",disabled:""},null,8,["modelValue"])])]),e("div",g_,[h_,e("div",m_,[l(k,{modelValue:p.itemModal.order_detail,"onUpdate:modelValue":n[4]||(n[4]=$=>p.itemModal.order_detail=$),classInput:"border border-gray-400 text_area_bg",rows:3,placeholder:"",disabled:""},null,8,["modelValue"])])]),e("div",x_,[p_,e("div",b_,[l(m,{modelValue:(S=(c=p.itemModal)==null?void 0:c.signed_by_data)==null?void 0:S.full_name,disabled:""},null,8,["modelValue"])])]),e("div",f_,[w_,e("div",v_,[l(m,{modelValue:(P=(w=p.itemModal)==null?void 0:w.signed_by_data)==null?void 0:P.position,disabled:""},null,8,["modelValue"])])])]),y_,e("div",k_,[l(x,{text:"ดำเนินการส่งหนังสือ",btnClass:"btn-primary w-32 mx-2",onClick:n[5]||(n[5]=$=>{var Y,O,A;return a.$router.push(((Y=p.itemModal)==null?void 0:Y.doc_pickup_type)=="หนังสือส่ง"?"/app/issue/order/wait-to-send/"+((O=p.itemModal)==null?void 0:O.id)+"?type=order":"/app/issue/order/wait-to-receive/"+((A=p.itemModal)==null?void 0:A.id)+"?type=order")})}),l(x,{text:"ปิด",btnClass:"btn-outline-dark w-32 mx-2",onClick:n[6]||(n[6]=$=>p.modalImplement=!1)})])]}),_:1},8,["activeModal"])):s("",!0),l(f,{title:"",isOpen:p.isError,"onEvent:closeModal":n[8]||(n[8]=c=>p.isError=!1)},{default:u(()=>[e("div",$_,g(p.errorMessage),1)]),_:1},8,["isOpen"]),p.isOrderSuccess?(t(),I(M,{key:3,title:"",activeModal:p.isOrderSuccess,"onEvent:closeModal":n[11]||(n[11]=c=>p.isOrderSuccess=!1),label:"",labelClass:"btn-outline-dark",sizeClass:"w-full max-w-[700px]",centered:""},{default:u(()=>[e("div",C_,[e("div",S_,[e("div",M_,[l(b,{icon:"icon-park-solid:protect",class:"text-6xl text-green-500"})]),P_])]),D_,e("div",T_,[l(x,{text:"ปิด",btnClass:"btn-primary w-32 mx-2",onClick:n[9]||(n[9]=c=>p.isOrderSuccess=!1)}),l(x,{text:"ไปหน้ารายการ",btnClass:"btn-outline-dark w-32 mx-2",onClick:n[10]||(n[10]=c=>a.$router.push("/app/issue/order"))})])]),_:1},8,["activeModal"])):s("",!0)])}const I_=U(nc,[["render",j_]]);const O_={props:{filter:{type:Object,default:()=>({})}},components:{ModalError:le,Button:te,Modal:me,ModalSuccess:xe,Pagination:q,Dropdown:W,Icon:N,Card:L,Tooltip:J},data(){return{urlSarabun:G,selectedIds:[],isModalDuplicateError:!1,isModalDuplicateSuccess:!1,isModalDeleteError:!1,isModalDeleteSuccess:!1,isShowModalCancelBook:!1,advancedTable:[],paginate:{total:50,current_page:1,perpage:10,pageRange:5},columns:[{label:"หนังสือ",field:"book",width:"3.10%",tdClass:"text_left",thClass:"text_left"},{label:"เลขที่หนังสือ",field:"book_pdf_at",width:"15.50%",tdClass:"text_left",thClass:"text_left"},{label:"เลขส่ง",field:"initial_number_from",width:"11.63%"},{label:"เรื่อง",field:"subject",width:"31.01%",tdClass:"text_left",thClass:"text_left"},{label:"ถึง",field:"to",width:"31.01%",tdClass:"text_left",thClass:"text_left"},{label:"จัดการ",field:"action",width:"7.75%"}]}},watch:{filter:{handler:function(a){this.getData(1)},deep:!0}},created(){this.getData(1)},methods:{async duplicate(a){const n=await H("documentSendStore","duplicate",{payload:{id:a}});n.status==200?(this.isModalDuplicateSuccess=!0,this.messageDuplicateSuccess="ทำซ้ำหนังสือ"):(this.isModalDuplicateError=!0,this.errorDuplicateMessage=n.data.message)},async openModalAction(a,n=void 0){console.log("action",a),console.log("id",n),a=="cancel"&&(this.isShowModalCancelBook=!0,this.selectedIds.push(n),this.messageDeleteSuccess="ยกเลิกหนังสือ")},async cancelBook(){this.isShowModalCancelBook=!1;const a=this.selectedIds.map(V=>({id:V}));console.log("payload",a);const n=await H("documentSendStore","delete",{payload:a});console.log("res",n),n.status==200?(this.isModalDeleteSuccess=!0,this.getData(1)):(console.log("error: ",n),this.isModalDeleteError=!0,this.errorMessage=n.data.message)},colseModalDuplicateSuccess(){this.isModalDeleteSuccess=!1,location.reload()},closeModal(){this.isShowModalCancelBook=!1},async getData(a){const n=await H("documentSendStore","get",{payload:{page:a,...this.filter}});n.status===200&&(this.advancedTable=n.data.result.data,this.paginate.total=n.data.result.total_page*n.data.result.per_page,this.paginate.current_page=n.data.result.current_page,this.paginate.perpage=n.data.result.per_page)},async changePage(a){this.paginate.current_page=a,await this.getData(a)}}},V_={class:"custom__table"},R_=e("div",{class:"text-center"},[e("div",{class:"text-gray-400"},"ไม่พบข้อมูล")],-1),E_={key:0},H_={class:"flex space-x-1"},B_={class:"shrink w-[30px]"},Y_={key:0},A_={key:1},z_={key:2},F_={class:"space-y-1"},Z_={key:0},N_=e("div",{class:"bg-yellow-500 text-center rounded text-white px-2 py-1"}," ด่วน ",-1),U_=[N_],L_={key:1},G_=e("div",{class:"bg-orange-500 text-center rounded text-white px-2 py-1"}," ด่วนมาก ",-1),W_=[G_],q_={key:2},J_=e("div",{class:"bg-red-500 text-center rounded text-white px-2 py-1"}," ด่วนที่สุด ",-1),K_=[J_],Q_={key:3},X_=e("div",{class:"bg-white border-2 border-blue-700 text-center rounded text-black px-2"}," ลับ ",-1),eu=[X_],tu={key:4},ou=e("div",{class:"bg-white border-2 border-red-500 text-center rounded text-black px-2"}," ลับมาก ",-1),su=[ou],nu={key:5},lu=e("div",{class:"bg-white border-2 border-yellow-500 text-center rounded text-black px-2"}," ลับที่สุด ",-1),au=[lu],iu={key:1},du={key:0},ru=e("div",{class:"flex justify-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26",height:"31",viewBox:"0 0 26 31",fill:"none"},[e("g",{filter:"url(#filter0_d_13354_130148)"},[e("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M18 21V23H16V21H18ZM20 21H22C22 22.1046 21.1046 23 20 23V21ZM14 21V23H12V21H14ZM10 21V23H8V21H10ZM6 21V23C4.89543 23 4 22.1046 4 21H6ZM20 13H22V15H20V13ZM20 11V9H16C14.8954 9 14 8.10457 14 7V3H6V11H4V3C4 1.89543 4.89543 1 6 1H16.4142L22 6.58579V11H20ZM6 13V15H4V13H6ZM20 17H22V19H20V17ZM6 17V19H4V17H6ZM16 3.41421V7H19.5858L16 3.41421Z",fill:"#1A56DB"})])])],-1),cu=[ru],_u={key:1},uu={key:0,class:"flex justify-center"},gu={key:1},hu={key:2},mu={class:"w-[100%]"},xu={class:"ell-1"},pu={class:"text-gray-400 ell-1 mb-1"},bu={key:0,class:"flex space-x-4"},fu=["href"],wu={class:"flex items-center bg-gray-100 border rounded-md px-2 w-[120px] h-[24px] cursor-pointer"},vu={class:"ell-1"},yu={key:3},ku={key:4},$u={class:"w-full"},Cu={class:"p-2 flex items-center hover:bg-gray-50 cursor-pointer"},Su={class:"p-2 flex items-center hover:bg-gray-50 cursor-pointer"},Mu=["onClick"],Pu=["onClick"],Du={class:"py-4 px-3"},Tu=e("div",{class:"text-center text-lg py-3"},"ยืนยันการยกเลิกหนังสือ",-1),ju={class:"flex justify-center mt-4"},Iu={class:"text-lg text-slate-900"},Ou=e("span",{class:"text-green-500"}," สำเร็จ",-1),Vu={class:"text-lg text-slate-900"},Ru={class:"text-lg text-slate-900"},Eu=e("span",{class:"text-green-500"}," สำเร็จ",-1),Hu={class:"text-lg text-slate-900"};function Bu(a,n,V,p,d,v){const b=_("Icon"),y=_("Tooltip"),T=_("router-link"),D=_("Dropdown"),j=_("Pagination"),r=_("vue-good-table"),C=_("Card"),h=_("Button"),i=_("Modal"),k=_("ModalSuccess"),m=_("ModalError");return t(),o("div",V_,[l(C,{noborder:"",bodyClass:"p-0"},{default:u(()=>[l(r,{columns:d.columns,styleClass:" vgt-table bordered lesspadding2",rows:d.advancedTable,"pagination-options":{enabled:!0,perPage:d.paginate.perpage},"sort-options":{enabled:!1},"select-options":{enabled:!1,selectOnCheckboxOnly:!0,selectioninfoClass:"custom-class",selectionText:"rows selected",clearSelectionText:"clear"}},{emptystate:u(()=>[R_]),"table-row":u(x=>{var M,f,c,S;return[x.column.field=="book"?(t(),o("span",E_,[e("div",H_,[e("div",B_,[x.row.document_type=="เอกสารทั่วไป (ส่งฉบับจริง)"?(t(),o("div",Y_,[l(b,{icon:"emojione-monotone:letter-p",class:"handle text-[25px] text-yellow-500"})])):s("",!0),x.row.document_type=="เอกสารอิเล็กทรอนิกส์"?(t(),o("div",A_,[l(b,{icon:"emojione-monotone:letter-e",class:"handle text-[25px] text-blue-700"})])):s("",!0),x.row.document_type=="หนังสือรับจากอีเมล"?(t(),o("div",z_,[l(b,{icon:"mdi:email",class:"handle text-[25px] text-orange-500"})])):s("",!0)]),e("div",F_,[x.row.urgency_level=="ด่วน"?(t(),o("div",Z_,U_)):s("",!0),x.row.urgency_level=="ด่วนมาก"?(t(),o("div",L_,W_)):s("",!0),x.row.urgency_level=="ด่วนที่สุด"?(t(),o("div",q_,K_)):s("",!0),x.row.secrecy_level=="ลับ"?(t(),o("div",Q_,eu)):s("",!0),x.row.secrecy_level=="ลับมาก"?(t(),o("div",tu,su)):s("",!0),x.row.secrecy_level=="ลับที่สุด"?(t(),o("div",nu,au)):s("",!0)])])])):s("",!0),x.column.field=="initial_number_from"?(t(),o("span",iu,[x.row.is_draft?(t(),o("div",du,cu)):(t(),o("div",_u,[x.row.status==="บันทึกฉบับร่าง"?(t(),o("div",uu,[l(b,{icon:"carbon:report",class:"handle text-[25px] text-orange-500"})])):(t(),o("div",gu,g((M=x.row)==null?void 0:M.initial_number_from),1))]))])):s("",!0),x.column.field=="subject"?(t(),o("span",hu,[e("div",mu,[l(y,null,{base:u(()=>[e("div",xu,g(x.row.subject),1)]),default:u(()=>[e("div",null,g(x.row.subject),1)]),_:2},1024),e("div",pu,g(x.row.detail),1),(f=x.row)!=null&&f.document_attachments&&((c=x.row)==null?void 0:c.document_attachments.length)>0?(t(),o("div",bu,[(t(!0),o(F,null,Z(x.row.document_attachments,w=>(t(),o("div",{key:w},[e("a",{href:d.urlSarabun+(w==null?void 0:w.file_path),target:"_blank",class:""},[e("div",wu,[l(b,{icon:"ant-design:file-pdf-filled",class:"text-red-500 pr-1"}),e("div",vu,g(w==null?void 0:w.file_name),1)])],8,fu)]))),128))])):s("",!0)])])):s("",!0),x.column.field=="to"?(t(),o("span",yu,g(((S=x.row.to_data)==null?void 0:S.full_name)??"-"),1)):s("",!0),x.column.field=="action"?(t(),o("span",ku,[l(D,{classMenuItems:"right-full  w-[220px] top-[110%] "},{menus:u(()=>[e("ul",$u,[e("li",null,[l(T,{to:"wait-to-send/"+x.row.id},{default:u(()=>[e("div",Cu,[l(b,{icon:"grommet-icons:document-text",class:"text-xl mr-2"}),R(" ดูรายละเอียด ")])]),_:2},1032,["to"])]),e("li",null,[l(T,{to:"wait-to-send/edit/"+x.row.id},{default:u(()=>[e("div",Su,[l(b,{icon:"bx:edit",class:"text-xl mr-2"}),R(" แก้ไข ")])]),_:2},1032,["to"])]),e("li",null,[e("div",{class:"p-2 flex items-center hover:bg-gray-50 cursor-pointer text-red-500",onClick:w=>v.openModalAction("cancel",x.row.id)},[l(b,{icon:"material-symbols:delete",class:"text-xl mr-2"}),R(" ยกเลิกหนังสือ ")],8,Mu)]),e("li",null,[e("div",{class:"p-2 flex items-center hover:bg-gray-50 cursor-pointer border-t",onClick:w=>v.duplicate(x.row.id)},[l(b,{icon:"ic:baseline-plus",class:"text-xl mr-2"}),R(" ทำซ้ำเป็นหนังสือใหม่ ")],8,Pu)])])]),default:u(()=>[l(b,{icon:"pepicons-pencil:dots-x",class:"text-gray-400 text-4xl"})]),_:2},1024)])):s("",!0)]}),"pagination-bottom":u(x=>[e("div",Du,[l(j,{total:d.paginate.total,current:d.paginate.current_page,"per-page":d.paginate.perpage,pageRange:d.paginate.pageRange,onPageChanged:n[0]||(n[0]=M=>v.changePage(M)),pageChanged:x.pageChanged,perPageChanged:x.perPageChanged,textAfterInput:"ไปที่หน้า",enableSearch:"",enableInput:""},null,8,["total","current","per-page","pageRange","pageChanged","perPageChanged"])])]),_:1},8,["columns","rows","pagination-options"])]),_:1}),d.isShowModalCancelBook?(t(),I(i,{key:0,title:"ยกเลิกหนังสือ",activeModal:d.isShowModalCancelBook,"onEvent:closeModal":n[3]||(n[3]=x=>d.isShowModalCancelBook=!1),sizeClass:"w-full max-w-[500px]",label:"",labelClass:"btn-outline-dark",centered:""},{default:u(()=>[e("div",null,[Tu,e("div",ju,[l(h,{text:"ยืนยัน",btnClass:"btn-primary w-32 mx-2",onOnClick:n[1]||(n[1]=x=>v.cancelBook())}),l(h,{text:"ยกเลิก",btnClass:"btn-outline-dark w-32 mx-2",onOnClick:n[2]||(n[2]=x=>v.closeModal())})])])]),_:1},8,["activeModal"])):s("",!0),l(k,{title:"ยืนยันการลบข้อมูล",isOpen:d.isModalDeleteSuccess,"onEvent:closeModal":n[4]||(n[4]=x=>d.isModalDeleteSuccess=!1)},{default:u(()=>[e("h4",Iu,[R(g(a.messageDeleteSuccess)+" ",1),Ou])]),_:1},8,["isOpen"]),l(m,{title:"",isOpen:d.isModalDeleteError,"onEvent:closeModal":n[5]||(n[5]=x=>d.isModalDeleteError=!1)},{default:u(()=>[e("h4",Vu,g(a.errorMessage),1)]),_:1},8,["isOpen"]),l(k,{title:"ทำซ้ำหนังสือ",isOpen:d.isModalDuplicateSuccess,"onEvent:closeModal":n[6]||(n[6]=x=>v.colseModalDuplicateSuccess())},{default:u(()=>[e("h4",Ru,[R(g(a.messageDuplicateSuccess)+" ",1),Eu])]),_:1},8,["isOpen"]),l(m,{title:"",isOpen:d.isModalDuplicateError,"onEvent:closeModal":n[7]||(n[7]=x=>d.isModalDuplicateError=!1)},{default:u(()=>[e("h4",Hu,g(a.errorDuplicateMessage),1)]),_:1},8,["isOpen"])])}const Yu=U(O_,[["render",Bu]]);const Au={props:{filter:{type:Object,default:()=>({})}},components:{Pagination:q,Dropdown:W,Icon:N,Card:L,ModalError:le,Tooltip:J},data(){return{urlSarabun:G,isError:!1,errorMessage:"",advancedTable:[],paginate:{total:50,current_page:1,perpage:10,pageRange:5},columns:[{label:"หนังสือ",field:"book",width:"2.68%",tdClass:"text_left",thClass:"text_left"},{label:"เลขที่หนังสือ",field:"document_number",width:"13.42%",tdClass:"text_left",thClass:"text_left"},{label:"เลขรับ/ส่ง",field:"initial_number_from",width:"10.07%"},{label:"เรื่อง",field:"subject",width:"26.85%",tdClass:"text_left",thClass:"text_left"},{label:"จาก",field:"from",width:"26.85%",tdClass:"text_left",thClass:"text_left"},{label:"วัน/เวลานำเข้า",field:"created_at",width:"13.42%",tdClass:"text_left",thClass:"text_left"},{label:"จัดการ",field:"action",width:"6.71%"}]}},watch:{filter:{handler:function(a){this.getData(1)},deep:!0}},created(){this.getData(1)},methods:{async getData(a){const n=await H("examineStore","get",{payload:{page:a,...this.filter}});n.status===200&&(this.advancedTable=n.data.result.data,this.paginate.total=n.data.result.total_page*n.data.result.per_page,this.paginate.current_page=n.data.result.current_page,this.paginate.perpage=n.data.result.per_page)},async changePage(a){this.paginate.current_page=a,await this.getData(a)},convertDateTime(a){return X(a).locale("th").add(543,"year").format("DD MMM YYYY HH:mm")}}},zu={class:"custom__table"},Fu=e("div",{class:"text-center"},[e("div",{class:"text-gray-400"},"ไม่พบข้อมูล")],-1),Zu={key:0},Nu={class:"flex space-x-1"},Uu={class:"shrink w-[30px]"},Lu={key:0},Gu={key:1},Wu={key:2},qu={class:"space-y-1"},Ju={key:0},Ku=e("div",{class:"bg-yellow-500 text-center rounded text-white px-2 py-1"}," ด่วน ",-1),Qu=[Ku],Xu={key:1},eg=e("div",{class:"bg-orange-500 text-center rounded text-white px-2 py-1"}," ด่วนมาก ",-1),tg=[eg],og={key:2},sg=e("div",{class:"bg-red-500 text-center rounded text-white px-2 py-1"}," ด่วนที่สุด ",-1),ng=[sg],lg={key:3},ag=e("div",{class:"bg-white border-2 border-blue-700 text-center rounded text-black px-2"}," ลับ ",-1),ig=[ag],dg={key:4},rg=e("div",{class:"bg-white border-2 border-red-500 text-center rounded text-black px-2"}," ลับมาก ",-1),cg=[rg],_g={key:5},ug=e("div",{class:"bg-white border-2 border-yellow-500 text-center rounded text-black px-2"}," ลับที่สุด ",-1),gg=[ug],hg={key:1},mg={key:2},xg={key:0},pg={key:3},bg={class:"w-[100%]"},fg={class:"ell-1"},wg={class:"text-gray-400 ell-1 mb-1"},vg={key:0,class:"flex space-x-4"},yg=["href"],kg={class:"flex items-center bg-gray-100 border rounded-md px-2 w-[120px] h-[24px] cursor-pointer"},$g={class:"ell-1"},Cg={key:4},Sg={key:5},Mg={key:6},Pg={class:"w-full"},Dg={class:"p-2 flex items-center hover:bg-gray-50 cursor-pointer"},Tg={class:"py-4 px-3"},jg={class:"text-lg text-slate-900"};function Ig(a,n,V,p,d,v){const b=_("Icon"),y=_("Tooltip"),T=_("router-link"),D=_("Dropdown"),j=_("Pagination"),r=_("vue-good-table"),C=_("Card"),h=_("ModalError");return t(),o("div",zu,[l(C,{noborder:"",bodyClass:"p-0"},{default:u(()=>[l(r,{columns:d.columns,styleClass:" vgt-table bordered lesspadding2",rows:d.advancedTable,"pagination-options":{enabled:!0,perPage:d.paginate.perpage},"sort-options":{enabled:!1},"select-options":{enabled:!1,selectOnCheckboxOnly:!0,selectioninfoClass:"custom-class",selectionText:"rows selected",clearSelectionText:"clear"}},{emptystate:u(()=>[Fu]),"table-row":u(i=>{var k,m,x,M;return[i.column.field=="book"?(t(),o("span",Zu,[e("div",Nu,[e("div",Uu,[i.row.document_type=="เอกสารทั่วไป (ส่งฉบับจริง)"?(t(),o("div",Lu,[l(b,{icon:"emojione-monotone:letter-p",class:"handle text-[25px] text-yellow-500"})])):s("",!0),i.row.document_type=="เอกสารอิเล็กทรอนิกส์"?(t(),o("div",Gu,[l(b,{icon:"emojione-monotone:letter-e",class:"handle text-[25px] text-blue-700"})])):s("",!0),i.row.document_type=="หนังสือรับจากอีเมล"?(t(),o("div",Wu,[l(b,{icon:"mdi:email",class:"handle text-[25px] text-orange-500"})])):s("",!0)]),e("div",qu,[i.row.urgency_level=="ด่วน"?(t(),o("div",Ju,Qu)):s("",!0),i.row.urgency_level=="ด่วนมาก"?(t(),o("div",Xu,tg)):s("",!0),i.row.urgency_level=="ด่วนที่สุด"?(t(),o("div",og,ng)):s("",!0),i.row.secrecy_level=="ลับ"?(t(),o("div",lg,ig)):s("",!0),i.row.secrecy_level=="ลับมาก"?(t(),o("div",dg,cg)):s("",!0),i.row.secrecy_level=="ลับที่สุด"?(t(),o("div",_g,gg)):s("",!0)])])])):s("",!0),i.column.field=="document_number"?(t(),o("span",hg,g(i.row.document_number?i.row.document_number:i.row.book_pdf_at),1)):s("",!0),i.column.field=="initial_number_from"?(t(),o("span",mg,[i.row.initial_number_from?(t(),o("div",xg,g(i.row.initial_number_from),1)):s("",!0)])):s("",!0),i.column.field=="subject"?(t(),o("span",pg,[e("div",bg,[l(y,null,{base:u(()=>[e("div",fg,g(i.row.subject),1)]),default:u(()=>[e("div",null,g(i.row.subject),1)]),_:2},1024),e("div",wg,g(i.row.detail),1),(k=i.row)!=null&&k.document_attachments&&((m=i.row)==null?void 0:m.document_attachments.length)>0?(t(),o("div",vg,[(t(!0),o(F,null,Z(i.row.document_attachments,f=>(t(),o("div",{key:f},[e("a",{href:d.urlSarabun+(f==null?void 0:f.file_path),target:"_blank",class:""},[e("div",kg,[l(b,{icon:"ant-design:file-pdf-filled",class:"text-red-500 pr-1"}),e("div",$g,g(f==null?void 0:f.file_name),1)])],8,yg)]))),128))])):s("",!0)])])):s("",!0),i.column.field=="created_at"?(t(),o("span",Cg,g(i.row.created_at?v.convertDateTime(i.row.created_at)+" น.":"-"),1)):s("",!0),i.column.field=="from"?(t(),o("span",Sg,g(i.row.book_type=="inside"?(x=i.row.from_data)==null?void 0:x.organization_name:(M=i.row.from_data)==null?void 0:M.name),1)):s("",!0),i.column.field=="action"?(t(),o("span",Mg,[l(D,{classMenuItems:"right-full  w-[220px] top-[110%] "},{menus:u(()=>[e("ul",Pg,[e("li",null,[l(T,{to:"/app/issue/examine/"+i.row.id},{default:u(()=>[e("div",Dg,[l(b,{icon:"grommet-icons:document-text",class:"text-xl mr-2"}),R(" ดูรายละเอียด ")])]),_:2},1032,["to"])])])]),default:u(()=>[l(b,{icon:"pepicons-pencil:dots-x",class:"text-gray-400 text-4xl"})]),_:2},1024)])):s("",!0)]}),"pagination-bottom":u(i=>[e("div",Tg,[l(j,{total:d.paginate.total,current:d.paginate.current_page,"per-page":d.paginate.perpage,pageRange:d.paginate.pageRange,onPageChanged:n[0]||(n[0]=k=>v.changePage(k)),pageChanged:i.pageChanged,perPageChanged:i.perPageChanged,textAfterInput:"ไปที่หน้า",enableSearch:"",enableInput:""},null,8,["total","current","per-page","pageRange","pageChanged","perPageChanged"])])]),_:1},8,["columns","rows","pagination-options"])]),_:1}),l(h,{title:"",isOpen:d.isError,"onEvent:closeModal":n[1]||(n[1]=i=>a.$router.back())},{default:u(()=>[e("div",jg,g(d.errorMessage),1)]),_:1},8,["isOpen"])])}const Og=U(Au,[["render",Ig]]);const Vg={props:{filter:{type:Object,default:()=>({})}},components:{Button:te,Modal:ce,Pagination:q,Dropdown:W,Icon:N,Card:L,Textarea:se,Tooltip:J,TextValid:ne},data(){return{urlSarabun:G,isShowSuggestion:!1,returnSuggestion:"",paginate:{total:50,current_page:1,perpage:10,pageRange:5},row:[],columns:[{label:"หนังสือ",field:"book",width:"2.52%",tdClass:"text_left",thClass:"text_left"},{label:"เลขที่หนังสือ",field:"document_number",width:"12.58%",tdClass:"text_left",thClass:"text_left"},{label:"เลขรับ/ส่ง",field:"initial_number_from",width:"9.43%"},{label:"เรื่อง",field:"subject",width:"25.16%",tdClass:"text_left",thClass:"text_left"},{label:"จาก",field:"from",width:"25.16%",tdClass:"text_left",thClass:"text_left"},{label:"ถึง",field:"to",width:"25.16%",tdClass:"text_left",thClass:"text_left"}]}},watch:{filter:{handler:function(a){this.getData(1)},deep:!0}},created(){this.getData(1)},methods:{convertDateTime(a){return a?X(a).locale("th").add(543,"year").format("DD MMM YYYY HH:mm"):"-"},async getData(a){console.log("getdata");const n=await H("acknowStore","get",{payload:{page:a,...this.filter}});n.status===200&&(console.log("res naja",n),this.row=n.data.result.data,this.paginate.total=n.data.result.total_page*n.data.result.per_page,this.paginate.current_page=n.data.result.current_page,this.paginate.perpage=n.data.result.per_page,this.returnSuggestion=n.data.result.data.suggestion_reason)},async changePage(a){this.paginate.current_page=a,await this.getData(a)},openModalSuggestion(){this.isShowSuggestion=!0},closeModal(){this.isShowSuggestion=!1,this.returnSuggestion=""}}},Rg={class:"custom__table"},Eg=e("div",{class:"text-center"},[e("div",{class:"text-gray-400"},"ไม่พบข้อมูล")],-1),Hg={key:0},Bg={key:1},Yg={class:"w-[100%]"},Ag=["onClick"],zg={class:"text-gray-400 ell-1 mb-1"},Fg={key:0,class:"flex space-x-4"},Zg=["href"],Ng={class:"flex items-center bg-gray-100 border rounded-md px-2 w-[120px] h-[24px] cursor-pointer"},Ug={class:"ell-1"},Lg={key:2},Gg={class:"flex space-x-1"},Wg={class:"shrink w-[30px]"},qg={key:0},Jg={key:1},Kg={key:2},Qg={class:"space-y-1"},Xg={key:0},eh=e("div",{class:"bg-yellow-500 text-center rounded text-white px-2 py-1"}," ด่วน ",-1),th=[eh],oh={key:1},sh=e("div",{class:"bg-orange-500 text-center rounded text-white px-2 py-1"}," ด่วนมาก ",-1),nh=[sh],lh={key:2},ah=e("div",{class:"bg-red-500 text-center rounded text-white px-2 py-1"}," ด่วนที่สุด ",-1),ih=[ah],dh={key:3},rh=e("div",{class:"bg-white border-2 border-blue-700 text-center rounded text-black px-2"}," ลับ ",-1),ch=[rh],_h={key:4},uh=e("div",{class:"bg-white border-2 border-red-500 text-center rounded text-black px-2"}," ลับมาก ",-1),gh=[uh],hh={key:5},mh=e("div",{class:"bg-white border-2 border-yellow-500 text-center rounded text-black px-2"}," ลับที่สุด ",-1),xh=[mh],ph={key:3},bh={key:4},fh={key:0},wh={key:5},vh={key:6},yh={class:"py-4 px-3"};function kh(a,n,V,p,d,v){const b=_("Tooltip"),y=_("Icon"),T=_("Pagination"),D=_("vue-good-table"),j=_("Card");return t(),o("div",Rg,[l(j,{noborder:"",bodyClass:"p-0"},{default:u(()=>[l(D,{columns:d.columns,styleClass:" vgt-table bordered lesspadding2",rows:d.row,"pagination-options":{enabled:!0,perPage:d.paginate.perpage},"sort-options":{enabled:!1},"select-options":{enabled:!1,selectOnCheckboxOnly:!0,selectioninfoClass:"custom-class",selectionText:"rows selected",clearSelectionText:"clear"}},{emptystate:u(()=>[Eg]),"table-row":u(r=>{var C,h,i,k,m,x,M,f,c,S,w,P,$,Y,O,A,B,z,Q,ee,ae,oe,ie,pe,be,fe,we,ve,ye;return[r.column.field=="created_at"?(t(),o("span",Hg,g(r.row.document.created_at?v.convertDateTime(r.row.document.created_at)+" น.":"-"),1)):s("",!0),r.column.field=="subject"?(t(),o("span",Bg,[e("div",Yg,[l(b,null,{base:u(()=>{var K,de;return[e("div",{onClick:jh=>r.row.document.doc_pickup_type=="หนังสือส่ง"?a.$router.push("acknowledge/wait-to-send/"+r.row.document.id):a.$router.push("acknowledge/wait-to-receive/"+r.row.document.id),class:"ell-1 hover:underline pointer cursor-pointer"},g((de=(K=r.row)==null?void 0:K.document)==null?void 0:de.subject),9,Ag)]}),default:u(()=>{var K,de;return[e("div",null,g((de=(K=r.row)==null?void 0:K.document)==null?void 0:de.subject),1)]}),_:2},1024),e("div",zg,g((h=(C=r.row)==null?void 0:C.document)==null?void 0:h.detail),1),(k=(i=r.row)==null?void 0:i.document)!=null&&k.document_attachments&&((x=(m=r.row)==null?void 0:m.document)==null?void 0:x.document_attachments.length)>0?(t(),o("div",Fg,[(t(!0),o(F,null,Z((M=r.row)==null?void 0:M.document.document_attachments,K=>(t(),o("div",{key:K},[e("a",{href:d.urlSarabun+(K==null?void 0:K.file_path),target:"_blank",class:""},[e("div",Ng,[l(y,{icon:"ant-design:file-pdf-filled",class:"text-red-500 pr-1"}),e("div",Ug,g(K==null?void 0:K.file_name),1)])],8,Zg)]))),128))])):s("",!0)])])):s("",!0),r.column.field=="book"?(t(),o("span",Lg,[e("div",Gg,[e("div",Wg,[((c=(f=r.row)==null?void 0:f.document)==null?void 0:c.document_type)=="เอกสารทั่วไป (ส่งฉบับจริง)"?(t(),o("div",qg,[l(y,{icon:"emojione-monotone:letter-p",class:"handle text-[25px] text-yellow-500"})])):s("",!0),((S=r.row.document)==null?void 0:S.document_type)=="เอกสารอิเล็กทรอนิกส์"?(t(),o("div",Jg,[l(y,{icon:"emojione-monotone:letter-e",class:"handle text-[25px] text-blue-700"})])):s("",!0),((w=r.row.document)==null?void 0:w.document_type)=="หนังสือรับจากอีเมล"?(t(),o("div",Kg,[l(y,{icon:"mdi:email",class:"handle text-[25px] text-orange-500"})])):s("",!0)]),e("div",Qg,[((P=r.row.document)==null?void 0:P.urgency_level)=="ด่วน"?(t(),o("div",Xg,th)):s("",!0),(($=r.row.document)==null?void 0:$.urgency_level)=="ด่วนมาก"?(t(),o("div",oh,nh)):s("",!0),((Y=r.row.document)==null?void 0:Y.urgency_level)=="ด่วนที่สุด"?(t(),o("div",lh,ih)):s("",!0),((O=r.row.document)==null?void 0:O.secrecy_level)=="ลับ"?(t(),o("div",dh,ch)):s("",!0),((A=r.row.document)==null?void 0:A.secrecy_level)=="ลับมาก"?(t(),o("div",_h,gh)):s("",!0),((B=r.row.document)==null?void 0:B.secrecy_level)=="ลับที่สุด"?(t(),o("div",hh,xh)):s("",!0)])])])):s("",!0),r.column.field=="document_number"?(t(),o("span",ph,g((z=r.row.document)!=null&&z.document_number?(Q=r.row.document)==null?void 0:Q.document_number:(ee=r.row.document)==null?void 0:ee.book_pdf_at),1)):s("",!0),r.column.field=="initial_number_from"?(t(),o("span",bh,[(ae=r.row.document)!=null&&ae.initial_number_from?(t(),o("div",fh,g((oe=r.row.document)==null?void 0:oe.initial_number_from),1)):s("",!0)])):s("",!0),r.column.field=="from"?(t(),o("span",wh,g(((ie=r.row.document)==null?void 0:ie.book_type)=="inside"?(be=(pe=r.row.document)==null?void 0:pe.from_data)==null?void 0:be.organization_name:(we=(fe=r.row.document)==null?void 0:fe.from_data)==null?void 0:we.name),1)):s("",!0),r.column.field=="to"?(t(),o("span",vh,g((ye=(ve=r.row.document)==null?void 0:ve.to_data)==null?void 0:ye.full_name),1)):s("",!0)]}),"pagination-bottom":u(r=>[e("div",yh,[l(T,{total:d.paginate.total,current:d.paginate.current_page,"per-page":d.paginate.perpage,pageRange:d.paginate.pageRange,onPageChanged:n[0]||(n[0]=C=>v.changePage(C)),pageChanged:r.pageChanged,perPageChanged:r.perPageChanged,textAfterInput:"ไปที่หน้า",enableSearch:"",enableInput:""},null,8,["total","current","per-page","pageRange","pageChanged","perPageChanged"])])]),_:1},8,["columns","rows","pagination-options"])]),_:1})])}const $h=U(Vg,[["render",kh]]),Ch={components:{Modal:ce,imformationCard:Ie,InputGroup:Oe,Icon:N,Button:te,Select:Ve,VueSelect:Re,vSelect:Ee,Signed:fo,Follow:_s,PullBack:sn,Acknow:$h,SentBack:ja,SentBook:bi,Suggestion:dd,SuggestionHistory:ar,Pending:sc,ReturnBookHistory:Wn,ExamineHistory:Fl,Order:I_,WaitToSend:Yu,Examine:Og,Card:L,AdvancedSearch:He},data(){return{keyword:"",status:"",filter:{},isShowModalAS:!1}},computed:{statusList(){switch(this.$route.name){case"issue/pending":return[{title:"เสนอแนะแล้ว",id:"เสนอแนะแล้ว"},{title:"รอเสนอแนะ",id:"รอเสนอแนะ"},{title:"รอดำเนินการ",id:"รอดำเนินการ"},{title:"รอตรวจสอบ",id:"รอตรวจสอบ"},{title:"รอสั่งการ",id:"รอสั่งการ"},{title:"สั่งการแล้ว",id:"สั่งการแล้ว"},{title:"รอลงนาม",id:"รอลงนาม"},{title:"ลงนามแล้ว",id:"ลงนามแล้ว"},{title:"ปฏิบัติงานเสร็จ",id:"ปฏิบัติงานเสร็จ"}];case"issue/order":return[{title:"สั่งการแล้ว",id:"สั่งการแล้ว"},{title:"รอสั่งการ",id:"รอสั่งการ"}];case"issue/sent-book":return[{title:"ปฏิบัติงานเสร็จ",id:"ปฏิบัติงานเสร็จ"},{title:"ยกเลิกหนังสือ",id:"ยกเลิกหนังสือ"}];case"issue/signed":return[{title:"ลงนามแล้ว",id:"ลงนามแล้ว"},{title:"รอลงนาม",id:"รอลงนาม"}];default:return[]}},isMobile(){return he().isMobile},isHide(){return!["issue/suggestion","issue/pull-back","issue/follow","issue/sent-back","issue/wait-to-send","issue/examine","issue/acknowledge","issue/history-return","issue/history-suggestion","issue/history-examine"].includes(this.$route.name)}},watch:{status:{handler:function(a){a||this.onFilter({status:"",keyword:this.keyword})}},$route:{handler:function(a){this.isShowModalAS=!1,this.keyword=""}}},methods:{convertDate(a){return X(a).locale("th").add(543,"year").format("DD/MM/YYYY")},convertDateTime(a){return X(a).locale("th").add(543,"year").format("DD MMM YYYY HH:mm")},onFilter(a){this.filter=a}}},Sh={class:"p-6"},Mh={key:0,class:"flex gap-3"},Ph={class:"flex flex-wrap sm:flex-nowrap gap-3 items-center"},Dh={key:0};function Th(a,n,V,p,d,v){const b=_("Button"),y=_("router-link"),T=_("vSelect"),D=_("VueSelect"),j=_("InputGroup"),r=_("AdvancedSearch"),C=_("imformationCard"),h=_("Signed"),i=_("Follow"),k=_("PullBack"),m=_("SentBack"),x=_("SentBook"),M=_("Suggestion"),f=_("SuggestionHistory"),c=_("Pending"),S=_("Order"),w=_("WaitToSend"),P=_("Examine"),$=_("ReturnBookHistory"),Y=_("ExamineHistory"),O=_("Acknow"),A=_("Card");return t(),o("div",{class:ge(v.isMobile?"":"bg-white")},[l(A,{noborder:"",bodyClass:"p-0",className:v.isMobile?"shadow-none border-0 bg-transparent":""},{default:u(()=>[e("div",Sh,[v.isMobile?s("",!0):(t(),o("div",{key:0,class:ge(a.$route.name=="issue/wait-to-send"?"flex pb-6 space-y-0 justify-between":"flex pb-6 space-y-0 justify-end")},[a.$route.name=="issue/wait-to-send"?(t(),o("div",Mh,[e("div",null,[l(y,{to:"wait-to-send/create-book"},{default:u(()=>[l(b,{icon:"ic:baseline-plus",text:"สร้างหนังสือ",btnClass:"btn-primary rounded-md"})]),_:1})])])):s("",!0),e("div",Ph,[v.isHide?(t(),o("div",Dh,[l(D,{classInput:"input_color"},{default:u(()=>[l(T,{modelValue:d.status,"onUpdate:modelValue":n[0]||(n[0]=B=>d.status=B),label:"title",placeholder:"สถานะทั้งหมด",class:"input_color border rounded w-[200px]",reduce:B=>B.id,options:v.statusList,"onOption:selected":n[1]||(n[1]=B=>v.onFilter({status:d.status,keyword:d.keyword}))},null,8,["modelValue","reduce","options"])]),_:1})])):s("",!0),e("div",null,[l(j,{modelValue:d.keyword,"onUpdate:modelValue":n[2]||(n[2]=B=>d.keyword=B),placeholder:"Search",classInputGroup:"border-gray-200",type:"text",prependIcon:"heroicons-outline:search",merged:"",inputEnter:"","onEvent:inputEnter":n[3]||(n[3]=B=>v.onFilter({status:d.status,keyword:d.keyword}))},null,8,["modelValue"])]),e("div",null,[l(b,{icon:"mdi:filter",text:"ค้นหาขั้นสูง",btnClass:"btn-primary rounded-md h-[40px] flex items-center",onClick:n[4]||(n[4]=B=>{d.isShowModalAS=!d.isShowModalAS,d.keyword=""})})])])],2)),l(r,{isOpen:d.isShowModalAS,"onEvent:close":n[5]||(n[5]=B=>d.isShowModalAS=!1),"onEvent:submit":v.onFilter},null,8,["isOpen","onEvent:submit"]),v.isMobile?s("",!0):(t(),I(C,{key:1})),a.$route.name=="issue/signed"?(t(),I(h,{key:2,filter:d.filter},null,8,["filter"])):s("",!0),a.$route.name=="issue/follow"?(t(),I(i,{key:3,filter:d.filter},null,8,["filter"])):s("",!0),a.$route.name=="issue/pull-back"?(t(),I(k,{key:4,filter:d.filter},null,8,["filter"])):s("",!0),a.$route.name=="issue/sent-back"?(t(),I(m,{key:5,filter:d.filter},null,8,["filter"])):s("",!0),a.$route.name=="issue/sent-book"?(t(),I(x,{key:6,filter:d.filter},null,8,["filter"])):s("",!0),a.$route.name=="issue/suggestion"?(t(),I(M,{key:7,filter:d.filter},null,8,["filter"])):s("",!0),a.$route.name=="issue/history-suggestion"?(t(),I(f,{key:8,filter:d.filter},null,8,["filter"])):s("",!0),a.$route.name=="issue/pending"?(t(),I(c,{key:9,filter:d.filter},null,8,["filter"])):s("",!0),a.$route.name=="issue/order"?(t(),I(S,{key:10,filter:d.filter},null,8,["filter"])):s("",!0),a.$route.name=="issue/wait-to-send"?(t(),I(w,{key:11,filter:d.filter},null,8,["filter"])):s("",!0),a.$route.name=="issue/examine"?(t(),I(P,{key:12,filter:d.filter},null,8,["filter"])):s("",!0),a.$route.name=="issue/history-return"?(t(),I($,{key:13,filter:d.filter},null,8,["filter"])):s("",!0),a.$route.name=="issue/history-examine"?(t(),I(Y,{key:14,filter:d.filter},null,8,["filter"])):s("",!0),a.$route.name=="issue/acknowledge"?(t(),I(O,{key:15,filter:d.filter},null,8,["filter"])):s("",!0)])]),_:1},8,["className"])],2)}const vm=U(Ch,[["render",Th]]);export{vm as default};
