import{C as S}from"./index-263882d1.js";import{I as g}from"./index-72ee420c.js";import{E as F}from"./index-1c6333b5.js";import{D as O}from"./index-090a8953.js";import{C as j,B as I,A as P,a as V,b as Y,R as H}from"./RouteDetail-b3469ae3.js";import{B as N}from"./BookDraftRef-746d0155.js";import{A as q}from"./AttachedFileStamp-b7cdd757.js";import{M as z}from"./index-2a7f4259.js";import{_ as T,t as G,a as v}from"./index-e058a960.js";import{d as J}from"./dayjs.min-72c81edc.js";import{M as K}from"./index-1b218db3.js";import{o as L,x as r,bj as m,m as c,n as p,aF as t,as as a,p as i,aT as l}from"./preload-helper-9e0646ca.js";import"./iconify-4e42c13d.js";import"./dom-891ac6c3.js";import"./focus-management-e6c5d1fd.js";import"./open-closed-486d85f0.js";import"./use-resolve-button-type-38f1f99a.js";import"./use-outside-click-a758fdce.js";import"./index-441935dc.js";import"./index-cc7a2b4b.js";import"./transition-39b574f4.js";import"./hidden-11a9ab9d.js";import"./micro-task-89dcd6af.js";const Q={name:"ExamineView",components:{Card:S,Icon:g,Expansion:F,Dropdown:O,CoverSheet:j,BookDetail:I,AttachedFile:P,BookReference:V,Activity:Y,RouteDetail:H,AttachedFileStamp:q,BookDraftRef:N,ModalError:z,Modal:K},data(){return{isOpen:!1,pdfPath:"",urlSarabun:G,item:null,isError:!1,examineError:!1,errorMessage:""}},created(){this.fetchData()},methods:{async pdfHistory(){const{data:o,status:s}=await v("documentStore","PDFHistory",{payload:this.$route.params.id});s==200&&(console.log("data pdf",o.result),this.pdfPath=o.result,this.isOpen=!0)},async fetchData(){const{data:o,status:s}=await v("pullbackStore","show",{payload:{type:this.$route.query.type,id:this.$route.params.id}});s===200?this.item=o.result:(this.isError=!0,this.errorMessage=o.message)},convertDate(o){return o?J(o).locale("th").add(543,"year").format("DD/MM/YYYY"):"-"}}},U={class:"flex justify-between items-center"},W={class:"basis-1/2"},X={class:"flex items-center gap-3"},Z={class:"shrink w-[145px]"},$=i("div",null,"กลับไปหน้ารายการ",-1),ee={class:"text-2xl font-medium my-6"},te={class:"text-lg text-slate-900"},oe=["src"];function se(o,s,ie,re,e,d){const y=t("Icon"),k=t("CoverSheet"),x=t("BookDetail"),D=t("AttachedFileStamp"),M=t("BookDraftRef"),C=t("AttachedFile"),E=t("BookReference"),B=t("Activity"),b=t("RouteDetail"),w=t("Card"),A=t("ModalError"),R=t("Modal");return a(),L("div",null,[r(w,null,{default:m(()=>{var n,_,u,f,h;return[i("div",U,[i("div",W,[i("div",X,[i("div",Z,[i("div",{onClick:s[0]||(s[0]=ne=>o.$router.back()),class:"flex items-center text-primary-600 cursor-pointer"},[r(y,{icon:"mdi:chevron-left",class:"text-xl"}),$])])])])]),i("div",ee," วันที่ "+l(d.convertDate((n=e.item)==null?void 0:n.document_date))+" "+l((_=e.item)==null?void 0:_.subject)+" พ.ศ. "+l((u=e.item)==null?void 0:u.year),1),r(k,{item:e.item},null,8,["item"]),r(x,{item:e.item},null,8,["item"]),((f=e.item)==null?void 0:f.doc_pickup_type)=="หนังสือรับ"?(a(),c(D,{key:0,item:e.item},null,8,["item"])):p("",!0),((h=e.item)==null?void 0:h.doc_pickup_type)=="หนังสือส่ง"?(a(),c(M,{key:1,item:e.item},null,8,["item"])):p("",!0),r(C,{item:e.item},null,8,["item"]),r(E,{item:e.item},null,8,["item"]),r(B,{item:e.item,"onEvent:onClick":d.pdfHistory},null,8,["item","onEvent:onClick"]),r(b,{item:e.item},null,8,["item"])]}),_:1}),r(A,{title:"",isOpen:e.isError,"onEvent:closeModal":s[1]||(s[1]=n=>e.isError=!1)},{default:m(()=>[i("div",te,l(e.errorMessage),1)]),_:1},8,["isOpen"]),e.isOpen?(a(),c(R,{key:0,title:"ดูรายละเอียดเอกสาร",labelClass:"btn-outline-dark",sizeClass:"w-3/4",label:"",centered:"",activeModal:e.isOpen,"onEvent:closeModal":s[2]||(s[2]=n=>e.isOpen=!1)},{default:m(()=>[i("div",null,[i("iframe",{class:"w-full h-[1000px] mt-4",src:"data:application/pdf;base64, "+e.pdfPath,frameborder:"0"},null,8,oe)])]),_:1},8,["activeModal"])):p("",!0)])}const Se=T(Q,[["render",se]]);export{Se as default};
