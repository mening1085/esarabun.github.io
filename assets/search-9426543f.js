import{_ as J,u as L,g as S,a as R}from"./index-e058a960.js";import{I as z}from"./itemOrder-fb71273a.js";import{C as q,V as A}from"./VueSelect-4c8519b3.js";import{k as O,aA as b,al as E,be as B,o as u,p,aT as G,x as D,bj as T,n as U,F as H,aD as K,ac as P,aF as V,as as c,m as Q}from"./preload-helper-9e0646ca.js";import"./index-72ee420c.js";import"./iconify-4e42c13d.js";import"./dayjs.min-72c81edc.js";import"./index-38c86086.js";import"./Modal-19eb68c4.js";import"./transition-39b574f4.js";import"./dom-891ac6c3.js";import"./hidden-11a9ab9d.js";import"./focus-management-e6c5d1fd.js";import"./micro-task-89dcd6af.js";import"./open-closed-486d85f0.js";import"./use-outside-click-a758fdce.js";import"./index-3069c0b6.js";import"./vee-validate.esm-0c282d04.js";import"./array-e684e252.js";import"./index-441935dc.js";import"./TextValid-100be459.js";import"./index-ce9a51c5.js";import"./index-31d1a8ca.js";import"./vue-cleave.min-9e1201c2.js";import"./index-3e810d59.js";import"./tabs-aa384b53.js";import"./use-resolve-button-type-38f1f99a.js";import"./index-2a7f4259.js";import"./index-1b218db3.js";import"./index-7dc8252b.js";import"./index-b0f16bcd.js";const W={components:{ItemOrder:z,vSelect:q,VueSelect:A},setup(){var C;const a=(C=L().currentRoute.value.query)==null?void 0:C.p,g=O(()=>S()),t=g.value.filter,w=O(()=>S().toggleFilter),m=b([]),o={total:1,total_page:1,current:1,perpage:10,pageRange:5},l=b(""),i=b(""),r=b("sarabun"),k=b([{id:"sarabun",title:"ระบบสารบรรณอิเล็กทรอนิกส์"},{id:"meeting",title:"ระบบการประชุมอิเล็กทรอนิกส์"}]);E(()=>{switch(console.log("routeName",a),a){case"home":F();break;case"issue/order":l.value="orderStore",i.value="get",n(1);break;case"issue/signed":l.value="signedStore",i.value="get",n(1);break;case"central/rotate-book":l.value="circularStore",i.value="get",n(1);break;case"list":l.value="generalStore",i.value="getMainSearch",n(1);break}}),B(()=>S().toggleFilter,s=>{s&&n(1)}),B(()=>r.value,s=>{s&&F()});const F=()=>{r.value=="sarabun"?(l.value="orderStore",i.value="get",n(1)):(l.value="signedStore",i.value="get",n(1))},N=async s=>(g.value.toggleFilter=!1,await R(l.value,i.value,{payload:{page:s,pageSize:5,...t,fields:JSON.stringify(t.fields),document_type:JSON.stringify(t.document_type),book_type:JSON.stringify(t.book_type)}})),n=async s=>{var d,_,v,y,f,x,M;g.value.toggleFilter=!1;const{status:h,data:e}=await N(s);h==200?(m.value=a=="central/rotate-book"?(d=e==null?void 0:e.result)==null?void 0:d.data.map(j=>j.document):(_=e==null?void 0:e.result)==null?void 0:_.data,o.total=((v=e==null?void 0:e.result)==null?void 0:v.total_page)*((y=e==null?void 0:e.result)==null?void 0:y.per_page),o.total_page=(f=e==null?void 0:e.result)==null?void 0:f.total_page,o.current=(x=e==null?void 0:e.result)==null?void 0:x.current_page,o.perpage=(M=e==null?void 0:e.result)==null?void 0:M.per_page):m.value=[]};return{routeName:a,general:g,filter:t,items:m,system:r,systemList:k,paginate:o,toggleFilter:w,getData:n,loadMore:async s=>{var d,_,v,y,f,x;console.log("loadMore",s);const{status:h,data:e}=await N(s);console.log("loadMore",h,e),h==200&&(m.value=[...m.value,...(d=e==null?void 0:e.result)==null?void 0:d.data],o.total=((_=e==null?void 0:e.result)==null?void 0:_.total_page)*((v=e==null?void 0:e.result)==null?void 0:v.per_page),o.total_page=(y=e==null?void 0:e.result)==null?void 0:y.total_page,o.current=(f=e==null?void 0:e.result)==null?void 0:f.current_page,o.perpage=(x=e==null?void 0:e.result)==null?void 0:x.per_page)}}}},X={key:0,class:"flex justify-between items-center mb-6"},Y={class:"text-[12px] basis-1/3"},Z={class:"basis-2/3 flex items-center"},$=p("div",{class:"text-[12px]"},"ระบบ",-1),ee={class:"pl-2 w-[250px]"},te={key:1},oe={key:0},re={class:"flex justify-center mt-3"},se={key:1},ae=p("div",{class:"border rounded bg-gray-50 px-3 py-2 text-center text-gray-400 text-[12px]"},[p("div",{class:"text-[14px] text-gray-400"},"ไม่พบข้อมูล")],-1),le=[ae],ie={key:2};function ne(I,a,g,t,w,m){const o=V("vSelect"),l=V("VueSelect"),i=V("ItemOrder");return c(),u("div",null,[t.routeName=="home"?(c(),u("div",X,[p("div",Y," ผลการค้นหา "+G(t.items.length)+" รายการ ",1),p("div",Z,[$,p("div",ee,[D(l,null,{default:T(()=>[D(o,{modelValue:t.system,"onUpdate:modelValue":a[0]||(a[0]=r=>t.system=r),label:"title",placeholder:"สถานะทั้งหมด",class:"input_color border rounded w-full",reduce:r=>r.id,options:t.systemList,clearable:!1},null,8,["modelValue","reduce","options"])]),_:1})])])])):U("",!0),t.system=="sarabun"?(c(),u("div",te,[t.items.length>0?(c(),u("div",oe,[(c(!0),u(H,null,K(t.items,(r,k)=>(c(),Q(i,{key:k,item:r},null,8,["item"]))),128)),p("div",re,[p("div",{class:P(["text-[12px] cursor-pointer",t.paginate.current==t.paginate.total_page?"text-gray-400":"text-primary-500 "]),onClick:a[1]||(a[1]=r=>t.paginate.current==t.paginate.total_page?"":t.loadMore(t.paginate.current+1))}," แสดงเพิ่มเติม ",2)])])):(c(),u("div",se,le))])):(c(),u("div",ie,"todo: e-meeting component"))])}const Ee=J(W,[["render",ne]]);export{Ee as default};
