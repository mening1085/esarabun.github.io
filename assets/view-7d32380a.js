import{C as S}from"./index-263882d1.js";import{I as g}from"./index-72ee420c.js";import{E as F}from"./index-1c6333b5.js";import{C as O,B as j,A as I,a as P,b as V,R as Y}from"./RouteDetail-b3469ae3.js";import{A as H}from"./AttachedFileStamp-b7cdd757.js";import{B as N}from"./BookDraftRef-746d0155.js";import{_ as z,t as T,a as h}from"./index-e058a960.js";import{d as q}from"./dayjs.min-72c81edc.js";import{M as G}from"./index-2a7f4259.js";import{M as J}from"./index-1b218db3.js";import{o as K,x as r,bj as m,m as c,n as p,aF as t,as as a,p as i,aT as l}from"./preload-helper-9e0646ca.js";import"./iconify-4e42c13d.js";import"./index-441935dc.js";import"./index-090a8953.js";import"./dom-891ac6c3.js";import"./focus-management-e6c5d1fd.js";import"./open-closed-486d85f0.js";import"./use-resolve-button-type-38f1f99a.js";import"./use-outside-click-a758fdce.js";import"./index-cc7a2b4b.js";import"./transition-39b574f4.js";import"./hidden-11a9ab9d.js";import"./micro-task-89dcd6af.js";const L={name:"ExamineView",components:{Card:S,Icon:g,Expansion:F,CoverSheet:O,BookDetail:j,AttachedFile:I,BookReference:P,Activity:V,RouteDetail:Y,BookDraftRef:N,ModalError:G,Modal:J,AttachedFileStamp:H},data(){return{isOpen:!1,pdfPath:"",urlSarabun:T,item:null,isError:!1,errorMessage:""}},created(){this.fetchData()},methods:{async pdfHistory(){const{data:o,status:s}=await h("documentStore","PDFHistory",{payload:this.$route.params.id});s==200&&(console.log("data pdf",o.result),this.pdfPath=o.result,this.isOpen=!0)},async fetchData(){const{data:o,status:s}=await h("documentCancelStore","showCancel",{payload:this.$route.params.id});s===200?this.item=o.result:(this.isError=!0,this.errorMessage=o.message)},convertDate(o){return o?q(o).locale("th").add(543,"year").format("DD/MM/YYYY"):"-"}}},Q={class:"flex justify-between items-center"},U={class:"basis-1/2"},W={class:"flex items-center gap-3"},X={class:"shrink w-[145px]"},Z=i("div",null,"กลับไปหน้ารายการ",-1),$={class:"text-2xl font-medium my-6"},ee={class:"text-lg text-slate-900"},te=["src"];function oe(o,s,se,ie,e,d){const y=t("Icon"),k=t("CoverSheet"),x=t("BookDetail"),C=t("BookDraftRef"),D=t("AttachedFileStamp"),M=t("AttachedFile"),B=t("BookReference"),E=t("Activity"),b=t("RouteDetail"),w=t("Card"),A=t("ModalError"),R=t("Modal");return a(),K("div",null,[r(w,null,{default:m(()=>{var n,_,u,f,v;return[i("div",Q,[i("div",U,[i("div",W,[i("div",X,[i("div",{onClick:s[0]||(s[0]=re=>o.$router.back()),class:"flex items-center text-primary-600 cursor-pointer"},[r(y,{icon:"mdi:chevron-left",class:"text-xl"}),Z])])])])]),i("div",$," วันที่ "+l(d.convertDate((n=e.item)==null?void 0:n.document_date))+" "+l((_=e.item)==null?void 0:_.subject)+" พ.ศ. "+l((u=e.item)==null?void 0:u.year),1),r(k,{item:e.item},null,8,["item"]),r(x,{item:e.item},null,8,["item"]),((f=e.item)==null?void 0:f.doc_pickup_type)=="หนังสือส่ง"?(a(),c(C,{key:0,item:e.item},null,8,["item"])):p("",!0),((v=e.item)==null?void 0:v.doc_pickup_type)=="หนังสือรับ"?(a(),c(D,{key:1,item:e.item},null,8,["item"])):p("",!0),r(M,{item:e.item},null,8,["item"]),r(B,{item:e.item},null,8,["item"]),r(E,{item:e.item,"onEvent:onClick":d.pdfHistory},null,8,["item","onEvent:onClick"]),r(b,{item:e.item},null,8,["item"])]}),_:1}),r(A,{title:"",isOpen:e.isError,"onEvent:closeModal":s[1]||(s[1]=n=>e.isError=!1)},{default:m(()=>[i("div",ee,l(e.errorMessage),1)]),_:1},8,["isOpen"]),e.isOpen?(a(),c(R,{key:0,title:"ดูรายละเอียดเอกสาร",labelClass:"btn-outline-dark",sizeClass:"w-3/4",label:"",centered:"",activeModal:e.isOpen,"onEvent:closeModal":s[2]||(s[2]=n=>e.isOpen=!1)},{default:m(()=>[i("div",null,[i("iframe",{class:"w-full h-[1000px] mt-4",src:"data:application/pdf;base64, "+e.pdfPath,frameborder:"0"},null,8,te)])]),_:1},8,["activeModal"])):p("",!0)])}const Re=z(L,[["render",oe]]);export{Re as default};
