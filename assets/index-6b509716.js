import{T as P}from"./index-31d1a8ca.js";import{u as D,a as W}from"./vee-validate.esm-0c282d04.js";import{c as J,a as E}from"./array-e684e252.js";import{M as X}from"./Modal-19eb68c4.js";import{al as H,aA as f,be as L,k as Y,aF as u,as as s,o as a,p as t,n,x as _,aT as $,bj as F,w as y,ac as k,bo as K,m as ee}from"./preload-helper-9e0646ca.js";import{_ as Q,u as te,g as oe,a as O,b as se,c as ae,d as re,w as ie,e as ne}from"./index-e058a960.js";import{B as le}from"./index-441935dc.js";import{_ as ce,a as de,b as me}from"./logo-eoffice-e00e496d.js";import{_ as ue,a as _e}from"./logo-27204725.js";import"./index-72ee420c.js";import"./iconify-4e42c13d.js";import"./vue-cleave.min-9e1201c2.js";import"./transition-39b574f4.js";import"./dom-891ac6c3.js";import"./hidden-11a9ab9d.js";import"./focus-management-e6c5d1fd.js";import"./micro-task-89dcd6af.js";import"./open-closed-486d85f0.js";import"./use-outside-click-a758fdce.js";const pe={components:{Textinput:P,Modal:X,Button:le},setup(){H(()=>{});const g=f(!1),o=f(!1),p=f(""),e=J({email:E().required("กรุณากรอกชื่อผู้ใช้งาน").email(),password:E().required("กรุณากรอกรหัสผ่าน")}),l=f(),i=te(),c={email:"foobar@mail.com",password:"12345678"},{handleSubmit:b}=D({validationSchema:e,initialValues:c}),{value:x,errorMessage:w}=W("email"),{value:r,errorMessage:A}=W("password");L(r,async(d,h)=>{o.value=!1,v.value||V()});const v=Y(()=>oe().isMobile),q=b(async d=>{var T,S,U,R,j,I,B;let h=await O("authStore","login",{payload:{email:d.email,password:d.password}});h.status==200?(se.post("https://oae-emeet-api.jigsawgroups.work/api/v1/token",{grant_type:"client_credentials",email:d.email,password:d.password},{headers:{Authorization:"Basic UTU2U3U3M3VUM2h3OG9UN0dGQWZxU3Z4U2RUZ3Z2clp0RWNjYTl6ckFZa05kVlBMQzYyVjJQZEp1RGtyOlBDTW1wemRXS1k1MjZKdnV5dWRQVktIaUJhN2dwaFdiRXlOeHlEWEVGd25WWTM5eHMzdFZWazV4UVIyTVJZeUdaSDRRN2pucUZxWlNyVXRUMnd0Zmg","Content-Type":"application/json"}}).then(m=>{var Z,z,C,N;console.log("resEmeet",m.data);const G=((z=(Z=m.data)==null?void 0:Z.json)==null?void 0:z.token_type)+" "+((N=(C=m.data)==null?void 0:C.json)==null?void 0:N.access_token);localStorage.setItem("meetingToken",G)}).catch(m=>{console.log("meetingTokenError: ",m)}),v.value?(U=ae().userInfo)!=null&&U.have_mobile_pin?(M(),i.push("/pin?deviceToken="+((B=(I=i.currentRoute.value)==null?void 0:I.query)==null?void 0:B.deviceToken))):i.push("/change-pin?deviceToken="+((j=(R=i.currentRoute.value)==null?void 0:R.query)==null?void 0:j.deviceToken)):((S=(T=h.data.result)==null?void 0:T.user)==null?void 0:S.isNew)==!0?i.push("/change-password-first"):(M(),i.push("/select-page"))):(o.value=!0,p.value=h.data.message)}),M=async()=>{await O("generalStore","getMenu",{payload:{system_type:"e-sarabun"}})},V=()=>{r.value.length%2==0?l.value.style.transform="rotate(180deg)":l.value.style.transform="rotate(0deg)"};return{showModal:g,imageLock:l,rotateImage:V,email:x,checkPassword:o,errorMessage:p,emailError:w,password:r,passwordError:A,onSubmit:q,isMobile:v}}},he={key:0,class:"text-lg mb-3 text-black-500"},fe={class:"space-y-4 px-3 md:px-0"},ge={key:0,classInput:"h-[48px]",class:"text-red-400 mt-1 text-sm"},be={key:1,class:"text-right justify-between"},xe={class:"text-center"},we={key:0,class:"btn btn-light w-5/12 text-center border",type:"button",style:{"background-color":"white",color:"rgb(142, 142, 150)","border-color":"rgb(142, 142, 150)"}},ve={key:2,class:"text-center py-3"},ye={class:"flex items-center md:mt-12"},ke={key:0,height:"150",width:"150",class:"content-center",src:ce,alt:"",ref:"imageLock",style:{"margin-left":"auto","margin-right":"auto"}},Me={key:0,class:"content-center absolute bottom-0 left-0 z-0",src:re,alt:"",style:{"margin-left":"auto","margin-right":"auto"}},Ve=t("div",{class:"text-center pb-10 pt-6"},[y(" สามารถรีเซ็ตรหัสผ่านได้ "),t("br"),y(" เฉพาะบน e-Office Automation เท่านั้น ")],-1),Te=t("hr",{class:"mb-4"},null,-1),Se={class:"flex justify-center"};function Ue(g,o,p,e,l,i){const c=u("Textinput"),b=u("router-link"),x=u("Button"),w=u("Modal");return s(),a("div",null,[t("form",{onSubmit:o[3]||(o[3]=K((...r)=>e.onSubmit&&e.onSubmit(...r),["prevent"])),class:k([e.isMobile?"bg-white rounded-md p-4":"","relative z-10"])},[e.isMobile?(s(),a("div",he," ลงชื่อเข้าใช้ ")):n("",!0),t("div",fe,[_(c,{placeholder:"",label:"ชื่อผู้ใช้งาน",type:"email",name:"emil",modelValue:e.email,"onUpdate:modelValue":o[0]||(o[0]=r=>e.email=r),error:e.emailError,classInput:e.checkPassword?"border-red-500 h-[48px]":"h-[48px]"},null,8,["modelValue","error","classInput"]),_(c,{placeholder:"",label:"รหัสผ่าน",type:"password",name:"password",modelValue:e.password,"onUpdate:modelValue":o[1]||(o[1]=r=>e.password=r),error:e.passwordError,hasicon:"",classInput:e.checkPassword?"border-red-500 h-[48px]":"h-[48px]"},null,8,["modelValue","error","classInput"]),e.checkPassword?(s(),a("span",ge,$(e.errorMessage||"รหัสผ่านไม่ถูกต้อง ลองอีกครั้ง"),1)):n("",!0),e.isMobile?n("",!0):(s(),a("div",be,[_(b,{to:"/forgot-password",class:"text-sm text-slate-500 dark:text-slate-400 leading-6 font-medium"},{default:F(()=>[y("ลืมรหัสผ่าน ")]),_:1})])),t("div",xe,[t("button",{type:"submit",class:k(["btn btn-primary text-center mr-7",e.isMobile?"w-full mt-4":"w-5/12"])}," เข้าสู่ระบบ ",2),e.isMobile?n("",!0):(s(),a("button",we," ยกเลิก "))]),e.isMobile?(s(),a("div",ve,[t("div",{onClick:o[2]||(o[2]=r=>e.showModal=!0),class:"text-sm text-slate-500 dark:text-slate-400 leading-6 font-medium"}," ลืมรหัสผ่าน ")])):n("",!0)])],34),t("div",ye,[e.isMobile?n("",!0):(s(),a("img",ke,null,512))]),e.isMobile?(s(),a("img",Me)):n("",!0),e.showModal?(s(),ee(w,{key:1,title:"",activeModal:e.showModal,"onEvent:closeModal":o[5]||(o[5]=r=>e.showModal=!1),label:"",labelClass:"btn-outline-dark",sizeClass:"w-full",centered:""},{default:F(()=>[Ve,Te,t("div",Se,[t("div",null,[_(x,{text:"ตกลง",btnClass:"btn-primary w-32 font-medium mx-2",onOnClick:o[4]||(o[4]=r=>e.showModal=!1)})])])]),_:1},8,["activeModal"])):n("",!0)])}const Re=Q(pe,[["render",Ue]]);const je={mixins:[ie],data(){return{logoWhite:ue,logo:_e,sideImg:de}},computed:{isMobile(){return this.window.width<768}},components:{Signin:Re},created(){setTimeout(()=>{},1500)}},Ie={class:"loginwrapper"},Be={class:"lg-inner-column"},Ze={class:"left-column relative z-[1]"},ze={class:"h-full w-full z-[-1]"},Ce=["src"],Ne={class:"px-5 max-h-screen md:h-screen md:flex md:justify-center md:flex-col"},We={class:""},Ee={key:0,class:"mt-12 w-[100px] h-[100px] mr-auto ml-auto",src:ne,alt:""},Fe={key:1,class:"content-center mt-12",src:me,alt:"",style:{"margin-left":"auto","margin-right":"auto"}},Oe={key:0,class:"text-center mt-4 mb-6"},Qe=t("div",{class:"text-[16px] font-semibold"}," สำนักงานเศรษฐกิจการเกษตร ",-1),Ae=t("div",{class:"text-[12px]"},"e-Office Automation",-1),qe=[Qe,Ae],Ge={key:1,class:"text-center mb-6",style:{color:"rgba(6, 0, 215, 1)"}},Pe=t("div",{class:"text-[16px] font-semibold"}," สำนักงานเศรษฐกิจการเกษตร ",-1),De=t("div",{class:"text-[14px]"},"e-Office Automation",-1),Je=[Pe,De];function Xe(g,o,p,e,l,i){const c=u("Signin");return s(),a("div",Ie,[t("div",Be,[t("div",Ze,[t("div",ze,[t("img",{src:l.sideImg,alt:"",class:"h-screen w-full object-cover"},null,8,Ce)])]),t("div",{class:k(["right-column relative h-screen",i.isMobile?"bg-mobile":"bg-white"])},[t("div",Ne,[t("div",We,[i.isMobile?(s(),a("img",Ee)):(s(),a("img",Fe))]),i.isMobile?(s(),a("div",Oe,qe)):(s(),a("div",Ge,Je)),_(c)])],2)])])}const pt=Q(je,[["render",Xe]]);export{pt as default};
