import{I as T}from"./index-72ee420c.js";import{d as Y}from"./dayjs.min-72c81edc.js";import{O as z}from"./index-38c86086.js";import{_ as L,g as q,a as D}from"./index-e058a960.js";import{M as G}from"./index-2a7f4259.js";import{M as H}from"./index-7dc8252b.js";import{B as J}from"./index-441935dc.js";import{M as K}from"./Modal-19eb68c4.js";import{M as Q}from"./index-b0f16bcd.js";import{aF as m,as as i,o as c,p as e,x as l,n as d,aT as h,F as R,aD as U,ac as W,m as p,bj as f,w as I}from"./preload-helper-9e0646ca.js";const X={name:"itemOrder",components:{Icon:T,OrderMobile:z,ModalError:G,ModalSuccess:H,Button:J,Modal:K,SignedModal:Q},props:{itemType:{type:String,default:"order"},item:{type:Object,default:()=>({subject:"ข้อเสนอแนะการจัดการระบบสารบรรณอิเล็กทรอนิกส์",document_number:"123456789",document_date:"2021-05-12"})}},computed:{isMobile(){return q().isMobile}},async created(){await this.addActionCheckView()},data(){return{modalSubmitOrder:!1,isOrderSuccess:!1,modalSigned:!1,isSignedSuccess:!1,isError:!1,errorMessage:"",showAction:!1,actions:[{icon:"mdi:certificate",type:1},{icon:"mdi:paperclip",type:2},{icon:"ion:eye",type:3},{icon:"grommet-icons:tree",type:4}],modalSubmitOrder:!1}},methods:{convertDate(n){return n?Y(n).locale("th").add(543,"year").format("DD/MM/YYYY"):"-"},onClickAction(n){var t,s,_;switch(console.log(n),n){case 1:this.itemType==="order"?this.modalSubmitOrder=!0:this.modalSigned=!0;break;case 2:this.$router.push("/app/issue/order/attachment/"+this.item.id+"?doc_pickup_type="+this.item.doc_pickup_type);break;case 3:this.$route.name=="central/rotate-book"?((t=this.item)==null?void 0:t.doc_pickup_type)=="หนังสือส่ง"?this.$router.push("/app/central/rotate-book/wait-to-send/"+((s=this.item)==null?void 0:s.id)):this.$router.push("/app/central/rotate-book/wait-to-receive/"+((_=this.item)==null?void 0:_.id)):this.item.doc_pickup_type=="หนังสือส่ง"?this.$router.push("/app/issue/order/wait-to-send/"+this.item.id+"?type=order"):this.$router.push("/app/issue/order/wait-to-receive/"+this.item.id+"?type=order");break;case 4:this.$router.push("/app/issue/order/book-flow/"+this.item.id);break;case 5:this.$router.push("/app/central/rotate-book/verify/"+this.item.id);break}},async submitOrderModal(n){n.id=this.item.id;const{status:t,data:s}=await D("orderStore","store",{payload:n});console.log("data",t,s),t===200?(this.isOrderSuccess=!0,this.modalSubmitOrder=!1):(this.isError=!0,this.errorMessage=s==null?void 0:s.message)},addActionCheckView(){console.log("route",this.$route),console.log("this.actions",this.actions),this.$route.name=="central/rotate-book"&&this.actions.unshift({icon:"heroicons:document-check-20-solid",type:5})},async signedSubmit(n){console.log("signedSubmit",n),n.id=this.item.id;const{status:t,data:s}=await D("signedStore","store",{payload:n});console.log("data",s),t===200?(this.isSignedSuccess=!0,this.modalSigned=!1):(this.isError=!0,this.errorMessage=s==null?void 0:s.message)},reloadPage(){location.reload()}}},Z={class:"p-2 border-b"},$={class:"flex gap-3"},ee={class:"shrink-0 flex self-center gap-1"},te={class:"flex space-x-1"},se={class:"shrink"},oe={key:0},ie={key:1},ne={key:2},re={class:"space-y-1"},le={key:0,class:"bg-yellow-500 text-center rounded text-white px-1 text-[10px]"},ce={key:1,class:"bg-orange-500 text-center rounded text-white px-1 text-[10px]"},de={key:2,class:"bg-red-500 text-center rounded text-white px-1 text-[10px]"},ae={key:3,class:"bg-white border-2 border-blue-700 text-center rounded text-black px-1 text-[10px]"},ue={key:4,class:"bg-white border-2 border-red-500 text-center rounded text-black px-1 text-[10px]"},me={key:5,class:"bg-white border-2 border-yellow-500 text-center rounded text-black px-1 text-[10px]"},xe={class:"flex items-center mb-1"},he=e("div",{class:"shrink w-[60px] text-gray-500"},"เลขที่หนังสือ",-1),_e={class:""},pe={class:"flex items-center mb-1"},fe=e("div",{class:"shrink w-[60px] text-gray-500"},"ลงวันที่",-1),be={class:"flex-1"},ve={class:"flex"},ge=e("div",{class:"shrink w-[60px] text-gray-500"},"เรื่อง",-1),ye={class:"flex-1"},ke=["onClick"],we={class:"h-[250px] flex items-center justify-center"},Se={class:"text-center flex flex-row flex-wrap justify-center"},Me={class:"basis-full flex justify-center mb-5"},Oe=e("div",null,[e("h4",{class:"text-lg text-slate-900"},[I(" ลงนามคำสั่งการ "),e("span",{class:"text-green-500"},"สำเร็จ")])],-1),Ce=e("hr",null,null,-1),je={class:"flex justify-center mt-4"},Ee={class:"h-[180px] flex items-center justify-center"},Ae={class:"text-center flex flex-row flex-wrap justify-center"},Be={class:"basis-full flex justify-center mb-5"},De=e("div",null,[e("h4",{class:"text-lg text-slate-900"},[I(" ลงนามเอกสารอิเล็กทรอนิกส์ "),e("span",{class:"text-green-500"},"สำเร็จ")])],-1),Ie=e("hr",null,null,-1),Ve={class:"flex justify-center mt-4"},Pe={class:"text-lg text-slate-900"};function Fe(n,t,s,_,o,a){var v,g,y,k,w,S,M,O,C,j,E,A,B;const u=m("Icon"),V=m("OrderMobile"),P=m("SignedModal"),x=m("Button"),b=m("Modal"),F=m("ModalError");return i(),c("div",Z,[e("div",$,[e("div",ee,[e("div",te,[e("div",se,[((v=s.item)==null?void 0:v.document_type)=="เอกสารทั่วไป (ส่งฉบับจริง)"?(i(),c("div",oe,[l(u,{icon:"emojione-monotone:letter-p",class:"handle text-[20px] text-yellow-500"})])):d("",!0),((g=s.item)==null?void 0:g.document_type)=="เอกสารอิเล็กทรอนิกส์"?(i(),c("div",ie,[l(u,{icon:"emojione-monotone:letter-e",class:"handle text-[20px] text-blue-700"})])):d("",!0),((y=s.item)==null?void 0:y.document_type)=="หนังสือรับจากอีเมล"?(i(),c("div",ne,[l(u,{icon:"mdi:email",class:"handle text-[20px] text-orange-500"})])):d("",!0)]),e("div",re,[((k=s.item)==null?void 0:k.urgency_level)=="ด่วน"?(i(),c("div",le," ด่วน ")):d("",!0),((w=s.item)==null?void 0:w.urgency_level)=="ด่วนมาก"?(i(),c("div",ce," ด่วนมาก ")):d("",!0),((S=s.item)==null?void 0:S.urgency_level)=="ด่วนที่สุด"?(i(),c("div",de," ด่วนที่สุด ")):d("",!0),((M=s.item)==null?void 0:M.secrecy_level)=="ลับ"?(i(),c("div",ae," ลับ ")):d("",!0),((O=s.item)==null?void 0:O.secrecy_level)=="ลับมาก"?(i(),c("div",ue," ลับมาก ")):d("",!0),((C=s.item)==null?void 0:C.secrecy_level)=="ลับที่สุด"?(i(),c("div",me," ลับที่สุด ")):d("",!0)])])]),e("div",{class:"flex-1 text-[10px]",onClick:t[0]||(t[0]=r=>o.showAction=!o.showAction)},[e("div",xe,[he,e("div",_e,h((j=s.item)==null?void 0:j.document_number),1)]),e("div",pe,[fe,e("div",be,h((E=s.item)!=null&&E.document_date?"วันที่ "+a.convertDate((A=s.item)==null?void 0:A.document_date):"-"),1)]),e("div",ve,[ge,e("div",ye,[e("div",null,h((B=s.item)==null?void 0:B.subject),1)])])]),e("button",{class:"shrink max-w-[20px] bg-gray-200 rounded-md flex flex-1 items-center justify-center",onClick:t[1]||(t[1]=r=>o.showAction=!o.showAction)},[l(u,{icon:o.showAction?"mdi:chevron-down":"mdi:chevron-right"},null,8,["icon"])])]),e("div",{class:W(["flex justify-end mt-2 mb-1 transition-all duration-300 ease-in-out overflow-hidden",o.showAction?"h-[40px]":"h-0 "])},[(i(!0),c(R,null,U(o.actions,(r,N)=>(i(),c("button",{key:N,class:"flex items-center justify-center space-x-1 w-[40px] h-[40px]",style:{"background-color":"#696974","margin-right":"1px"},onClick:Ne=>a.onClickAction(r.type)},[l(u,{class:"text-white",icon:r.icon},null,8,["icon"])],8,ke))),128))],2),a.isMobile?(i(),p(V,{key:0,isOpen:o.modalSubmitOrder,"onEvent:submit":a.submitOrderModal,"onEvent:close":t[2]||(t[2]=r=>o.modalSubmitOrder=!1)},null,8,["isOpen","onEvent:submit"])):d("",!0),l(P,{isOpen:o.modalSigned,"onEvent:close":t[3]||(t[3]=r=>o.modalSigned=!1),"onEvent:submit":a.signedSubmit},null,8,["isOpen","onEvent:submit"]),o.isOrderSuccess?(i(),p(b,{key:1,title:"",activeModal:o.isOrderSuccess,"onEvent:closeModal":t[6]||(t[6]=r=>o.isOrderSuccess=!1),label:"",labelClass:"btn-outline-dark",sizeClass:"md:w-2/5 w-full",centered:""},{default:f(()=>[e("div",we,[e("div",Se,[e("div",Me,[l(u,{icon:"icon-park-solid:protect",class:"text-6xl text-green-500"})]),Oe])]),Ce,e("div",je,[l(x,{text:"ปิด",btnClass:"btn-primary w-32 mx-2",onClick:t[4]||(t[4]=r=>a.reloadPage())}),l(x,{text:"ไปหน้ารายการ",btnClass:"btn-outline-dark w-32 mx-2",onClick:t[5]||(t[5]=r=>a.reloadPage())})])]),_:1},8,["activeModal"])):d("",!0),o.isSignedSuccess?(i(),p(b,{key:2,title:"ลงนามเอกสารอิเล็กทรอนิกส์",activeModal:o.isSignedSuccess,"onEvent:closeModal":t[9]||(t[9]=r=>o.isSignedSuccess=!1),label:"",labelClass:"btn-outline-dark",sizeClass:"w-full",centered:""},{default:f(()=>[e("div",Ee,[e("div",Ae,[e("div",Be,[l(u,{icon:"icon-park-solid:protect",class:"text-6xl text-green-500"})]),De])]),Ie,e("div",Ve,[l(x,{text:"ไปหน้ารายการ",btnClass:"btn-primary  w-32 mx-2",onClick:t[7]||(t[7]=r=>a.reloadPage())}),l(x,{text:"ปิด",btnClass:"btn-outline-dark w-32 mx-2",onClick:t[8]||(t[8]=r=>a.reloadPage())})])]),_:1},8,["activeModal"])):d("",!0),l(F,{title:"",isOpen:o.isError,"onEvent:closeModal":t[10]||(t[10]=r=>o.isError=!1)},{default:f(()=>[e("div",Pe,h(o.errorMessage),1)]),_:1},8,["isOpen"])])}const Re=L(X,[["render",Fe]]);export{Re as I};
